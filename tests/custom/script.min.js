function JSEcosystem(){this.conteiner=$("#ecosystem-wrapper");this.sliderContainer=this.conteiner.find(".ecosystem-slider");this.allWidgets=this.conteiner.find(".widget");this.widgetPopup=this.conteiner.find(".ecosystem-popup");this.window_$=$(window);this.initSlider=function(){this.sliderContainer.flexslider({animation:"slide",animationLoop:false,itemWidth:120,itemMargin:10,slideshow:false})};this.showWidgetPopup=function(b){var c=b.data("id");if(b.hasClass("widget__open")){return}var a=b.find("#widget-submenu").clone();this.widgetPopup.find(".ecosystem-popup__body").append(a);this.widgetPopup.css("display","block");this.widgetPopup.position(this.getPositionSettings(b));this.window_$.on("resize.popupRepositon",null,{widget:b},$.proxy(this.popupReposition,this));this.widgetPopup.css("opacity",1);$(document).on("mouseup.closerWidget__"+c,null,{popup:this.widgetPopup,widget:b},$.proxy(this.hideWidgetPopup,this));b.removeClass("widget__close");b.addClass("widget__open")};this.popupReposition=function(a){this.widgetPopup.position(this.getPositionSettings(a.data.widget))};this.popupPosition=function(f,a){var b=$(this);var d=0;var c=f.top+10;if(a.horizontal==="left"){d=f.left+6}else{d=f.left-42}b.css("top",c);b.css("left",d);b.removeClass("popup_widget_right");b.removeClass("popup_widget_left");b.addClass("popup_widget_"+a.horizontal)};this.getPositionSettings=function(a){return{my:"right center",of:a.find(".widget_toggle-icon-wrapper"),using:this.popupPosition,within:this.conteiner,collision:"flip flip"}};this.hideWidgetPopup=function(a){if(a.data.widget.hasClass("widget__close")){return}if($(a.target).closest(a.data.popup).length){return}if($(a.target).closest(a.data.widget).length){return}var b=a.data.widget.data("id");a.data.popup.css("display","none");a.data.popup.css("opacity",0);a.data.popup.find(".ecosystem-popup__body").empty();$(document).off("mouseup.closerWidget__"+b);this.window_$.off("resize.popupRepositon");a.data.widget.removeClass("widget__open");a.data.widget.addClass("widget__close")};this.widgetClickEvent=function(b){var c=b.data;var a=c.find("#widget-href").attr("href");if(c.hasClass("widget-with_submenu")){this.showWidgetPopup(c)}else{if(a){window.location.href=a}}};this.initWidgetClickEvents=function(){var c=[],b,a=this.allWidgets.length;for(b=0;b<a;b++){c=$(this.allWidgets[b]);c.addClass("widget__close");c.on("click",null,c,$.proxy(this.widgetClickEvent,this))}};this.initPopup=function(){this.widgetPopup.find(".ecosystem-popup__close").on("mouseup",$.proxy(this.closeWidgetAction,this))};this.closeWidgetAction=function(b){var d,a,c;a=this.widgetPopup;d=a.data("widgetid");c=b.data.widget;b.data.popup.css("display","none");b.data.popup.css("opacity",0);b.data.popup.find(".ecosystem-popup__body").empty();$(document).off("mouseup.closerWidget__"+d);this.window_$.off("resize.popupRepositon");b.data.widget.removeClass("widget__open");b.data.widget.addClass("widget__close")};this.init=function(){this.initSlider();this.initPopup();this.initWidgetClickEvents()};$(document).ready($.proxy(this.init,this))};