function JSEcosystem(){this.conteiner=$("#ecosystem-wrapper");this.sliderContainer=this.conteiner.find(".ecosystem-slider");this.allWidgets=this.conteiner.find(".widget");this.widgetPopup=this.conteiner.find(".ecosystem-popup");this.window_$=$(window);this.mobileView=false;this.sliderInited=false;this.popupCloseAction=function(a){var c,b;b=a.data.widget;c=b.data("id");this.widgetPopup.css("opacity",0);this.widgetPopup.css("display","none");b.removeClass("widget__open");b.addClass("widget__close");this.widgetPopup.find(".ecosystem-popup__body").empty();$(document).off("mouseup.autoClosePopup__"+c);$(document).off("mouseup.popupCloseAction__"+c);this.window_$.off("resize.popupReposition")};this.autoClosePopup=function(a){var b=a.data.widget;if(b.hasClass("widget__close")){return}if($(a.target).closest(this.widgetPopup).length){return}if($(a.target).closest(b).length){return}this.popupCloseAction(a)};this.popupReposition=function(a){this.widgetPopup.position(this.getPositionSettings(a.data.widget))};this.popupPosition=function(f,a){var b=$(this);var d=0;var c=f.top+10;if(a.horizontal==="left"){d=f.left+6}else{d=f.left-42}b.css("top",c);b.css("left",d);b.removeClass("popup_widget_right");b.removeClass("popup_widget_left");b.addClass("popup_widget_"+a.horizontal)};this.popupPositionMobile=function(c,a){var b=$(this);b.css("top",0);b.css("left","");b.css("right",0)};this.getPositionSettings=function(a){if(!this.mobileView){this.widgetPopup.removeClass("mobile-view");return{my:"right center",of:a.find(".widget_toggle-icon-wrapper"),using:this.popupPosition,within:this.conteiner,collision:"flip"}}else{if(!this.widgetPopup.hasClass("mobile-view")){this.widgetPopup.addClass("mobile-view")}return{my:"right top",of:this.window_$,using:this.popupPositionMobile,within:this.window_$,collision:"none"}}};this.showWidgetPopup=function(b){var d,a,c;if(b.hasClass("widget__open")){return}a=b.find("#widget-submenu").clone();this.widgetPopup.find(".ecosystem-popup__body").append(a);c=b.find(".widget-title").text();this.widgetPopup.find(".ecosystem-popup__title").text(c);this.widgetPopup.css("display","block");this.widgetPopup.position(this.getPositionSettings(b));this.window_$.on("resize.popupReposition",null,{widget:b},$.proxy(this.popupReposition,this));this.widgetPopup.css("opacity",1);d=b.data("id");$(document).on("mouseup.autoClosePopup__"+d,null,{widget:b},$.proxy(this.autoClosePopup,this));this.widgetPopup.find(".ecosystem-popup__close").on("mouseup.popupCloseAction__"+d,null,{widget:b},$.proxy(this.popupCloseAction,this));b.removeClass("widget__close");b.addClass("widget__open")};this.widgetClickEvent=function(b){var c=b.data;var a=c.find("#widget-href").attr("href");if(c.hasClass("widget-with_submenu")){this.showWidgetPopup(c)}else{if(a){window.location.href=a}}};this.initSlider=function(){if(this.sliderInited){return}this.sliderContainer.flexslider({animation:"slide",animationLoop:false,itemWidth:120,itemMargin:10,slideshow:false,keyboard:false,controlNav:false,directionNav:false,});this.sliderInited=true};this.sliderEvent=function(a){if(this.window_$.width()<639){this.mobileView=true;this.initSlider()}else{this.mobileView=false}};this.initWidgetClickEvents=function(){var c=[],b,a=this.allWidgets.length;for(b=0;b<a;b++){c=$(this.allWidgets[b]);c.addClass("widget__close");c.on("click",null,c,$.proxy(this.widgetClickEvent,this))}};this.initPopup=function(){this.widgetPopup.appendTo("body")};this.init=function(){this.initPopup();this.window_$.on("resize",$.proxy(this.sliderEvent,this));this.sliderEvent();this.initWidgetClickEvents()};$(document).ready($.proxy(this.init,this))};