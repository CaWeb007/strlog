function cuselScrollToCurent(e){var s=null;if(e.find(".cuselOptHover").eq(0).is("span")?s=e.find(".cuselOptHover").eq(0):e.find(".cuselActive").eq(0).is("span")&&(s=e.find(".cuselActive").eq(0)),e.find(".jScrollPaneTrack").eq(0).is("div")&&s){var i=s.position(),t=e.find(".cusel-scroll-pane").eq(0).attr("id");jQuery("#"+t)[0].scrollTo(i.top)}}function cuselShowList(e){var s=e.parent(".cusel");if("none"==e.css("display")){$(".cusel-scroll-wrap").css("display","none"),$(".cuselOpen").removeClass("cuselOpen"),s.addClass("cuselOpen"),e.css("display","block");var i=!1;-1!=s.prop("class").indexOf("cuselScrollArrows")&&(i=!0),e.find(".jScrollPaneContainer").eq(0).is("div")||e.find("div").eq(0).jScrollPaneCusel({showArrows:i}),cuselScrollToCurent(e)}else e.css("display","none"),s.removeClass("cuselOpen")}function cuSelRefresh(e){var s,i=e.refreshEl.split(","),t=i.length;for(s=0;s<t;s++){var r=jQuery(i[s]).parents(".cusel").find(".cusel-scroll-wrap").eq(0);r.find(".cusel-scroll-pane").jScrollPaneRemoveCusel(),r.css({visibility:"hidden",display:"block"});var l=r.find("span"),n=l.eq(0).outerHeight();l.length>e.visRows?r.css({height:n*e.visRows+"px",display:"none",visibility:"visible"}).children(".cusel-scroll-pane").css("height",n*e.visRows+"px"):r.css({display:"none",visibility:"visible"})}}function cuSel(S){function q(){jQuery("html").unbind("click"),jQuery("html").click(function(e){var s=jQuery(e.target),i=(s.attr("id"),s.prop("class"));if(-1==i.indexOf("cuselText")&&-1==i.indexOf("cuselFrameRight")||-1!=s.parent().prop("class").indexOf("classDisCusel"))if(-1!=i.indexOf("cusel")&&-1==i.indexOf("classDisCusel")&&s.is("div")){cuselShowList(s.find(".cusel-scroll-wrap").eq(0))}else if(s.is(".cusel-scroll-wrap span")&&-1==i.indexOf("cuselActive")){var t;t=null==s.attr("val")?s.text():s.attr("val"),s.parents(".cusel-scroll-wrap").find(".cuselActive").eq(0).removeClass("cuselActive").end().parents(".cusel-scroll-wrap").next().val(t).end().prev().text(s.text()).end().css("display","none").parent(".cusel").removeClass("cuselOpen"),s.addClass("cuselActive"),s.parents(".cusel-scroll-wrap").find(".cuselOptHover").removeClass("cuselOptHover"),-1==i.indexOf("cuselActive")&&s.parents(".cusel").find(".cusel-scroll-wrap").eq(0).next("input").change()}else{if(s.parents(".cusel-scroll-wrap").is("div"))return;jQuery(".cusel-scroll-wrap").css("display","none").parent(".cusel").removeClass("cuselOpen")}else cuselShowList(s.parent().find(".cusel-scroll-wrap").eq(0))}),jQuery(".cusel").unbind("keydown"),jQuery(".cusel").keydown(function(e){var s;if(window.event?s=window.event.keyCode:e&&(s=e.which),null==s||0==s||9==s)return!0;if(-1!=jQuery(this).prop("class").indexOf("classDisCusel"))return!1;if(40==s){if((r=jQuery(this).find(".cuselOptHover").eq(0)).is("span"))i=r;else var i=jQuery(this).find(".cuselActive").eq(0);var t=i.next();return t.is("span")&&(jQuery(this).find(".cuselText").eq(0).text(t.text()),i.removeClass("cuselOptHover"),t.addClass("cuselOptHover"),$(this).find("input").eq(0).val(t.attr("val")),cuselScrollToCurent($(this).find(".cusel-scroll-wrap").eq(0))),!1}if(38==s){var r;if((r=$(this).find(".cuselOptHover").eq(0)).is("span"))i=r;else var i=$(this).find(".cuselActive").eq(0);return cuselActivePrev=i.prev(),cuselActivePrev.is("span")&&($(this).find(".cuselText").eq(0).text(cuselActivePrev.text()),i.removeClass("cuselOptHover"),cuselActivePrev.addClass("cuselOptHover"),$(this).find("input").eq(0).val(cuselActivePrev.attr("val")),cuselScrollToCurent($(this).find(".cusel-scroll-wrap").eq(0))),!1}if(27==s){var l=$(this).find(".cuselActive").eq(0).text();$(this).removeClass("cuselOpen").find(".cusel-scroll-wrap").eq(0).css("display","none").end().find(".cuselOptHover").eq(0).removeClass("cuselOptHover"),$(this).find(".cuselText").eq(0).text(l)}if(13==s){var n=$(this).find(".cuselOptHover").eq(0);if(n.is("span"))$(this).find(".cuselActive").removeClass("cuselActive"),n.addClass("cuselActive");else $(this).find(".cuselActive").attr("val");$(this).removeClass("cuselOpen").find(".cusel-scroll-wrap").eq(0).css("display","none").end().find(".cuselOptHover").eq(0).removeClass("cuselOptHover"),$(this).find("input").eq(0).change()}32==s&&$.browser.opera&&cuselShowList($(this).find(".cusel-scroll-wrap").eq(0));return!$.browser.opera&&void 0});var o=[];jQuery(".cusel").keypress(function(e){var s;if(window.event?s=window.event.keyCode:e&&(s=e.which),null==s||0==s||9==s)return!0;if(-1!=jQuery(this).prop("class").indexOf("classDisCusel"))return!1;var a=this;o.push(e),clearTimeout(jQuery.data(this,"timer"));var i=setTimeout(function(){!function(){var e=[];for(var s in o)window.event?e[s]=o[s].keyCode:o[s]&&(e[s]=o[s].which),e[s]=String.fromCharCode(e[s]).toUpperCase();var i,t=jQuery(a).find("span"),r=t.length;for(i=0;i<r;i++){var l=!0;for(var n in o)t.eq(i).text().charAt(n).toUpperCase()!=e[n]&&(l=!1);if(l){jQuery(a).find(".cuselOptHover").removeClass("cuselOptHover").end().find("span").eq(i).addClass("cuselOptHover").end().end().find(".cuselText").eq(0).text(t.eq(i).text()),cuselScrollToCurent($(a).find(".cusel-scroll-wrap").eq(0)),o=o.splice,o=[];break}}o=o.splice,o=[]}()},500);return jQuery(this).data("timer",i),(!jQuery.browser.opera||9==window.event.keyCode)&&void 0})}jQuery(S.changedEl).each(function(e){var s=jQuery(this),t=s.outerWidth(),r=s.prop("class"),l=s.prop("id")?s.prop("id"):"cuSel-"+e,n=s.prop("name"),a=s.val(),o=s.find("option[value='"+a+"']").eq(0),c=o.text(),u=s.prop("disabled"),d=S.scrollArrows,p=s.prop("onchange"),h=s.prop("tabindex"),v=s.prop("multiple");if(!l||v)return!1;var f=s.data("events"),w=[];f&&f.change&&$.each(f.change,function(e,s){w[w.length]=s}),u?(classDisCuselText="classDisCuselLabel",classDisCusel="classDisCusel"):(classDisCuselText="",classDisCusel=""),d&&(classDisCusel+=" cuselScrollArrows"),o.addClass("cuselActive");var m=s.html().replace(/option/gi,"span").replace(/value=/gi,"val=");if($.browser.msie&&parseInt($.browser.version)<9){m=m.replace(/(val=)(.*?)(>)/g,"$1'$2'$3")}var g='<div class="cusel '+r+" "+classDisCusel+'" id=cuselFrame-'+l+' style="width:'+t+'px" tabindex="'+h+'"><div class="cuselFrameRight"></div><div class="cuselText">'+c+'</div><div class="cusel-scroll-wrap"><div class="cusel-scroll-pane" id="cusel-scroll-'+l+'">'+m+'</div></div><input type="hidden" id="'+l+'" name="'+n+'" value="'+a+'" /></div>';s.replaceWith(g),p&&jQuery("#"+l).bind("change",p),w.length&&$.each(w,function(e,s){$("#"+l).bind("change",s)});var b,x=jQuery("#cuselFrame-"+l),y=x.find("span");y.eq(0).text()?b=y.eq(0).innerHeight():(b=y.eq(1).innerHeight(),y.eq(0).css("height",y.eq(1).height())),y.length>S.visRows?x.find(".cusel-scroll-wrap").eq(0).css({height:b*S.visRows+"px",display:"none",visibility:"visible"}).children(".cusel-scroll-pane").css("height",b*S.visRows+"px"):x.find(".cusel-scroll-wrap").eq(0).css({display:"none",visibility:"visible"});var C=jQuery("#cusel-scroll-"+l).find("span[addTags]"),j=C.length;for(i=0;i<j;i++)C.eq(i).append(C.eq(i).attr("addTags")).removeAttr("addTags");q()}),jQuery(".cusel").focus(function(){jQuery(this).addClass("cuselFocus")}),jQuery(".cusel").blur(function(){jQuery(this).removeClass("cuselFocus")}),jQuery(".cusel").hover(function(){jQuery(this).addClass("cuselFocus")},function(){jQuery(this).removeClass("cuselFocus")})}!function(_){_.jScrollPaneCusel={active:[]},_.fn.jScrollPaneCusel=function(V){V=_.extend({},_.fn.jScrollPaneCusel.defaults,V);var Z=function(){return!1};return this.each(function(){var l=_(this),e=this.parentNode.offsetWidth;l.css("overflow","hidden");var s=this;if(_(this).parent().is(".jScrollPaneContainer")){var i=V.maintainPosition?l.position().top:0,t=_(this).parent(),r=e,n=a=t.outerHeight();_(">.jScrollPaneTrack, >.jScrollArrowUp, >.jScrollArrowDown",t).remove(),l.css({top:0})}else{i=0;this.originalPadding=l.css("paddingTop")+" "+l.css("paddingRight")+" "+l.css("paddingBottom")+" "+l.css("paddingLeft"),this.originalSidePaddingTotal=(parseInt(l.css("paddingLeft"))||0)+(parseInt(l.css("paddingRight"))||0);var a;r=e,n=a=l.innerHeight();if(l.wrap("<div class='jScrollPaneContainer'></div>").parent().css({height:a+"px",width:r+"px"}),!window.navigator.userProfile)r-=parseInt(_(this).parent().css("border-left-width"))+parseInt(_(this).parent().css("border-right-width")),_(this).css("width",r+"px").parent().css("width",r+"px");_(document).bind("emchange",function(e,s,i){l.jScrollPaneCusel(V)})}if(V.reinitialiseOnImageLoad){var o=_.data(s,"jScrollPaneImagesToLoad")||_("img",l),c=[];o.length&&o.each(function(e,i){_(this).bind("load",function(){-1==_.inArray(e,c)&&(c.push(i),o=_.grep(o,function(e,s){return e!=i}),_.data(s,"jScrollPaneImagesToLoad",o),V.reinitialiseOnImageLoad=!1,l.jScrollPaneCusel(V))}).each(function(e,s){(this.complete||void 0===this.complete)&&(this.src=this.src)})})}var u=this.originalSidePaddingTotal,d={height:"auto",width:r-V.scrollbarWidth-V.scrollbarMargin-u+"px"};V.scrollbarOnLeft?d.paddingLeft=V.scrollbarMargin+V.scrollbarWidth+"px":d.paddingRight=V.scrollbarMargin+"px",l.css(d);var p=l.outerHeight(),h=a/p;if(h<.99){var v=l.parent();v.append(_('<div class="jScrollPaneTrack"></div>').css({width:V.scrollbarWidth+"px"}).append(_('<div class="jScrollPaneDrag"></div>').css({width:V.scrollbarWidth+"px"}).append(_('<div class="jScrollPaneDragTop"></div>').css({width:V.scrollbarWidth+"px"}),_('<div class="jScrollPaneDragBottom"></div>').css({width:V.scrollbarWidth+"px"}))));var f=_(">.jScrollPaneTrack",v),w=_(">.jScrollPaneTrack .jScrollPaneDrag",v);if(V.showArrows){var m,g,b,x,y=function(){(4<x||x%4==0)&&z(k+g*P),x++},C=function(e){_("html").unbind("mouseup",C),m.removeClass("jScrollActiveArrowButton"),clearInterval(b)},j=function(){_("html").bind("mouseup",C),m.addClass("jScrollActiveArrowButton"),x=0,y(),b=setInterval(y,100)};v.append(_("<div></div>").attr({class:"jScrollArrowUp"}).css({width:V.scrollbarWidth+"px"}).bind("mousedown",function(){return m=_(this),g=-1,j(),this.blur(),!1}).bind("click",Z),_("<div></div>").attr({class:"jScrollArrowDown"}).css({width:V.scrollbarWidth+"px"}).bind("mousedown",function(){return m=_(this),g=1,j(),this.blur(),!1}).bind("click",Z));var S=_(">.jScrollArrowUp",v),q=_(">.jScrollArrowDown",v);if(V.arrowSize)n=a-V.arrowSize-V.arrowSize,f.css({height:n+"px",top:V.arrowSize+"px"});else{var O=S.height();V.arrowSize=O,n=a-O-q.height(),f.css({height:n+"px",top:O+"px"})}}var A,$,P,T,Q,H,D=_(this).css({position:"absolute",overflow:"visible"}),k=0,I=h*a/2,L=function(e,s){var i="X"==s?"Left":"Top";return e["page"+s]||e["client"+s]+(document.documentElement["scroll"+i]||document.body["scroll"+i])||0},M=function(){return!1},R=function(){J(),(A=w.offset(!1)).top-=k,$=n-w[0].offsetHeight,P=2*V.wheelSpeed*$/p},W=function(){_("html").unbind("mouseup",W).unbind("mousemove",F),I=h*a/2,_.browser.msie&&_("html").unbind("dragstart",M).unbind("selectstart",M)},z=function(e){k=e=e<0?0:$<e?$:e,w.css({top:e+"px"});var s=e/$;D.css({top:(a-p)*s+"px"}),l.trigger("scroll"),V.showArrows&&(S[0==e?"addClass":"removeClass"]("disabled"),q[e==$?"addClass":"removeClass"]("disabled"))},F=function(e){z(L(e,"Y")-A.top-I)},E=Math.max(Math.min(h*(a-2*V.arrowSize),V.dragMaxHeight),V.dragMinHeight);w.css({height:E+"px"}).bind("mousedown",function(e){return R(),I=L(e,"Y")-k-A.top,_("html").bind("mouseup",W).bind("mousemove",F),_.browser.msie&&_("html").bind("dragstart",M).bind("selectstart",M),!1});var Y,B,U=function(){(8<Q||Q%4==0)&&z(k-(k-H)/2),Q++},X=function(){clearInterval(T),_("html").unbind("mouseup",X).unbind("mousemove",N)},N=function(e){H=L(e,"Y")-A.top-I};function G(){var e=(Y-k)/V.animateStep;1<e||e<-1?z(k+e):(z(Y),J())}f.bind("mousedown",function(e){R(),N(e),Q=0,_("html").bind("mouseup",X).bind("mousemove",N),T=setInterval(U,100),U()}),v.bind("mousewheel",function(e,s){R(),J();z(k-s*P);return!1});var J=function(){B&&(clearInterval(B),delete Y)},K=function(e,s){if("string"==typeof e){if($e=_(e,l),!$e.length)return;e=$e.offset().top-l.offset().top}v.scrollTop(0),J();var i=-e/(a-p)*$;s||!V.animateTo?z(i):(Y=i,B=setInterval(G,V.animateInterval))};l[0].scrollTo=K,l[0].scrollBy=function(e){var s=-parseInt(D.css("top"))||0;K(s+e)},R(),K(-i,!0),_("*",this).bind("focus",function(e){for(var s=_(this),i=0;s[0]!=l[0];)i+=s.position().top,s=s.offsetParent();var t=-parseInt(D.css("top"))||0;if(!(t<i&&i<t+a)){var r=i-V.scrollbarMargin;t<i&&(r+=_(this).height()+15+V.scrollbarMargin-a),K(r)}}),location.hash&&K(location.hash),_(document).bind("click",function(e){if($target=_(e.target),$target.is("a")){var s=$target.attr("href");"#"==s.substr(0,1)&&K(s)}}),_.jScrollPaneCusel.active.push(l[0])}else l.css({height:a+"px",width:r-this.originalSidePaddingTotal+"px",padding:this.originalPadding}),l.parent().unbind("mousewheel")})},_.fn.jScrollPaneRemoveCusel=function(){_(this).each(function(){$this=_(this);var e=$this.parent();e.is(".jScrollPaneContainer")&&($this.css({top:"",height:"",width:"",padding:"",overflow:"",position:""}),$this.attr("style",$this.data("originalStyleTag")),e.after($this).remove())})},_.fn.jScrollPaneCusel.defaults={scrollbarWidth:10,scrollbarMargin:5,wheelSpeed:18,showArrows:!1,arrowSize:0,animateTo:!1,dragMinHeight:1,dragMaxHeight:99999,animateInterval:100,animateStep:3,maintainPosition:!0,scrollbarOnLeft:!1,reinitialiseOnImageLoad:!1},_(window).bind("unload",function(){for(var e=_.jScrollPaneCusel.active,s=0;s<e.length;s++)e[s].scrollTo=e[s].scrollBy=null})}(jQuery),function(t){t.event.special.mousewheel={setup:function(){var e=t.event.special.mousewheel.handler;t.browser.mozilla&&t(this).bind("mousemove.mousewheel",function(e){t.data(this,"mwcursorposdata",{pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY})}),this.addEventListener?this.addEventListener(t.browser.mozilla?"DOMMouseScroll":"mousewheel",e,!1):this.onmousewheel=e},teardown:function(){var e=t.event.special.mousewheel.handler;t(this).unbind("mousemove.mousewheel"),this.removeEventListener?this.removeEventListener(t.browser.mozilla?"DOMMouseScroll":"mousewheel",e,!1):this.onmousewheel=function(){},t.removeData(this,"mwcursorposdata")},handler:function(e){var s=Array.prototype.slice.call(arguments,1);e=t.event.fix(e||window.event),t.extend(e,t.data(this,"mwcursorposdata")||{});var i=0;return e.wheelDelta&&(i=e.wheelDelta/120),e.detail&&(i=-e.detail/3),e.data=e.data||{},e.type="mousewheel",s.unshift(i),s.unshift(e),t.event.handle.apply(this,s)}},t.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery);