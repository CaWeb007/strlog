function forumActionComment(j,i){if(!BX.util.in_array(i,["DEL","MODERATE"])){return false}if(i=="DEL"&&(!confirm(oText.cdm))){return false}var h=j.getAttribute("href");h=h.replace(/.AJAX_CALL=Y/g,"").replace(/.sessid=[^&]*/g,"");h+=((h.indexOf("?")>-1)?"&":"?")+"AJAX_CALL=Y&sessid="+BX.bitrix_sessid();if(linkParent=BX.findParent(j,{className:"forum-action-links"})){BX.hide(linkParent)}var k=BX.create("a",{attrs:{className:"forum-action-note"}});k.innerHTML=oText.wait;linkParent.parentNode.appendChild(k);var l=function(a){BX.remove(k);BX.show(a)};function g(b,a){if(!BX.type.isDomNode(b)||!BX.type.isDomNode(a)){return false}while(b.childNodes.length>0){a.appendChild(b.childNodes[0])}return true}BX.ajax.loadJSON(h,function(e){if(e.status==true){var a=BX.findParent(j,{tag:"table"});if(a){var c=BX.findChild(a,{className:"forum-action-links"},true);if(i=="DEL"){var p=BX.findChild(a,{tagName:"tfoot"});if(!!p){lastMessage=a.previousSibling;while(!!lastMessage&&lastMessage.nodeType!=1){lastMessage=lastMessage.previousSibling}}var o=BX.create("div",{style:{overflow:"hidden"}});a.parentNode.insertBefore(o,a);o.appendChild(a);if(!!p&&!!lastMessage){lastMessage.appendChild(p)}BX.fx.hide(o,"scroll",{time:0.35,callback_complete:function(){BX.remove(o);var m=BX.findChild(document,{"class":"forum-post-table"},true,true);if(!m||m.length<1){window.location=BX.message("topic_read_url")}l(c)}})}else{var b=BX.hasClass(a,"forum-post-hidden");var f=(b?oText.hide:oText.show);var d=BX.findChild(a,{className:"forum-cell-post"},true);var o=BX.create("div");g(d,o);d.appendChild(o);BX.fx.hide(o,"fade",{time:0.1,callback_complete:function(){BX.toggleClass(a,"forum-post-hidden");j.innerHTML=f;h=h.replace(new RegExp("ACTION="+(b?"SHOW":"HIDE")),("ACTION="+(b?"HIDE":"SHOW")));j.setAttribute("href",h);BX.fx.show(o,"fade",{time:0.1,callback_complete:function(){g(o,d);d.removeChild(o)}});l(c)}})}}}else{BX.addClass(k,"error");k.innerHTML='<font class="errortext">'+e.message+"</font>"}});return false}var __forum_messages_selected=false;function SelectPosts(d){__forum_messages_selected=!__forum_messages_selected;form=document.forms["MESSAGES_"+d];if(typeof(form)!="object"||form==null){return false}var e=form.getElementsByTagName("input");if(e&&typeof e=="object"){if(!e.length||(typeof(e.length)=="undefined")){e=[e]}for(ii=0;ii<e.length;ii++){if(!(e[ii].type=="checkbox"&&e[ii].name=="message_id[]")){continue}e[ii].checked=__forum_messages_selected;var f=e[ii].parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;if(e[ii].checked){f.className+=" forum-post-selected"}else{f.className=f.className.replace(/\s*forum-post-selected/gi,"")}}}}function Validate(h){if(typeof(h)!="object"||h==null){return false}var g=[];if(h.type.value=="messages"){var e=h.getElementsByTagName("input");if(e&&typeof e=="object"){if(!e.length||(typeof(e.length)=="undefined")){e=[e]}var f=true;for(ii=0;ii<e.length;ii++){if(!(e[ii].type=="checkbox"&&e[ii].name=="message_id[]")){continue}if(e[ii].checked){f=false;break}}if(f){g.push(oText.no_data)}}}if(h.ACTION.value==""){g.push(oText.no_action)}if(g.length>0){alert(g.join("\n"));return false}if(h.ACTION.value=="DEL_TOPIC"){return confirm(oText.cdt)}else{if(h.ACTION.value=="DEL"){return confirm(oText.cdms)}}return true}function fReplyForm(){var b=(window.BXHtmlEditor?window.BXHtmlEditor.Get("POST_MESSAGE"):false);if(b){setTimeout(function(){b.Focus()},100)}}BX(function(){if(BX.browser.IsIE()){var f=BX.findChildren(document,{className:"forum-post-table"},true);if(!f){return}for(e in f){var d=f[e].getElementsByTagName("*"),e=d.length;while(e--){if(d[e].scrollWidth>d[e].offsetWidth){d[e].style.paddingBottom="20px";d[e].style.overflowY="hidden"}}}}});