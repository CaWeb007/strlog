function forumActionComment(e,f){if(!BX.util.in_array(f,["DEL","MODERATE"])){return false}if(f=="DEL"&&(!confirm(oText.cdm))){return false}var a=e.getAttribute("href");a=a.replace(/.AJAX_CALL=Y/g,"").replace(/.sessid=[^&]*/g,"");a+=((a.indexOf("?")>-1)?"&":"?")+"AJAX_CALL=Y&sessid="+BX.bitrix_sessid();if(linkParent=BX.findParent(e,{className:"forum-action-links"})){BX.hide(linkParent)}var d=BX.create("a",{attrs:{className:"forum-action-note"}});d.innerHTML=oText.wait;linkParent.parentNode.appendChild(d);var c=function(g){BX.remove(d);BX.show(g)};function b(g,h){if(!BX.type.isDomNode(g)||!BX.type.isDomNode(h)){return false}while(g.childNodes.length>0){h.appendChild(g.childNodes[0])}return true}BX.ajax.loadJSON(a,function(i){if(i.status==true){var m=BX.findParent(e,{tag:"table"});if(m){var k=BX.findChild(m,{className:"forum-action-links"},true);if(f=="DEL"){var n=BX.findChild(m,{tagName:"tfoot"});if(!!n){lastMessage=m.previousSibling;while(!!lastMessage&&lastMessage.nodeType!=1){lastMessage=lastMessage.previousSibling}}var g=BX.create("div",{style:{overflow:"hidden"}});m.parentNode.insertBefore(g,m);g.appendChild(m);if(!!n&&!!lastMessage){lastMessage.appendChild(n)}BX.fx.hide(g,"scroll",{time:0.35,callback_complete:function(){BX.remove(g);var o=BX.findChild(document,{"class":"forum-post-table"},true,true);if(!o||o.length<1){window.location=BX.message("topic_read_url")}c(k)}})}else{var l=BX.hasClass(m,"forum-post-hidden");var h=(l?oText.hide:oText.show);var j=BX.findChild(m,{className:"forum-cell-post"},true);var g=BX.create("div");b(j,g);j.appendChild(g);BX.fx.hide(g,"fade",{time:0.1,callback_complete:function(){BX.toggleClass(m,"forum-post-hidden");e.innerHTML=h;a=a.replace(new RegExp("ACTION="+(l?"SHOW":"HIDE")),("ACTION="+(l?"HIDE":"SHOW")));e.setAttribute("href",a);BX.fx.show(g,"fade",{time:0.1,callback_complete:function(){b(g,j);j.removeChild(g)}});c(k)}})}}}else{BX.addClass(d,"error");d.innerHTML='<font class="errortext">'+i.message+"</font>"}});return false}var __forum_messages_selected=false;function SelectPosts(b){__forum_messages_selected=!__forum_messages_selected;form=document.forms["MESSAGES_"+b];if(typeof(form)!="object"||form==null){return false}var a=form.getElementsByTagName("input");if(a&&typeof a=="object"){if(!a.length||(typeof(a.length)=="undefined")){a=[a]}for(ii=0;ii<a.length;ii++){if(!(a[ii].type=="checkbox"&&a[ii].name=="message_id[]")){continue}a[ii].checked=__forum_messages_selected;var c=a[ii].parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;if(a[ii].checked){c.className+=" forum-post-selected"}else{c.className=c.className.replace(/\s*forum-post-selected/gi,"")}}}}function Validate(c){if(typeof(c)!="object"||c==null){return false}var d=[];if(c.type.value=="messages"){var b=c.getElementsByTagName("input");if(b&&typeof b=="object"){if(!b.length||(typeof(b.length)=="undefined")){b=[b]}var a=true;for(ii=0;ii<b.length;ii++){if(!(b[ii].type=="checkbox"&&b[ii].name=="message_id[]")){continue}if(b[ii].checked){a=false;break}}if(a){d.push(oText.no_data)}}}if(c.ACTION.value==""){d.push(oText.no_action)}if(d.length>0){alert(d.join("\n"));return false}if(c.ACTION.value=="DEL_TOPIC"){return confirm(oText.cdt)}else{if(c.ACTION.value=="DEL"){return confirm(oText.cdms)}}return true}function fReplyForm(){var a=(window.BXHtmlEditor?window.BXHtmlEditor.Get("POST_MESSAGE"):false);if(a){setTimeout(function(){a.Focus()},100)}}BX(function(){if(BX.browser.IsIE()){var c=BX.findChildren(document,{className:"forum-post-table"},true);if(!c){return}for(a in c){var b=c[a].getElementsByTagName("*"),a=b.length;while(a--){if(b[a].scrollWidth>b[a].offsetWidth){b[a].style.paddingBottom="20px";b[a].style.overflowY="hidden"}}}}});