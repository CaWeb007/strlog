(function(a){if(!a.JCCatalogSectionOnlyElement){a.JCCatalogSectionOnlyElement=function(b){if(typeof b==="object"){this.params=b;this.obProduct=null;this.set_quantity=1;this.currentPriceMode="";this.currentPrices=[];this.currentPriceSelected=0;this.currentQuantityRanges=[];this.currentQuantityRangeSelected=0;if(this.params.MESS){this.mess=this.params.MESS}this.init()}};a.JCCatalogSectionOnlyElement.prototype={init:function(){var c=0,b=0,d=null;this.obProduct=BX(this.params.ID);if(!!this.obProduct){$(this.obProduct).find(".counter_wrapp .counter_block input").data("product","ob"+this.obProduct.id+"el");this.currentPriceMode=this.params.ITEM_PRICE_MODE;this.currentPrices=this.params.ITEM_PRICES;this.currentQuantityRanges=this.params.ITEM_QUANTITY_RANGES}},setPriceAction:function(){this.set_quantity=this.params.MIN_QUANTITY_BUY;if($(this.obProduct).find("input[name=quantity]").length){this.set_quantity=$(this.obProduct).find("input[name=quantity]").val()}this.checkPriceRange(this.set_quantity);$(this.obProduct).find(".not_matrix").hide();$(this.obProduct).find(".with_matrix .price_value_block").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].PRICE,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_PRICE));if($(this.obProduct).find(".with_matrix .discount")){$(this.obProduct).find(".with_matrix .discount").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].BASE_PRICE,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_BASE_PRICE))}$(this.obProduct).find(".with_matrix .sale_block .text .values_wrapper").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].DISCOUNT,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_DISCOUNT));$(this.obProduct).find(".with_matrix .sale_block .value span").html(this.currentPrices[this.currentPriceSelected].PERCENT);$(this.obProduct).find(".with_matrix").show();if(arOptimusOptions.THEME["SHOW_TOTAL_SUMM"]=="Y"){setPriceItem($(this.obProduct),this.set_quantity,this.currentPrices[this.currentPriceSelected].PRICE)}},checkPriceRange:function(f){if(typeof f==="undefined"||this.currentPriceMode!="Q"){return}var c,e=false;for(var d in this.currentQuantityRanges){if(this.currentQuantityRanges.hasOwnProperty(d)){c=this.currentQuantityRanges[d];if(parseInt(f)>=parseInt(c.SORT_FROM)&&(c.SORT_TO=="INF"||parseInt(f)<=parseInt(c.SORT_TO))){e=true;this.currentQuantityRangeSelected=c.HASH;break}}}if(!e&&(c=this.getMinPriceRange())){this.currentQuantityRangeSelected=c.HASH}for(var b in this.currentPrices){if(this.currentPrices.hasOwnProperty(b)){if(this.currentPrices[b].QUANTITY_HASH==this.currentQuantityRangeSelected){this.currentPriceSelected=b;break}}}},getMinPriceRange:function(){var b;for(var c in this.currentQuantityRanges){if(this.currentQuantityRanges.hasOwnProperty(c)){if(!b||parseInt(this.currentQuantityRanges[c].SORT_FROM)<parseInt(b.SORT_FROM)){b=this.currentQuantityRanges[c]}}}return b}}}})(window);