this.BX=this.BX||{};(function(b,f,a,c){(function(n){if(!n.BX){n.BX={}}if(!n.BX.Main){n.BX.Main={}}else{if(n.BX.Main.Date){return}}var u=n.BX;u.Main.Date={AM_PM_MODE:{UPPER:1,LOWER:2,NONE:false},format:function w(T,bb,bo,bt){var R=this;var K=k.isDate(bb)?new Date(bb.getTime()):k.isNumber(bb)?new Date(bb*1000):new Date();var be=k.isDate(bo)?new Date(bo.getTime()):k.isNumber(bo)?new Date(bo*1000):new Date();var aT=!!bt;if(k.isArray(T)){return bp(T,K,be,aT)}else{if(!k.isNotEmptyString(T)){return""}}var bv=(T.match(/{{([^{}]*)}}/g)||[]).map(function(B){return(B.match(/[^{}]+/)||[""])[0]});if(bv.length>0){bv.forEach(function(D,B){T=T.replace("{{"+D+"}}","{{"+B+"}}")})}var C=/\\?(sago|iago|isago|Hago|dago|mago|Yago|sdiff|idiff|Hdiff|ddiff|mdiff|Ydiff|sshort|ishort|Hshort|dshort|mhort|Yshort|yesterday|today|tommorow|tomorrow|[a-z])/gi;var bs={d:function aD(){return k.strPadLeft(bq(K).toString(),2,"0")},D:function a6(){return R._getMessage("DOW_"+aP(K))},j:function av(){return bq(K)},l:function at(){return R._getMessage("DAY_OF_WEEK_"+aP(K))},N:function aY(){return aP(K)||7},S:function aU(){if(bq(K)%10==1&&bq(K)!=11){return"st"}else{if(bq(K)%10==2&&bq(K)!=12){return"nd"}else{if(bq(K)%10==3&&bq(K)!=13){return"rd"}else{return"th"}}}},w:function ag(){return aP(K)},z:function ad(){var B=new Date(aQ(K),0,1);var D=new Date(aQ(K),bh(K),bq(K));return Math.ceil((D-B)/(24*3600*1000))},W:function aO(){var D=new Date(K.getTime());var G=(aP(K)+6)%7;bi(D,bq(D)-G+3);var F=D.getTime();ab(D,0,1);if(aP(D)!=4){ab(D,0,1+(4-aP(D)+7)%7)}var B=1+Math.ceil((F-D)/(7*24*3600*1000));return k.strPadLeft(B.toString(),2,"0")},F:function a4(){return R._getMessage("MONTH_"+(bh(K)+1)+"_S")},f:function aB(){return R._getMessage("MONTH_"+(bh(K)+1))},m:function ar(){return k.strPadLeft((bh(K)+1).toString(),2,"0")},M:function aZ(){return R._getMessage("MON_"+(bh(K)+1))},n:function aq(){return bh(K)+1},t:function ak(){var B=aT?new Date(Date.UTC(aQ(K),bh(K)+1,0)):new Date(aQ(K),bh(K)+1,0);return bq(B)},L:function a0(){var B=aQ(K);return B%4==0&&B%100!=0||B%400==0?1:0},o:function ap(){var B=new Date(K.getTime());bi(B,bq(B)-(aP(K)+6)%7+3);return aQ(B)},Y:function aK(){return aQ(K)},y:function ae(){return aQ(K).toString().slice(2)},a:function aG(){return bg(K)>11?"pm":"am"},A:function ba(){return bg(K)>11?"PM":"AM"},B:function a8(){var B=(K.getUTCHours()+1)%24+K.getUTCMinutes()/60+K.getUTCSeconds()/3600;return k.strPadLeft(Math.floor(B*1000/24).toString(),3,"0")},g:function aA(){return bg(K)%12||12},G:function a3(){return bg(K)},h:function ax(){return k.strPadLeft((bg(K)%12||12).toString(),2,"0")},H:function a2(){return k.strPadLeft(bg(K).toString(),2,"0")},i:function aw(){return k.strPadLeft(ac(K).toString(),2,"0")},s:function al(){return k.strPadLeft(bm(K).toString(),2,"0")},u:function aj(){return k.strPadLeft((aN(K)*1000).toString(),6,"0")},e:function aC(){if(aT){return"UTC"}return""},I:function a1(){if(aT){return 0}var D=new Date(aQ(K),0,1);var G=Date.UTC(aQ(K),0,1);var F=new Date(aQ(K),6,0);var B=Date.UTC(aQ(K),6,0);return 0+(D-G!==F-B)},O:function aX(){if(aT){return"+0000"}var D=K.getTimezoneOffset();var B=Math.abs(D);return(D>0?"-":"+")+k.strPadLeft((Math.floor(B/60)*100+B%60).toString(),4,"0")},P:function aW(){if(aT){return"+00:00"}var B=this.O();return B.substr(0,3)+":"+B.substr(3)},Z:function aJ(){if(aT){return 0}return -K.getTimezoneOffset()*60},c:function aF(){return"Y-m-d\\TH:i:sP".replace(C,ah)},r:function an(){return"D, d M Y H:i:s O".replace(C,ah)},U:function aR(){return Math.floor(K.getTime()/1000)},sago:function bd(){return a5(bc((be-K)/1000),{"0":"FD_SECOND_AGO_0","1":"FD_SECOND_AGO_1","10_20":"FD_SECOND_AGO_10_20",MOD_1:"FD_SECOND_AGO_MOD_1",MOD_2_4:"FD_SECOND_AGO_MOD_2_4",MOD_OTHER:"FD_SECOND_AGO_MOD_OTHER"})},sdiff:function aS(){return a5(bc((be-K)/1000),{"0":"FD_SECOND_DIFF_0","1":"FD_SECOND_DIFF_1","10_20":"FD_SECOND_DIFF_10_20",MOD_1:"FD_SECOND_DIFF_MOD_1",MOD_2_4:"FD_SECOND_DIFF_MOD_2_4",MOD_OTHER:"FD_SECOND_DIFF_MOD_OTHER"})},sshort:function am(){return R._getMessage("FD_SECOND_SHORT").replace(/#VALUE#/g,bc((be-K)/1000))},iago:function ao(){return a5(bc((be-K)/60/1000),{"0":"FD_MINUTE_AGO_0","1":"FD_MINUTE_AGO_1","10_20":"FD_MINUTE_AGO_10_20",MOD_1:"FD_MINUTE_AGO_MOD_1",MOD_2_4:"FD_MINUTE_AGO_MOD_2_4",MOD_OTHER:"FD_MINUTE_AGO_MOD_OTHER"})},idiff:function au(){return a5(bc((be-K)/60/1000),{"0":"FD_MINUTE_DIFF_0","1":"FD_MINUTE_DIFF_1","10_20":"FD_MINUTE_DIFF_10_20",MOD_1:"FD_MINUTE_DIFF_MOD_1",MOD_2_4:"FD_MINUTE_DIFF_MOD_2_4",MOD_OTHER:"FD_MINUTE_DIFF_MOD_OTHER"})},isago:function bn(){var D=bc((be-K)/60/1000);var B=a5(D,{"0":"FD_MINUTE_0","1":"FD_MINUTE_1","10_20":"FD_MINUTE_10_20",MOD_1:"FD_MINUTE_MOD_1",MOD_2_4:"FD_MINUTE_MOD_2_4",MOD_OTHER:"FD_MINUTE_MOD_OTHER"});B+=" ";var F=bc((be-K)/1000)-D*60;B+=a5(F,{"0":"FD_SECOND_AGO_0","1":"FD_SECOND_AGO_1","10_20":"FD_SECOND_AGO_10_20",MOD_1:"FD_SECOND_AGO_MOD_1",MOD_2_4:"FD_SECOND_AGO_MOD_2_4",MOD_OTHER:"FD_SECOND_AGO_MOD_OTHER"});return B},ishort:function bl(){return R._getMessage("FD_MINUTE_SHORT").replace(/#VALUE#/g,bc((be-K)/60/1000))},Hago:function aM(){return a5(bc((be-K)/60/60/1000),{"0":"FD_HOUR_AGO_0","1":"FD_HOUR_AGO_1","10_20":"FD_HOUR_AGO_10_20",MOD_1:"FD_HOUR_AGO_MOD_1",MOD_2_4:"FD_HOUR_AGO_MOD_2_4",MOD_OTHER:"FD_HOUR_AGO_MOD_OTHER"})},Hdiff:function a9(){return a5(bc((be-K)/60/60/1000),{"0":"FD_HOUR_DIFF_0","1":"FD_HOUR_DIFF_1","10_20":"FD_HOUR_DIFF_10_20",MOD_1:"FD_HOUR_DIFF_MOD_1",MOD_2_4:"FD_HOUR_DIFF_MOD_2_4",MOD_OTHER:"FD_HOUR_DIFF_MOD_OTHER"})},Hshort:function a7(){return R._getMessage("FD_HOUR_SHORT").replace(/#VALUE#/g,bc((be-K)/60/60/1000))},yesterday:function bk(){return R._getMessage("FD_YESTERDAY")},today:function aI(){return R._getMessage("FD_TODAY")},tommorow:function aE(){return R._getMessage("FD_TOMORROW")},tomorrow:function J(){return R._getMessage("FD_TOMORROW")},dago:function V(){return a5(bc((be-K)/60/60/24/1000),{"0":"FD_DAY_AGO_0","1":"FD_DAY_AGO_1","10_20":"FD_DAY_AGO_10_20",MOD_1:"FD_DAY_AGO_MOD_1",MOD_2_4:"FD_DAY_AGO_MOD_2_4",MOD_OTHER:"FD_DAY_AGO_MOD_OTHER"})},ddiff:function ai(){return a5(bc((be-K)/60/60/24/1000),{"0":"FD_DAY_DIFF_0","1":"FD_DAY_DIFF_1","10_20":"FD_DAY_DIFF_10_20",MOD_1:"FD_DAY_DIFF_MOD_1",MOD_2_4:"FD_DAY_DIFF_MOD_2_4",MOD_OTHER:"FD_DAY_DIFF_MOD_OTHER"})},dshort:function E(){return R._getMessage("FD_DAY_SHORT").replace(/#VALUE#/g,bc((be-K)/60/60/24/1000))},mago:function aH(){return a5(bc((be-K)/60/60/24/31/1000),{"0":"FD_MONTH_AGO_0","1":"FD_MONTH_AGO_1","10_20":"FD_MONTH_AGO_10_20",MOD_1:"FD_MONTH_AGO_MOD_1",MOD_2_4:"FD_MONTH_AGO_MOD_2_4",MOD_OTHER:"FD_MONTH_AGO_MOD_OTHER"})},mdiff:function bf(){return a5(bc((be-K)/60/60/24/31/1000),{"0":"FD_MONTH_DIFF_0","1":"FD_MONTH_DIFF_1","10_20":"FD_MONTH_DIFF_10_20",MOD_1:"FD_MONTH_DIFF_MOD_1",MOD_2_4:"FD_MONTH_DIFF_MOD_2_4",MOD_OTHER:"FD_MONTH_DIFF_MOD_OTHER"})},mshort:function ay(){return R._getMessage("FD_MONTH_SHORT").replace(/#VALUE#/g,bc((be-K)/60/60/24/31/1000))},Yago:function bu(){return a5(bc((be-K)/60/60/24/365/1000),{"0":"FD_YEARS_AGO_0","1":"FD_YEARS_AGO_1","10_20":"FD_YEARS_AGO_10_20",MOD_1:"FD_YEARS_AGO_MOD_1",MOD_2_4:"FD_YEARS_AGO_MOD_2_4",MOD_OTHER:"FD_YEARS_AGO_MOD_OTHER"})},Ydiff:function az(){return a5(bc((be-K)/60/60/24/365/1000),{"0":"FD_YEARS_DIFF_0","1":"FD_YEARS_DIFF_1","10_20":"FD_YEARS_DIFF_10_20",MOD_1:"FD_YEARS_DIFF_MOD_1",MOD_2_4:"FD_YEARS_DIFF_MOD_2_4",MOD_OTHER:"FD_YEARS_DIFF_MOD_OTHER"})},Yshort:function aa(){return a5(bc((be-K)/60/60/24/365/1000),{"0":"FD_YEARS_SHORT_0","1":"FD_YEARS_SHORT_1","10_20":"FD_YEARS_SHORT_10_20",MOD_1:"FD_YEARS_SHORT_MOD_1",MOD_2_4:"FD_YEARS_SHORT_MOD_2_4",MOD_OTHER:"FD_YEARS_SHORT_MOD_OTHER"})},x:function af(){var B=R.isAmPmMode(true);var D=B===R.AM_PM_MODE.LOWER?"g:i a":B===R.AM_PM_MODE.UPPER?"g:i A":"H:i";return R.format([["tomorrow","tomorrow, "+D],["-",R.convertBitrixFormat(R._getMessage("FORMAT_DATETIME")).replace(/:s/g,"")],["s","sago"],["i","iago"],["today","today, "+D],["yesterday","yesterday, "+D],["",R.convertBitrixFormat(R._getMessage("FORMAT_DATETIME")).replace(/:s/g,"")]],K,be,aT)},X:function aL(){var D=R.isAmPmMode(true);var G=D===R.AM_PM_MODE.LOWER?"g:i a":D===R.AM_PM_MODE.UPPER?"g:i A":"H:i";var B=R.format([["tomorrow","tomorrow"],["-",R.convertBitrixFormat(R._getMessage("FORMAT_DATE"))],["today","today"],["yesterday","yesterday"],["",R.convertBitrixFormat(R._getMessage("FORMAT_DATE"))]],K,be,aT);var F=R.format([["tomorrow",G],["today",G],["yesterday",G],["",""]],K,be,aT);if(F.length>0){return R._getMessage("FD_DAY_AT_TIME").replace(/#DAY#/g,B).replace(/#TIME#/g,F)}else{return B}},Q:function aV(){var B=bc((be-K)/60/60/24/1000);if(B==0){return R._getMessage("FD_DAY_DIFF_1").replace(/#VALUE#/g,1)}else{return R.format([["d","ddiff"],["m","mdiff"],["","Ydiff"]],K,be)}}};var bj=false;if(T[0]&&T[0]=="^"){bj=true;T=T.substr(1)}var br=T.replace(C,ah);if(bj){br=br.replace(/\s*00:00:00\s*/g,"").replace(/(\d\d:\d\d)(:00)/g,"$1").replace(/(\s*00:00\s*)(?!:)/g,"")}if(bv.length>0){bv.forEach(function(D,B){br=br.replace("{{"+B+"}}",D)})}return br;function bp(H,X,O,B){var L=bc((O-X)/1000);for(var U=0;U<H.length;U++){var Q=H[U][0];var G=H[U][1];var M=null;if(Q=="s"){if(L<60){return R.format(G,X,O,B)}}else{if((M=/^s(\d+)\>?(\d+)?/.exec(Q))!=null){if(M[1]&&M[2]){if(L<M[1]&&L>M[2]){return R.format(G,X,O,B)}}else{if(L<M[1]){return R.format(G,X,O,B)}}}else{if(Q=="i"){if(L<60*60){return R.format(G,X,O,B)}}else{if((M=/^i(\d+)\>?(\d+)?/.exec(Q))!=null){if(M[1]&&M[2]){if(L<M[1]*60&&L>M[2]*60){return R.format(G,X,O,B)}}else{if(L<M[1]*60){return R.format(G,X,O,B)}}}else{if(Q=="H"){if(L<24*60*60){return R.format(G,X,O,B)}}else{if((M=/^H(\d+)\>?(\d+)?/.exec(Q))!=null){if(M[1]&&M[2]){if(L<M[1]*60*60&&L>M[2]*60*60){return R.format(G,X,O,B)}}else{if(L<M[1]*60*60){return R.format(G,X,O,B)}}}else{if(Q=="d"){if(L<31*24*60*60){return R.format(G,X,O,B)}}else{if((M=/^d(\d+)\>?(\d+)?/.exec(Q))!=null){if(M[1]&&M[2]){if(L<M[1]*24*60*60&&L>M[2]*24*60*60){return R.format(G,X,O,B)}}else{if(L<M[1]*24*60*60){return R.format(G,X,O,B)}}}else{if(Q=="m"){if(L<365*24*60*60){return R.format(G,X,O,B)}}else{if((M=/^m(\d+)\>?(\d+)?/.exec(Q))!=null){if(M[1]&&M[2]){if(L<M[1]*31*24*60*60&&L>M[2]*31*24*60*60){return R.format(G,X,O,B)}}else{if(L<M[1]*31*24*60*60){return R.format(G,X,O,B)}}}else{if(Q=="now"){if(X.getTime()==O.getTime()){return R.format(G,X,O,B)}}else{if(Q=="today"){var N=aQ(O),Y=bh(O),S=bq(O);var Z=B?new Date(Date.UTC(N,Y,S,0,0,0,0)):new Date(N,Y,S,0,0,0,0);var I=B?new Date(Date.UTC(N,Y,S+1,0,0,0,0)):new Date(N,Y,S+1,0,0,0,0);if(X>=Z&&X<I){return R.format(G,X,O,B)}}else{if(Q=="todayFuture"){var N=aQ(O),Y=bh(O),S=bq(O);var Z=O.getTime();var I=B?new Date(Date.UTC(N,Y,S+1,0,0,0,0)):new Date(N,Y,S+1,0,0,0,0);if(X>=Z&&X<I){return R.format(G,X,O,B)}}else{if(Q=="yesterday"){N=aQ(O);Y=bh(O);S=bq(O);var F=B?new Date(Date.UTC(N,Y,S-1,0,0,0,0)):new Date(N,Y,S-1,0,0,0,0);var D=B?new Date(Date.UTC(N,Y,S,0,0,0,0)):new Date(N,Y,S,0,0,0,0);if(X>=F&&X<D){return R.format(G,X,O,B)}}else{if(Q=="tommorow"||Q=="tomorrow"){N=aQ(O);Y=bh(O);S=bq(O);var P=B?new Date(Date.UTC(N,Y,S+1,0,0,0,0)):new Date(N,Y,S+1,0,0,0,0);var W=B?new Date(Date.UTC(N,Y,S+2,0,0,0,0)):new Date(N,Y,S+2,0,0,0,0);if(X>=P&&X<W){return R.format(G,X,O,B)}}else{if(Q=="-"){if(L<0){return R.format(G,X,O,B)}}}}}}}}}}}}}}}}}}return H.length>0?R.format(H[H.length-1][1],X,O,B):""}function aQ(B){return aT?B.getUTCFullYear():B.getFullYear()}function bq(B){return aT?B.getUTCDate():B.getDate()}function bh(B){return aT?B.getUTCMonth():B.getMonth()}function bg(B){return aT?B.getUTCHours():B.getHours()}function ac(B){return aT?B.getUTCMinutes():B.getMinutes()}function bm(B){return aT?B.getUTCSeconds():B.getSeconds()}function aN(B){return aT?B.getUTCMilliseconds():B.getMilliseconds()}function aP(B){return aT?B.getUTCDay():B.getDay()}function bi(B,D){return aT?B.setUTCDate(D):B.setDate(D)}function ab(D,B,F){return aT?D.setUTCMonth(B,F):D.setMonth(B,F)}function a5(F,D){var G=F<100?Math.abs(F):Math.abs(F%100);var H=G%10;var B="";if(G==0){B=R._getMessage(D["0"])}else{if(G==1){B=R._getMessage(D["1"])}else{if(G>=10&&G<=20){B=R._getMessage(D["10_20"])}else{if(H==1){B=R._getMessage(D.MOD_1)}else{if(2<=H&&H<=4){B=R._getMessage(D.MOD_2_4)}else{B=R._getMessage(D.MOD_OTHER)}}}}}return B.replace(/#VALUE#/g,F)}function ah(B,D){if(bs[B]){return bs[B]()}else{return D}}function bc(B){return B>=0?Math.floor(B):Math.ceil(B)}},convertBitrixFormat:function r(B){if(!k.isNotEmptyString(B)){return""}return B.replace("YYYY","Y").replace("MMMM","F").replace("MM","m").replace("M","M").replace("DD","d").replace("G","g").replace(/GG/i,"G").replace("H","h").replace(/HH/i,"H").replace("MI","i").replace("SS","s").replace("TT","A").replace("T","a")},convertToUTC:function z(B){if(!k.isDate(B)){return null}return new Date(Date.UTC(B.getFullYear(),B.getMonth(),B.getDate(),B.getHours(),B.getMinutes(),B.getSeconds(),B.getMilliseconds()))},getNewDate:function A(B){return new Date(this.getBrowserTimestamp(B))},getBrowserTimestamp:function i(C){C=parseInt(C,10);var B=new Date(C*1000).getTimezoneOffset()*60;return(parseInt(C,10)+parseInt(this._getMessage("SERVER_TZ_OFFSET"))+B)*1000},getServerTimestamp:function t(C){C=parseInt(C,10);var B=new Date(C).getTimezoneOffset()*60;return Math.round(C/1000-(parseInt(this._getMessage("SERVER_TZ_OFFSET"),10)+parseInt(B,10)))},formatLastActivityDate:function l(F,D,E){var C=this.isAmPmMode(true);var I=C===this.AM_PM_MODE.LOWER?"g:i a":C===this.AM_PM_MODE.UPPER?"g:i A":"H:i";var G=[["tomorrow","#01#"+I],["now","#02#"],["todayFuture","#03#"+I],["yesterday","#04#"+I],["-",this.convertBitrixFormat(this._getMessage("FORMAT_DATETIME")).replace(/:s/g,"")],["s60","sago"],["i60","iago"],["H5","Hago"],["H24","#03#"+I],["d31","dago"],["m12>1","mago"],["m12>0","dago"],["","#05#"]];var H=this.format(G,F,D,E);var B=null;if((B=/^#(\d+)#(.*)/.exec(H))!=null){switch(B[1]){case"01":H=this._getMessage("FD_LAST_SEEN_TOMORROW").replace("#TIME#",B[2]);break;case"02":H=this._getMessage("FD_LAST_SEEN_NOW");break;case"03":H=this._getMessage("FD_LAST_SEEN_TODAY").replace("#TIME#",B[2]);break;case"04":H=this._getMessage("FD_LAST_SEEN_YESTERDAY").replace("#TIME#",B[2]);break;case"05":H=this._getMessage("FD_LAST_SEEN_MORE_YEAR");break;default:H=B[2];break}}return H},isAmPmMode:function x(B){if(B===true){return this._getMessage("AMPM_MODE")}return this._getMessage("AMPM_MODE")!==false},_getMessage:function g(B){return u.message(B)},parse:function v(I,B,H,R){if(k.isNotEmptyString(I)){if(!H){H=this._getMessage("FORMAT_DATE")}if(!R){R=this._getMessage("FORMAT_DATETIME")}var E="";for(M=1;M<=12;M++){E=E+"|"+this._getMessage("MON_"+M)}var D=new RegExp("([0-9]+|[a-z]+"+E+")","ig"),S=I.match(D),F=H.match(/(DD|MI|MMMM|MM|M|YYYY)/ig),M,L,N=[],G=[],C={};if(!S){return null}if(S.length>F.length){F=R.match(/(DD|MI|MMMM|MM|M|YYYY|HH|H|SS|TT|T|GG|G)/ig)}for(M=0,L=S.length;M<L;M++){if(S[M].trim()!==""){N[N.length]=S[M]}}for(M=0,L=F.length;M<L;M++){if(F[M].trim()!==""){G[G.length]=F[M]}}var J=k.array_search("MMMM",G);if(J>0){N[J]=this.getMonthIndex(N[J]);G[J]="MM"}else{J=k.array_search("M",G);if(J>0){N[J]=this.getMonthIndex(N[J]);G[J]="MM"}}for(M=0,L=G.length;M<L;M++){var K=G[M].toUpperCase();C[K]=K==="T"||K==="TT"?N[M]:parseInt(N[M],10)}if(C.DD>0&&C.MM>0&&C.YYYY>0){var Q=new Date();if(B){Q.setUTCDate(1);Q.setUTCFullYear(C.YYYY);Q.setUTCMonth(C.MM-1);Q.setUTCDate(C.DD);Q.setUTCHours(0,0,0,0)}else{Q.setDate(1);Q.setFullYear(C.YYYY);Q.setMonth(C.MM-1);Q.setDate(C.DD);Q.setHours(0,0,0,0)}if((!isNaN(C.HH)||!isNaN(C.GG)||!isNaN(C.H)||!isNaN(C.G))&&!isNaN(C.MI)){if(!isNaN(C.H)||!isNaN(C.G)){var P=(C.T||C.TT||"am").toUpperCase()==="PM",O=parseInt(C.H||C.G||0,10);if(P){C.HH=O+(O===12?0:12)}else{C.HH=O<12?O:0}}else{C.HH=parseInt(C.HH||C.GG||0,10)}if(isNaN(C.SS)){C.SS=0}if(B){Q.setUTCHours(C.HH,C.MI,C.SS)}else{Q.setHours(C.HH,C.MI,C.SS)}}return Q}}return null},getMonthIndex:function o(F){var B,E=F.toUpperCase(),D=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],C=["january","february","march","april","may","june","july","august","september","october","november","december"];for(B=1;B<=12;B++){if(E===this._getMessage("MON_"+B).toUpperCase()||E===this._getMessage("MONTH_"+B).toUpperCase()||E===D[B-1].toUpperCase()||E===C[B-1].toUpperCase()){return B}}return F}};var k={isDate:function y(B){return B&&Object.prototype.toString.call(B)=="[object Date]"},isNumber:function s(B){return B===0?true:B?typeof B=="number"||B instanceof Number:false},isArray:function p(B){return B&&Object.prototype.toString.call(B)=="[object Array]"},isString:function q(B){return B===""?true:B?typeof B=="string"||B instanceof String:false},isNotEmptyString:function m(B){return this.isString(B)?B.length>0:false},strPadLeft:function j(B,F,D){var C=B.length,E=D.length;if(C>=F){return B}for(;C<F;C+=E){B=D+B}return B},array_search:function h(D,C){for(var B=0;B<C.length;B++){if(C[B]==D){return B}}return -1}}})(window);function d(){var h=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="','">\n\t\t\t<svg class="calendar-loader-circular"\n\t\t\t\tstyle="width:',"px; height:",'px;"\n\t\t\t\tviewBox="25 25 50 50">\n\t\t\t\t\t<circle class="calendar-loader-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n\t\t\t\t\t<circle class="calendar-loader-inner-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n\t\t\t</svg>\n\t\t</div>\n']);g=function g(){return h};return h}var e=function(){function i(){babelHelpers.classCallCheck(this,i)}babelHelpers.createClass(i,null,[{key:"parseTime",value:function g(Z){var Y=i.parseDate1(BX.date.format(i.getDateFormat(),new Date())+" "+Z,false);return Y?{h:Y.getHours(),m:Y.getMinutes()}:Y}},{key:"getTimeRounded",value:function s(Y){return Math.round(Y.getTime()/60000)*60000}},{key:"parseDate",value:function j(ab,aa,Z,Y){return BX.parseDate(ab,aa,Z,Y)}},{key:"parseDate1",value:function o(ak,al,ao){var af,aa,ae,ad;if(!al){al=f.Loc.getMessage("FORMAT_DATETIME")}ak=BX.util.trim(ak);if(ao!==false){al=al.replace(":SS","")}if(BX.type.isNotEmptyString(ak)){ad="";for(af=1;af<=12;af++){ad=ad+"|"+f.Loc.getMessage("MON_"+af)}var am=new RegExp("([0-9]+|[a-z]+"+ad+")","ig"),Z=ak.match(am),aj=f.Loc.getMessage("FORMAT_DATE").match(/(DD|MI|MMMM|MM|M|YYYY)/ig),ac=[],ah=[],an={};if(!Z){return null}if(Z.length>aj.length){aj=al.match(/(DD|MI|MMMM|MM|M|YYYY|HH|H|SS|TT|T|GG|G)/ig)}for(af=0,aa=Z.length;af<aa;af++){if(BX.util.trim(Z[af])!==""){ac[ac.length]=Z[af]}}for(af=0,aa=aj.length;af<aa;af++){if(BX.util.trim(aj[af])!=""){ah[ah.length]=aj[af]}}var ab=BX.util.array_search("MMMM",ah);if(ab>0){ac[ab]=BX.getNumMonth(ac[ab]);ah[ab]="MM"}else{ab=BX.util.array_search("M",ah);if(ab>0){ac[ab]=BX.getNumMonth(ac[ab]);ah[ab]="MM"}}for(af=0,aa=ah.length;af<aa;af++){ae=ah[af].toUpperCase();an[ae]=ae=="T"||ae=="TT"?ac[af]:parseInt(ac[af],10)}if(an.DD>0&&an.MM>0&&an.YYYY>0){var ai=new Date();ai.setDate(1);ai.setFullYear(an.YYYY);ai.setMonth(an.MM-1);ai.setDate(an.DD);ai.setHours(0,0,0);if((!isNaN(an.HH)||!isNaN(an.GG)||!isNaN(an.H)||!isNaN(an.G))&&!isNaN(an.MI)){if(!isNaN(an.H)||!isNaN(an.G)){var Y=(an.T||an.TT||"am").toUpperCase()=="PM";var ag=parseInt(an.H||an.G||0,10);if(Y){an.HH=ag+(ag==12?0:12)}else{an.HH=ag<12?ag:0}}else{an.HH=parseInt(an.HH||an.GG||0,10)}if(isNaN(an.SS)){an.SS=0}ai.setHours(an.HH,an.MI,an.SS)}return ai}}return null}},{key:"formatTime",value:function I(aa,Y,Z){var ab=null;if(f.Type.isDate(aa)){ab=aa}else{ab=new Date();ab.setHours(aa,Y,0)}return BX.date.format(i.getTimeFormatShort(),ab.getTime()/1000)}},{key:"formatDate",value:function N(Y){if(f.Type.isDate(Y)){Y=Y.getTime()}return BX.date.format(i.getDateFormat(),Y/1000)}},{key:"formatDateTime",value:function r(Y){if(f.Type.isDate(Y)){Y=Y.getTime()}return BX.date.format(i.getDateTimeFormat(),Y/1000)}},{key:"formatDateUsable",value:function K(Y){var ac=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var ab=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var aa=f.Loc.getMessage("LANGUAGE_ID"),Z=i.getDateFormat();if(aa==="ru"||aa==="ua"){Z=ab?"l, j F":"j F";if(Y.getFullYear&&Y.getFullYear()!==new Date().getFullYear()&&ac!==false){Z+=" Y"}}return BX.date.format([["today","today"],["tommorow","tommorow"],["yesterday","yesterday"],["",Z]],Y)}},{key:"getDayLength",value:function C(){if(!i.DAY_LENGTH){i.DAY_LENGTH=86400000}return i.DAY_LENGTH}},{key:"getDefaultColorList",value:function O(){return["#86B100","#0092CC","#00AFC7","#DA9100","#00B38C","#DE2B24","#BD7AC9","#838FA0","#AB7917","#E97090"]}},{key:"findTargetNode",value:function L(ab,aa){var Z=false;if(ab){var ac="data-bx-calendar",Y;if(ab.attributes&&ab.attributes.length){for(Y=0;Y<ab.attributes.length;Y++){if(ab.attributes[Y].name&&ab.attributes[Y].name.substr(0,ac.length)===ac){Z=ab;break}}}if(!Z){Z=BX.findParent(ab,function(ae){var ad;if(ae.attributes&&ae.attributes.length){for(ad=0;ad<ae.attributes.length;ad++){if(ae.attributes[ad].name&&ae.attributes[ad].name.substr(0,ac.length)===ac){return true}}}return false},aa)}}return Z}},{key:"getFollowedUserList",value:function q(Y){return[]}},{key:"getWeekDayByInd",value:function M(Y){return["SU","MO","TU","WE","TH","FR","SA"][Y]}},{key:"getLoader",value:function h(Y,Z){return f.Tag.render(d(),Z||"calendar-loader",parseInt(Y),parseInt(Y))}},{key:"getDayCode",value:function G(Y){return Y.getFullYear()+"-"+("0"+~~(Y.getMonth()+1)).substr(-2,2)+"-"+("0"+~~Y.getDate()).substr(-2,2)}},{key:"getTextColor",value:function Q(aa){if(!aa){return false}if(aa.charAt(0)==="#"){aa=aa.substring(1,7)}var ac=parseInt(aa.substring(0,2),16),ab=parseInt(aa.substring(2,4),16),Y=parseInt(aa.substring(4,6),16),Z=(ac*0.8+ab+Y*0.2)/510*100;return Z<50}},{key:"getKeyCode",value:function H(Y){if(!f.Type.isString(Y)){return false}var Z={backspace:8,enter:13,escape:27,space:32,"delete":46,left:37,right:39,up:38,down:40,z:90,y:89,shift:16,ctrl:17,alt:18,cmd:91,cmdRight:93,pageUp:33,pageDown:34,d:68,w:87,m:77,a:65};return Z[Y.toLowerCase()]}},{key:"getUsableDateTime",value:function P(Z,aa){if(f.Type.isDate(Z)){Z=Z.getTime()}var Y=(aa||10)*60*1000;Z=Math.ceil(Z/Y)*Y;return new Date(Z)}},{key:"showNotification",value:function J(Y){var Z=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(f.Type.isString(Y)&&Y!==""){BX.UI.Notification.Center.notify({content:Y,actions:Z})}}},{key:"showFieldError",value:function R(ab,Z,Y){if(f.Type.isDomNode(Z)&&f.Type.isString(ab)&&ab!==""){f.Dom.remove(Z.querySelector(".ui-alert"));var ac=new BX.UI.Alert({color:BX.UI.Alert.Color.DANGER,icon:BX.UI.Alert.Icon.DANGER,text:ab});var aa=ac.getContainer();Z.appendChild(aa)}}},{key:"getDateFormat",value:function k(){if(!i.DATE_FORMAT){i.DATE_FORMAT=BX.Main.Date.convertBitrixFormat(f.Loc.getMessage("FORMAT_DATE"))}return i.DATE_FORMAT}},{key:"getDateTimeFormat",value:function A(){if(!i.DATETIME_FORMAT){i.DATETIME_FORMAT=BX.Main.Date.convertBitrixFormat(f.Loc.getMessage("FORMAT_DATETIME"))}return i.DATETIME_FORMAT}},{key:"getTimeFormat",value:function u(){if(!i.TIME_FORMAT){if(f.Loc.getMessage("FORMAT_DATETIME").substr(0,f.Loc.getMessage("FORMAT_DATE").length)===f.Loc.getMessage("FORMAT_DATE")){i.TIME_FORMAT=BX.util.trim(i.getDateTimeFormat().substr(i.getDateFormat().length));i.TIME_FORMAT_BX=BX.util.trim(f.Loc.getMessage("FORMAT_DATETIME").substr(f.Loc.getMessage("FORMAT_DATE").length))}else{i.TIME_FORMAT_BX=BX.isAmPmMode()?"H:MI:SS T":"HH:MI:SS";i.TIME_FORMAT=BX.date.convertBitrixFormat(BX.isAmPmMode()?"H:MI:SS T":"HH:MI:SS")}}return i.TIME_FORMAT}},{key:"getTimeFormatShort",value:function F(){if(!i.TIME_FORMAT_SHORT){i.TIME_FORMAT_SHORT=i.getTimeFormat().replace(":s","");i.TIME_FORMAT_SHORT_BX=i.TIME_FORMAT_BX.replace(":SS","")}return i.TIME_FORMAT_SHORT}},{key:"getCurrentUserId",value:function E(){if(!i.currentUserId){i.currentUserId=parseInt(f.Loc.getMessage("USER_ID"))}return i.currentUserId}},{key:"getTimeByInt",value:function m(Z){Z=parseInt(Z);var Y=Math.floor(Z/60);return{hour:Y,min:Z-Y*60}}},{key:"preventSelection",value:function T(Y){Y.ondrag=BX.False;Y.ondragstart=BX.False;Y.onselectstart=BX.False}},{key:"getBX",value:function z(){return window.top.BX||window.BX}},{key:"applyHacksForPopupzIndex",value:function D(aa){var Y=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(Y){setTimeout(function(){i.applyHacksForPopupzIndex(aa,false)},0)}else{aa=f.Type.isInteger(aa)?aa:4200;if(BX.PopupMenu&&BX.PopupMenu.Data){for(var Z in BX.PopupMenu.Data){if(BX.PopupMenu.Data.hasOwnProperty(Z)&&BX.type.isObject(BX.PopupMenu.Data[Z])&&BX.PopupMenu.Data[Z].popupWindow&&BX.PopupMenu.Data[Z].popupWindow.isShown()){BX.PopupMenu.Data[Z].popupWindow.params.zIndex=aa;BX.PopupMenu.Data[Z].popupWindow.popupContainer.style.zIndex=aa}}}}}},{key:"closeAllPopups",value:function S(){if(c.PopupManager.isAnyPopupShown()){for(var Y=0,Z=c.PopupManager._popups.length;Y<Z;Y++){if(c.PopupManager._popups[Y].isShown()){c.PopupManager._popups[Y].close()}}}}},{key:"sendAnalyticLabel",value:function l(Y){BX.ajax.runAction("calendar.api.calendarajax.sendAnalyticsLabel",{analyticsLabel:Y})}},{key:"setOptions",value:function y(Z,Y){i.config=Z;i.additionalParams=Y}},{key:"setUserSettings",value:function t(Y){i.userSettings=Y}},{key:"getUserSettings",value:function V(){return i.userSettings||{}}},{key:"setCalendarContext",value:function p(Y){i.calendarContext=Y}},{key:"getCalendarContext",value:function X(){return i.calendarContext||null}},{key:"getMeetingStatusList",value:function x(){return["Y","N","Q","H"]}},{key:"checkEmailLimitationPopup",value:function v(){var Z=i.getEventWithEmailGuestAmount();var Y=i.getEventWithEmailGuestLimit();return Y>0&&(Z===8||Z===4||Z>=Y)}},{key:"isEventWithEmailGuestAllowed",value:function w(){return i.getEventWithEmailGuestLimit()===-1||i.getEventWithEmailGuestAmount()<i.getEventWithEmailGuestLimit()}},{key:"setEventWithEmailGuestAmount",value:function U(Y){i.countEventWithEmailGuestAmount=Y}},{key:"setEventWithEmailGuestLimit",value:function B(Y){i.eventWithEmailGuestLimit=Y}},{key:"getEventWithEmailGuestAmount",value:function n(){return i.countEventWithEmailGuestAmount}},{key:"getEventWithEmailGuestLimit",value:function W(){return i.eventWithEmailGuestLimit}}]);return i}();b.Util=e}((this.BX.Calendar=this.BX.Calendar||{}),BX,BX,BX.Main));