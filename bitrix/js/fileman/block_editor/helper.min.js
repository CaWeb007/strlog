function BXBlockEditorHelper(){}BXBlockEditorHelper.prototype.colorHexToRgb=function(b){if(!b){return b}var c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;b=b.replace(c,function(e,h,f,d){return h+h+f+f+d+d});var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return a?"rgb("+parseInt(a[1],16)+", "+parseInt(a[2],16)+", "+parseInt(a[3],16)+")":null};BXBlockEditorHelper.prototype.appendChildNode=function(b,a,d){d=d||null;if(d){a.parentNode.insertBefore(b,a)}else{var c=BX.findNextSibling(a);if(c){a.parentNode.insertBefore(b,c)}else{a.parentNode.appendChild(b)}}};BXBlockEditorHelper.prototype.colorRgbToHex=function(c){if(!c||c.substring(0,1)==="#"){return c}var e=/(.*?)rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(c);if(!e){return null}var h=parseInt(e[2]);var f=parseInt(e[3]);var a=parseInt(e[4]);var d=a|(f<<8)|(h<<16);var i="000000"+d.toString(16);i=i.substring(i.length,i.length-6);return e[1]+"#"+i};BXBlockEditorHelper.prototype.column=function(c,b,g){var d=1;var j=BX.findParent(c,{className:"bxBlockInn"},true);if(j){for(var f in j.childNodes){if(j.childNodes[f]&&j.childNodes[f].nodeName=="#text"){BX.remove(j.childNodes[f])}}if(typeof g!=="undefined"){var h;var e=j.childNodes.length-g;if(e>0){while(e>0){BX.remove(j.childNodes[j.childNodes.length-1]);e--}}else{if(e<0){while(e<0){h=BX.clone(j.childNodes[0]);j.appendChild(h);e++}}}var a=null;if(j.childNodes.length==3){a="188"}else{if(j.childNodes.length==2){a="282"}}for(var f in j.childNodes){if(j.childNodes[f]&&j.childNodes[f].setAttribute){j.childNodes[f].setAttribute("width",a)}}}d=j.childNodes.length}return d.toString()};BXBlockEditorHelper.prototype.color=function(b,a,c){if(typeof(c)!=="undefined"){var d=c;if(c.length>0){c=this.colorHexToRgb(c)}this.style(b,a,c);if(a=="background-color"&&b.tagName=="TABLE"){this.attr(b,"bgcolor",d)}}c=this.style(b,a);return this.colorRgbToHex(c)};BXBlockEditorHelper.prototype.style=function(b,a,c){if(!b){return}if(typeof(c)!=="undefined"){if(c.length>0){b.style[a]=c}else{b.style[a]=null}}return b.style[a]};BXBlockEditorHelper.prototype.attr=function(b,a,c){if(!b){return}if(typeof(c)!=="undefined"){if(c!==null&&c.length>0){b.setAttribute(a,c)}else{b.setAttribute(a,null)}}return b.getAttribute(a)};BXBlockEditorHelper.prototype.paddings=function(a,c,b){if(!a){return}if(typeof(b)!=="undefined"){if(b=="Y"){BX.addClass(a,"bxBlockPadding")}else{BX.removeClass(a,"bxBlockPadding")}}if(BX.hasClass(a,"bxBlockPadding")){return"Y"}else{return"N"}};BXBlockEditorHelper.prototype.each=function(a,f,d){if(!BX.type.isFunction(f)){return}if(!a||a.length==0){return}for(var c in a){if(typeof(a[c])==="undefined"){return}var e=a[c];var b=d||e;f.apply(b,[e,c])}};BXBlockEditorHelper.prototype.imageAutoWidth=function(b,a){var c=BX.findChildren(b,{tag:"img"},true);this.each(c,function(e){e.removeAttribute("width")});var d=this;setTimeout(function(){d.each(c,function(e){e.setAttribute("width",e.offsetWidth)})},1000)};BXBlockEditorHelper.prototype.imageTextAlign=function(f,g){var c=BX.findChild(f,{className:"bxBlockOut"},true);var b=BX.findChildren(c,{className:"bxBlockContentItemImageText"},true);var a=false;if(BX.findChild(b[0],{className:"bxBlockContentImage"},true)){a=true}g=g||null;if(g){var d=a?b[0]:b[1];var e=a?b[1]:b[0];switch(g){case"left":e.parentNode.insertBefore(d,e);break;case"right":e.parentNode.appendChild(d);break}}if(a){result="left"}else{result="right"}return result};BXBlockEditorHelper.prototype.imageTextPart=function(c,j){var d=BX.findChild(c,{className:"bxBlockInn"},true);var l=BX.findChildren(d,{className:"bxBlockContentItemImageText"},true);var e=false;if(l&&BX.findChild(l[0],{className:"bxBlockContentImage"},true)){e=true}var a=e?l[0]:l[1];var f=e?l[1]:l[0];j=j||null;var g="1/2";var i=580;var b={"1/4":parseInt(i/4),"1/3":parseInt(i/3),"1/2":parseInt(i/2),"2/3":parseInt(2*i/3)};var h=b[g];if(j){h=b[j];f.setAttribute("width",i-h);a.setAttribute("width",h)}var m=g;h=parseInt(a.getAttribute("width"));for(var k in b){if(h==b[k]){m=k;break}}return m};BXBlockEditorHelper.prototype.imageSrc=function(a,b){if(typeof b!=="undefined"){if(!b||b==""){b="/bitrix/images/fileman/block_editor/photo-default.png";this.attr(a,"data-bx-editor-def-image","1")}else{this.attr(a,"data-bx-editor-def-image","0")}this.attr(a,"src",b)}if(this.attr(a,"data-bx-editor-def-image")=="1"){return""}else{return this.attr(a,"src")}};BXBlockEditorHelper.prototype.groupImageSrc=function(c,j){var m=[];var f;var a=function(){var i='<table align="left" border="0" cellpadding="0" cellspacing="0" width="260"><tbody><tr><td valign="top" class="bxBlockPadding bxBlockContentImage"><a href="#"><img align="left" data-bx-editor-def-image="1" src="/bitrix/images/fileman/block_editor/photo-default.png" class="bxImage"></a></td></tr></tbody></table>';if(!this.imageTempContainer){this.imageTempContainer=BX.create("DIV")}BX.adjust(this.imageTempContainer,{html:i});return BX.findChild(this.imageTempContainer,{})};if(typeof j!=="undefined"){var d=j.split(",");if(!j||j==""){d=[]}var h;f=BX.findChildren(c,{});var k=d.length-f.length;var b=Math.abs(k);var g=k<0;if(k!=0){for(var e=0;e<b;e++){if(g){BX.remove(f.pop())}else{h=a();c.appendChild(h)}}}if(!j||j==""){for(var e=1;e<=2;e++){h=a();c.appendChild(h)}}else{f=BX.findChildren(c,{});for(var e in f){var l=BX.findChild(f[e],{tag:"img"},true);if(!l){continue}this.attr(l,"src",d[e]);this.attr(l,"data-bx-editor-def-image","0")}}}f=BX.findChildren(c,{tag:"img"},true);for(var e in f){if(this.attr(f[e],"data-bx-editor-def-image")=="1"){continue}m.push(this.attr(f[e],"src"))}return m};BXBlockEditorHelper.prototype.innerHTML=function(a,b){if(!a){return}if(typeof(b)!=="undefined"){if(b.length>0){a.innerHTML=b.trim()}else{a.innerHTML=""}}return a.innerHTML.trim()};BXBlockEditorHelper.prototype.htmlEscape=function(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};