BXMailBlockEditorHandler=function(){this.init=function(){this.helper=new BXBlockEditorHelper;this.handlerList={};this.initHandlerVars();this.initHandlerList();this.bind()};this.bind=function(){if(!BX.BlockEditorManager){return}BX.addCustomEvent(BX.BlockEditorManager,"onEditorAdd",BX.delegate(function(b){BX.addCustomEvent(b,"onBlockInitHandlers",BX.delegate(function(d,c){if(!this.handlerList[c]){return}d.editHandlerList=this.handlerList[c];this.helper.each(this.handlersByType[c]["prop"],function(f,e){d[e]=f},this)},this))},this))};this.initHandlerList=function(){this.handlerList={};this.helper.each(this.handlersByType,function(c,b){this.helper.each(this.handlersByType[b].preset.list,function(d){this.helper.each(this.presetHandlers[d],function(f,g){var e=BX.clone(f);e.className=d;if(!this.handlerList[b]){this.handlerList[b]={}}this.handlerList[b][g]=e},this)},this);this.helper.each(c.preset.exclude,function(d){if(this.handlerList[b][d]){this.handlerList[b][d]=null;delete this.handlerList[b][d]}},this);this.helper.each(c.list,function(d,e){if(!this.handlerList[b]){this.handlerList[b]={}}this.handlerList[b][e]=d},this)},this)};this.initHandlerVars=function(){this.presetHandlers={bxBlockContentText:{content:{func:function(b,d,c){return this.helper.innerHTML(b,c)},reload_dependence:["column-count"]}},bxBlockContentEdge:{"background-color":{func:function(b,d,c){return this.helper.color(b,d,c)}},border:{func:function(b,d,c){return this.helper.style(b,d,c)}}},bxBlockContentLine:{"background-color":{func:function(b,d,c){return this.helper.color(b,d,c)}},height:{func:function(b,d,c){return this.helper.style(b,d,c)}},"margin-top":{func:function(b,d,c){return this.helper.style(b,d,c)}},"margin-bottom":{func:function(b,d,c){return this.helper.style(b,d,c)}}},bxBlockContentImageGroup:{src:{func:function(b,d,c){return this.helper.groupImageSrc(b,c)},params:{multi:true}}},bxBlockContentImage:{align:{func:function(b,d,c){this.helper.style(b,"text-align",c);return this.helper.attr(BX.findChild(b,{tag:"img"},true),d,c)}},src:{func:function(b,d,c){return this.helper.imageSrc(BX.findChild(b,{tag:"img"},true),c)},params:{multi:false}},title:{func:function(b,d,c){return this.helper.attr(BX.findChild(b,{tag:"img"},true),d,c)}},href:{func:function(b,d,c){return this.helper.attr(BX.findChild(b,{tag:"a"},true),d,c)}}},bxBlockContentButton:{button_caption:{func:function(b,d,c){return this.helper.innerHTML(b,c)}},color:{func:function(b,d,c){return this.helper.color(b,d,c)}},"font-size":{func:function(b,d,c){return this.helper.style(b,d,c)}},padding:{func:function(b,d,c){return this.helper.style(b,d,c)}},href:{func:function(b,d,c){return this.helper.attr(b,d,c)}},"text-decoration":{func:function(b,d,c){return this.helper.style(b,d,c)}}},bxBlockContentButtonEdge:{"background-color":{func:function(b,d,c){return this.helper.color(b,d,c)}},wide:{func:function(b,d,c){if(typeof(c)!=="undefined"){if(c==="N"){b.removeAttribute("width")}else{b.setAttribute("width","100%")}}if(b.getAttribute("width")){return"Y"}else{return"N"}}},border:{func:function(b,d,c){return this.helper.style(b,d,c)}},"border-radius":{func:function(b,d,c){return this.helper.style(b,d,c)}},align:{func:function(b,d,c){return this.helper.attr(b,d,c)}},width:{func:function(b,d,c){return this.helper.attr(BX.findChild(b,{tag:"td"},true),d,c)}}},bxBlockImageText:{imagetextpart:{func:function(b,d,c){return this.helper.imageTextPart(b,c)}},imagetextalign:{func:function(b,d,c){return this.helper.imageTextAlign(b,c)}}},bxBlockContentSocial:{"font-size":{func:function(b,d,c){return this.helper.style(b,d,c)}},color:{func:function(b,d,c){return this.helper.color(b,d,c)}},"text-decoration":{func:function(b,d,c){return this.helper.style(b,d,c)}}},bxBlockContentEdgeSocial:{social_content:{func:function(d,c,m){var h;if(typeof(m)!=="undefined"){m=JSON.parse(m);itemList=BX.findChildren(d,{tag:"table"},true);var n=m.length-itemList.length;var b=Math.abs(n);var k=n<0;if(n!==0){for(var g=0;g<b;g++){if(k){BX.remove(itemList.pop())}else{itemList[0].parentNode.appendChild(BX.clone(itemList[0]))}}}itemList=BX.findChildren(d,{tag:"table"},true);for(var f=0;f<m.length;f++){var e=m[f];var l=BX.findChild(itemList[f],{tag:"a"},true);l.innerHTML=e.name.trim();l.href=e.href.trim();l.title=e.name.trim()}}h=BX.findChildren(d,{tag:"a"},true);var o=[];this.helper.each(h,function(i){o.push({href:i.href,name:i.text.trim()})});return JSON.stringify(o)}},align:{func:function(b,d,c){return this.helper.attr(b,d,c)}}}};this.handlersByType={code:{preset:{list:[],exclude:[]},list:{"html-raw":{className:"",func:function(b,d,c){return this.helper.innerHTML(b,c)}}}},line:{preset:{list:["bxBlockContentLine"],exclude:[]},list:{}},text:{preset:{list:["bxBlockContentText"],exclude:[]},list:{"column-count":{className:"bxBlockContentText",func:function(b,d,c){return this.helper.column(b,d,c)}},paddings:{className:"bxBlockContentText",func:function(b,d,c){return this.helper.paddings(b,d,c)}}}},boxedtext:{preset:{list:["bxBlockContentText","bxBlockContentEdge"],exclude:[]},list:{"column-count":{className:"bxBlockContentText",func:function(b,d,c){return this.helper.column(b,d,c)}},paddings:{className:"bxBlockContentEdge",func:function(b,d,c){return this.helper.paddings(b.parentNode,d,c)}}}},image:{preset:{list:["bxBlockContentImage"],exclude:[]},list:{paddings:{className:"bxBlockContentImage",func:function(b,d,c){return this.helper.paddings(b,d,c)}}},prop:{onMove:function(c,b){}}},imagegroup:{preset:{list:["bxBlockContentImageGroup"],exclude:["href"]},list:{paddings:{className:"bxBlockContentImage",func:function(b,d,c){return this.helper.paddings(b,d,c)}}}},imagetext:{preset:{list:["bxBlockImageText","bxBlockContentImage","bxBlockContentText"],exclude:["align"]},list:{}},boxedimage:{preset:{list:["bxBlockContentEdge","bxBlockContentImage","bxBlockContentText"],exclude:[]},list:{},prop:{onMove:function(c,b){}}},button:{preset:{list:["bxBlockContentButtonEdge","bxBlockContentButton"],exclude:[]},list:{}},social:{preset:{list:["bxBlockContentSocial","bxBlockContentEdgeSocial"],exclude:[]},list:{}}}};var a=this;BX.ready(function(){a.init()})};new BXMailBlockEditorHandler;