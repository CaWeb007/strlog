(function(){var a=window.BX;if(a.file_input){return}a.file_input=function(b){this.arConfig=b;a.ready(a.proxy(this.Init,this))};a.file_input.prototype.Init=function(){this.id=this.arConfig.id;this.multiple=this.arConfig.multiple;this.maxCount=parseInt(this.arConfig.maxCount)||0;this.inputSize=this.arConfig.inputSize||50;this.fileCount=0;this.newFileCount=0;this.pCont=a(this.id+"_cont");if(!this.pCont){setTimeout(a.proxy(this.Init,this),100);return}if(this.arConfig.useMedialib||this.arConfig.useFileDialog){this.arConfig.menuExist.push({TEXT:a.message("ADM_FILE_INSERT_PATH"),ONCLICK:a.proxy(this.ShowPath,this)});this.arConfig.menuNew.push({TEXT:a.message("ADM_FILE_INSERT_PATH"),ONCLICK:a.proxy(this.ShowPath,this)})}if(this.multiple){this.pCont.style.marginBottom="14px"}this.pNewMenu=a(this.id+"_menu_new");if(this.pNewMenu){this.SetOpenerMenu(this.pNewMenu,this.arConfig.menuNew)}if(this.arConfig.fileExists&&this.arConfig.files){for(var b=0;b<this.arConfig.files.length;b++){this.DisplayExistFile(b)}}this.fileCount=this.arConfig.files.length;this.oFiles=[];this.oNewFile=this.DisplayFileBlock();this.oNewFile.pTextInput.id=this.id+"_text_input";if(!this.arConfig.useUpload){if(this.multiple){this.SetInputName(this.oNewFile.pTextInput,this.GetInputName("file_dialog"));this.ShowFileDescription(this.oNewFile);this.PushToFiles(this.oNewFile)}else{this.SetInputName(this.oNewFile.pTextInput,this.GetInputName("first_input"));this.ShowFileDescription(this.oNewFile)}}else{if(!this.arConfig.fileExists&&this.arConfig.useUpload){this.oNewFile.pFileCont.appendChild(a.create("INPUT",{props:{type:"file",name:this.GetInputName("first_input"),className:"adm-designed-file adm-input-file-none",id:this.id+"_file_hidden_value_"+0}}))}}this.pCont.appendChild(this.oNewFile.pFileCont);if(this.arConfig.viewMode||(this.arConfig.fileExists&&!this.CheckNewFileState())){this.HideNewFileState()}if(!this.arConfig.fileExists){a.addClass(this.pCont,"adm-input-file-top-shift")}var c=this;if(this.arConfig.useMedialib){window["SetValueFromMedialib"+this.id]=function(d){c.OnSelectFromMedialib(d)}}if(this.arConfig.useFileDialog){window["SetValueFromFileDialog"+this.id]=function(d,f,e,h,g){c.OnSelectFromFileDialog(f+(f=="/"?"":"/")+d)}}if(this.arConfig.useCloud){window["OpenCloudDialog"+this.id]=function(){c.oNewFile.pTextInput.onchange=a.proxy(c.OnCloudInputChange,c);a.util.popup(c.arConfig.cloudDialogPath+c.oNewFile.pTextInput.id,710,600)}}};a.file_input.prototype.DisplayExistFile=function(f){var c=this.arConfig.files[f];if(c.FILE_NOT_FOUND){var m=a(this.id+"_menu_"+f);if(m&&this.arConfig.showDel){this.SetOpenerMenu(m,[{TEXT:a.message("ADM_FILE_DELETE"),ONCLICK:a.proxy(this.DeleteFile,this),GLOBAL_ICON:"adm-menu-delete"}])}}else{if(!this.arConfig.viewMode){var m=a(this.id+"_menu_"+f);if(m){var e=a.clone(this.arConfig.menuExist);if(this.arConfig.showDel||this.arConfig.showDesc){e.push({SEPARATOR:true})}if(this.arConfig.showDel){e.push({TEXT:a.message("ADM_FILE_DELETE"),ONCLICK:a.proxy(this.DeleteFile,this),GLOBAL_ICON:"adm-menu-delete"})}if(this.arConfig.showDesc&&c.DESCRIPTION==""){e.push({TEXT:a.message("ADM_FILE_ADD_DESC"),ONCLICK:a.proxy(this.AddDescription,this),GLOBAL_ICON:"adm-menu-add-desc"})}this.SetOpenerMenu(m,e);if(!c.IS_IMAGE){m.style.top="-6px"}}var k=a(this.id+"_file_cont_"+f);if(k){var d=c.INPUT_NAME||this.GetInputName("first_input"),l;if(this.arConfig.useUpload){l=a.create("INPUT",{props:{type:"file",name:d,className:"adm-designed-file adm-input-file-none"}})}else{l=a.create("INPUT",{props:{type:"hidden",value:c.PATH||c.SRC,name:d}})}l.id=this.id+"_file_hidden_value_"+f;k.appendChild(l)}}if(c.IS_IMAGE){var g=a(this.id+"_file_disp_"+f),b=a.findChild(g,{tag:"IMG"},true);if(b){var o=b,j=parseInt(b.getAttribute("height")||b.offsetHeight),n=parseInt(b.getAttribute("width")||b.offsetWidth);if(this.arConfig.minPreviewHeight>j||this.arConfig.minPreviewWidth>n){if(this.arConfig.minPreviewHeight<j){g.style.height=(j+4)+"px"}if(this.arConfig.minPreviewWidth<n){g.style.width=(n+4)+"px"}if(o.parentNode.tagName.toLowerCase()=="a"){o=o.parentNode}a.addClass(g,"adm-input-file-bordered");o.style.position="absolute";o.style.top="50%";o.style.left="50%";o.style.marginTop=Math.round(-j/2)+"px";o.style.marginLeft=Math.round(-n/2)+"px"}}}}};a.file_input.prototype.SetOpenerMenu=function(c,b){var d=this;if(!!c.OPENER){return true}c.OPENER=new a.COpener({DIV:c,TYPE:"click",MENU:b,ACTIVE_CLASS:"adm-btn-active"});a.addCustomEvent(c.OPENER,"onOpenerMenuOpen",function(){d.SetCurrentFile(c.getAttribute("data-bx-meta"));var f,e=c.OPENER.GetMenu().ITEMS;for(f in e){if(e[f]&&e[f].ID=="upload"&&a.isNodeInDom(e[f].NODE)){d.oNewFile.pUploadInput.setAttribute("data-bx-moved",true);e[f].NODE.appendChild(d.oNewFile.pUploadInput);a.addClass(e[f].NODE,"adm-input-file-ext-class");break}}});a.addCustomEvent(c.OPENER,"onOpenerMenuClose",function(){var f,e=c.OPENER.GetMenu().ITEMS;for(f in e){if(e[f].ID=="upload"&&a.isNodeInDom(e[f].NODE)){a.removeClass(e[f].NODE,"adm-input-file-ext-class");a.defer(function(){if(d.oNewFile.pUploadInput.getAttribute("data-bx-moved")){d.oNewFile.pUploadInput.removeAttribute("data-bx-moved");d.oNewFile.pUploadCont.appendChild(d.oNewFile.pUploadInput)}})();break}}})};a.file_input.prototype.AddNewFileBlock=function(){var b=[];if(!this.multiple){b=a.clone(this.arConfig.menuNew);b.push({SEPARATOR:true})}b.push({TEXT:a.message("ADM_FILE_CLEAR"),ONCLICK:a.proxy(this.ClearNewFile,this),GLOBAL_ICON:"adm-menu-delete"});var c=this.DisplayFileBlock(b);this.pCont.appendChild(c.pFileCont);if(this.multiple){a.addClass(c.pFileCont,"adm-input-cont-bordered")}return c};a.file_input.prototype.OnUploadInputChange=function(h){var c,b,g,j=h.target||h.srcElement,n="",m=j.files||[j.value];m=m[0];b=m.name||m;c=Math.max(b.lastIndexOf("/"),b.lastIndexOf("\\"));if(c>0){b=b.substring(c+1,b.length)}this.curFileIndex=false;if(this.arConfig.fileExists&&this.arConfig.files&&!this.multiple){this.DeleteFile(false);this.oNewFile.pTextInput.style.display="none";this.oNewFile.pUploadLabel.innerHTML=a.util.htmlspecialchars(b);this.oNewFile.pUploadCont.style.display="";this.SetInputName(this.oNewFile.pUploadInput,this.GetInputName("upload"));this.SetHiddenInputName(0,"");var l=a.findChild(a(this.id+"_file_cont_0"),{tagName:"input",attr:{name:this.GetInputName("del")}});if(l){a.cleanNode(l,true)}g=this.arConfig.files&&this.arConfig.files[0]?this.arConfig.files[0]:false;if(g&&g.DESCRIPTION!==""){n=g.DESCRIPTION}this.ShowFileDescription(this.oNewFile,n)}else{var q;if(!this.multiple&&this.newFileCount>0){q=this.ClearNames(this.oFiles[0])}else{if(this.multiple){this.ClearNewFile()}q=this.AddNewFileBlock();var o=q.pUploadInput;q.pUploadInput=this.oNewFile.pUploadInput;this.oNewFile.pUploadInput=o;this.oNewFile.pUploadCont.appendChild(this.oNewFile.pUploadInput);q.pUploadCont.appendChild(q.pUploadInput)}q.pTextInput.style.display="none";q.pUploadLabel.innerHTML=a.util.htmlspecialchars(b);q.pUploadCont.style.display="";this.SetInputName(q.pUploadInput,this.GetInputName("upload"));if(this.multiple){this.curFileIndex=this.newFileCount}if(this.multiple||!this.newFileCount){this.PushToFiles(q)}var f=parseInt(this.GetCurrentFile(),10);this.SetHiddenInputName(f,"");if(!isNaN(f)&&this.multiple){this.DeleteFile(false);var k=a(this.id+"_menu_"+f);k.style.display="none";q.pMenu.style.display="inline-block";q.pMenu.setAttribute("data-bx-meta",f);g=this.arConfig.files&&this.arConfig.files[f]?this.arConfig.files[f]:false;var i=a(this.id+"_file_cont_"+f);if(g){if(g.DESCRIPTION!==""){n=g.DESCRIPTION}this.SetInputName(q.pUploadInput,g.INPUT_NAME);this.SetInputName(q.pTextInput,"");this.SetInputName(q.pDescInput,g.DESC_NAME)}i.appendChild(q.pFileCont)}this.ShowFileDescription(q,n);if(this.multiple){this.pCont.appendChild(this.oNewFile.pFileCont)}if(!this.CheckNewFileState()){this.HideNewFileState()}}a.onCustomEvent("onMenuItemSelected");if(a.browser.IsIE()){a(this.id+"_ie_bogus_container").innerHTML=a(this.id+"_ie_bogus_container").innerHTML}if(a.browser.IsIE()||a.browser.IsIE11()){var d=this.oNewFile.pFileCont.parentNode.appendChild(a.create("INPUT",{props:{type:"text",className:"adm-input-fake-inp"}}));d.focus();d.select()}};a.file_input.prototype.OnSelectFromMedialib=function(d){var e="";this.curFileIndex=false;if(this.arConfig.fileExists&&this.arConfig.files&&!this.multiple){this.DeleteFile(false);this.oNewFile.pTextInput.value=d.src||"";this.oNewFile.pTextInput.style.display="";this.oNewFile.pUploadCont.style.display="none";this.SetInputName(this.oNewFile.pTextInput,this.GetInputName("medialib"));this.FocusInput(this.oNewFile.pTextInput);this.oNewFile.pDescInput.value=d.description||"";this.SetHiddenInputName(0,"");var i=a.findChild(a(this.id+"_file_cont_0"),{tagName:"input",attr:{name:this.GetInputName("del")}});if(i){a.cleanNode(i,true)}e=d.description||"";var c=this.arConfig.files&&this.arConfig.files[0]?this.arConfig.files[0]:false;if(c&&c.DESCRIPTION!==""){e=c.DESCRIPTION}this.ShowFileDescription(this.oNewFile,e)}else{var h;if(!this.multiple&&this.newFileCount>0){h=this.ClearNames(this.oFiles[0])}else{h=this.AddNewFileBlock()}h.pTextInput.value=d.src||"";h.pTextInput.style.display="";h.pUploadCont.style.display="none";this.SetInputName(h.pTextInput,this.GetInputName("medialib"));this.FocusInput(h.pTextInput);e=d.description||"";if(this.multiple){this.curFileIndex=this.newFileCount}if(this.multiple||!this.newFileCount){this.PushToFiles(h)}var g=parseInt(this.GetCurrentFile(),10);if(isNaN(g)&&!this.multiple){this.SetHiddenInputName(0,"")}else{this.SetHiddenInputName(g,"")}if(!isNaN(g)&&this.multiple){this.DeleteFile(false);var f=a(this.id+"_menu_"+g);f.style.display="none";h.pMenu.style.display="inline-block";h.pMenu.setAttribute("data-bx-meta",g);var c=this.arConfig.files&&this.arConfig.files[g]?this.arConfig.files[g]:false,b=a(this.id+"_file_cont_"+g);if(c){if(c.DESCRIPTION!==""){e=c.DESCRIPTION}this.SetInputName(h.pTextInput,c.INPUT_NAME);this.SetInputName(h.pDescInput,c.DESC_NAME)}b.appendChild(h.pFileCont)}this.ShowFileDescription(h,e);if(this.multiple){this.pCont.appendChild(this.oNewFile.pFileCont)}if(!this.CheckNewFileState()){this.HideNewFileState()}}};a.file_input.prototype.OnSelectFromFileDialog=function(h){var d="",c;this.curFileIndex=false;if(this.arConfig.fileExists&&this.arConfig.files&&!this.multiple){this.DeleteFile(false);this.oNewFile.pTextInput.value=h||"";this.oNewFile.pTextInput.style.display="";this.oNewFile.pUploadCont.style.display="none";this.SetInputName(this.oNewFile.pTextInput,this.GetInputName("file_dialog"));this.FocusInput(this.oNewFile.pTextInput);this.SetHiddenInputName(0,"");var i=a.findChild(a(this.id+"_file_cont_0"),{tagName:"input",attr:{name:this.GetInputName("del")}});if(i){a.cleanNode(i,true)}c=this.arConfig.files&&this.arConfig.files[0]?this.arConfig.files[0]:false;if(c&&c.DESCRIPTION!==""){d=c.DESCRIPTION}this.ShowFileDescription(this.oNewFile,d)}else{var g;if(!this.multiple&&this.newFileCount>0){g=this.ClearNames(this.oFiles[0])}else{g=this.AddNewFileBlock()}g.pTextInput.value=h||"";g.pTextInput.style.display="";g.pUploadCont.style.display="none";this.SetInputName(g.pTextInput,this.GetInputName("file_dialog"));this.FocusInput(g.pTextInput);if(this.multiple){this.curFileIndex=this.newFileCount}if(this.multiple||!this.newFileCount){this.PushToFiles(g)}var f=parseInt(this.GetCurrentFile(),10);if(isNaN(f)&&!this.multiple){this.SetHiddenInputName(0,"")}else{this.SetHiddenInputName(f,"")}c=false;if(!isNaN(f)&&this.multiple){this.DeleteFile(false);var e=a(this.id+"_menu_"+f);e.style.display="none";g.pMenu.style.display="inline-block";g.pMenu.setAttribute("data-bx-meta",f);c=this.arConfig.files&&this.arConfig.files[f]?this.arConfig.files[f]:false;var b=a(this.id+"_file_cont_"+f);if(c){this.ShowFileDescription(g,c.DESCRIPTION||"");this.SetInputName(g.pTextInput,c.INPUT_NAME);this.SetInputName(g.pDescInput,c.DESC_NAME);g.pDescInput.value=c.DESCRIPTION||""}b.appendChild(g.pFileCont)}if(!c){this.ShowFileDescription(g,"")}if(this.multiple){this.pCont.appendChild(this.oNewFile.pFileCont)}if(!this.CheckNewFileState()){this.HideNewFileState()}}};a.file_input.prototype.OnCloudInputChange=function(){var h=this.oNewFile.pTextInput.value;var d="";this.curFileIndex=false;if(this.arConfig.fileExists&&this.arConfig.files&&!this.multiple){this.DeleteFile(false);this.oNewFile.pTextInput.value=h||"";this.oNewFile.pTextInput.style.display="";this.oNewFile.pUploadCont.style.display="none";this.SetInputName(this.oNewFile.pTextInput,this.GetInputName("cloud"));this.SetHiddenInputName(0,"");var i=a.findChild(a(this.id+"_file_cont_0"),{tagName:"input",attr:{name:this.GetInputName("del")}});if(i){a.cleanNode(i,true)}var c=this.arConfig.files&&this.arConfig.files[0]?this.arConfig.files[0]:false;if(c&&c.DESCRIPTION!==""){d=c.DESCRIPTION}this.ShowFileDescription(this.oNewFile,d)}else{this.oNewFile.pTextInput.value="";var g;if(!this.multiple&&this.newFileCount>0){g=this.ClearNames(this.oFiles[0])}else{g=this.AddNewFileBlock()}g.pTextInput.value=h||"";g.pTextInput.style.display="";g.pUploadCont.style.display="none";this.SetInputName(g.pTextInput,this.GetInputName("cloud"));if(this.multiple){this.curFileIndex=this.newFileCount}if(this.multiple||!this.newFileCount){this.PushToFiles(g)}var f=parseInt(this.GetCurrentFile(),10);if(isNaN(f)&&!this.multiple){this.SetHiddenInputName(0,"")}else{this.SetHiddenInputName(f,"")}if(!isNaN(f)&&this.multiple){this.DeleteFile(false);var e=a(this.id+"_menu_"+f);e.style.display="none";g.pMenu.style.display="inline-block";g.pMenu.setAttribute("data-bx-meta",f);var c=this.arConfig.files&&this.arConfig.files[f]?this.arConfig.files[f]:false,b=a(this.id+"_file_cont_"+f);if(c){if(c.DESCRIPTION!==""){d=c.DESCRIPTION}this.SetInputName(g.pTextInput,c.INPUT_NAME);this.SetInputName(g.pDescInput,c.DESC_NAME)}b.appendChild(g.pFileCont)}this.ShowFileDescription(g,d);if(this.multiple){this.pCont.appendChild(this.oNewFile.pFileCont)}if(!this.CheckNewFileState()){this.HideNewFileState()}}this.oNewFile.pTextInput.onchange=null};a.file_input.prototype.ShowFileDescription=function(c,b){if(this.arConfig.showDesc){c.pDesc.style.display="";this.SetInputName(c.pDescInput,this.GetInputName("desc"));a.removeClass(c.pDesc,"adm-input-file-show-desc");c.pDescInput.value=b||"";if(b){a.addClass(c.pDesc,"adm-input-file-show-desc")}else{a.removeClass(c.pDesc,"adm-input-file-show-desc")}}};a.file_input.prototype.DisplayFileBlock=function(c){var i=a.create("DIV",{props:{className:"adm-input-file-new"}}),d=i.appendChild(a.create("SPAN",{props:{className:"adm-input-file"}})),e=d.appendChild(a.create("SPAN",{text:a.message("ADM_FILE_ADD")})),f=d.appendChild(a.create("INPUT",{props:{type:"file",className:"adm-designed-file"}}));i.appendChild(document.createTextNode(" "));a.bind(f,"change",a.proxy(this.OnUploadInputChange,this));var g=this;a.bind(f,"mousedown",function(){var m=a.findParent(this,{className:"adm-input-file-new"},function(o){return(a.hasClass(o,"adm-input-file-ext-class")||a.hasClass(o,"adm-input-file-control"))});if(m){var n=a.findChild(m,{className:"add-file-popup-btn"});if(n&&n.getAttribute("data-bx-meta")!==null){g.SetCurrentFile(n.getAttribute("data-bx-meta"))}}});var h=i.appendChild(a.create("INPUT",{props:{type:"text",className:"adm-input",size:this.inputSize},style:{display:"none"}}));var k=i.appendChild(a.create("SPAN",{props:{className:"adm-btn add-file-popup-btn"}}));k.setAttribute("data-bx-meta","new");this.SetOpenerMenu(k,c||this.arConfig.menuNew);var b=i.appendChild(a.create("SPAN",{props:{className:"adm-input-file-desc"},style:{display:"none"}})),l=b.appendChild(a.create("SPAN",{props:{className:"adm-input-file-desc-link"},text:a.message("ADM_FILE_ADD_DESC")})),j=b.appendChild(a.create("INPUT",{props:{type:"text",className:"adm-input",size:this.inputSize,placeholder:a.message("ADM_FILE_DESC")}}));l.onclick=function(){a.addClass(b,"adm-input-file-show-desc");a.defer(function(){a.focus(j)})()};if(!this.arConfig.useUpload){d.style.display="none";h.style.display=""}return{pFileCont:i,pUploadCont:d,pUploadLabel:e,pUploadInput:f,pTextInput:h,pDesc:b,pDescInput:j,pMenu:k}};a.file_input.prototype.DeleteFile=function(e){var g=parseInt(this.GetCurrentFile(),10),d=this.arConfig.files&&this.arConfig.files[g]?this.arConfig.files[g]:false,b=a(this.id+"_file_cont_"+g);if(!this.arConfig.useUpload){this.SetHiddenInputName(g,"")}if(b){if(e){b.appendChild(a.create("INPUT",{props:{id:this.id+"_file_del_"+g,type:"hidden",value:"Y",name:this.GetInputName("del",d)}}))}a.addClass(b,"adm-input-file-deleted")}if(this.multiple){var f=a(this.id+"_menu_"+g);f.style.display="inline-block";f.OPENER.SetMenu([{TEXT:a.message("ADM_FILE_CANCEL_DEL"),ONCLICK:a.proxy(this.CancelDelete,this)}])}var h=a(this.id+"_file_del_lbl_"+g);if(h){h.style.marginLeft=(-parseInt(h.offsetWidth/2))+"px";h.style.marginTop=(-parseInt(h.offsetHeight/2))+"px"}if(this.oNewFile){this.oNewFile.pFileCont.style.display="";if(!this.arConfig.useUpload){this.SetInputName(this.oNewFile.pTextInput,this.GetInputName("first_input"))}if(e!==false&&!this.multiple){var c=a.clone(this.arConfig.menuNew);c.push({SEPARATOR:true});c.push({TEXT:a.message("ADM_FILE_CANCEL_DEL"),ONCLICK:a.proxy(this.CancelDelete,this)});this.oNewFile.pMenu.OPENER.SetMenu(c)}}};a.file_input.prototype.CancelDelete=function(){var g=parseInt(this.GetCurrentFile(),10);if(isNaN(g)&&!this.multiple){g=0}var d=this.arConfig.files&&this.arConfig.files[g]?this.arConfig.files[g]:false,b=a(this.id+"_file_cont_"+g),e=a(this.id+"_file_hidden_value_"+g);if(e){this.SetInputName(e,d.INPUT_NAME||this.GetInputName("first_input"))}if(b){a.removeClass(b,"adm-input-file-deleted");var h=a.findChild(b,{tagName:"input",attr:{name:this.GetInputName("del",d)}});if(h){a.cleanNode(h,true)}if(d.FILE_NOT_FOUND){var f=a(this.id+"_menu_"+g);if(f&&this.arConfig.showDel){f.OPENER.SetMenu([{TEXT:a.message("ADM_FILE_DELETE"),ONCLICK:a.proxy(this.DeleteFile,this),GLOBAL_ICON:"adm-menu-delete"}])}}else{if(this.multiple){var f=a(this.id+"_menu_"+g);var c=a.clone(this.arConfig.menuExist);if(this.arConfig.showDel||this.arConfig.showDesc){c.push({SEPARATOR:true})}if(this.arConfig.showDel){c.push({TEXT:a.message("ADM_FILE_DELETE"),ONCLICK:a.proxy(this.DeleteFile,this),GLOBAL_ICON:"adm-menu-delete"})}if(this.arConfig.showDesc&&d.DESCRIPTION==""){c.push({TEXT:a.message("ADM_FILE_ADD_DESC"),ONCLICK:a.proxy(this.AddDescription,this),GLOBAL_ICON:"adm-menu-add-desc"})}f.OPENER.SetMenu(c)}}if(this.oNewFile&&!this.multiple){this.oNewFile.pFileCont.style.display="none";this.SetInputName(this.oNewFile.pUploadInput,"");this.SetInputName(this.oNewFile.pTextInput,"")}}};a.file_input.prototype.AddDescription=function(){var d=parseInt(this.GetCurrentFile(),10),b=a(this.id+"_file_desc_"+d);if(b){b.style.display="";var c=a.findChild(b,{tag:"input"});if(c){a.focus(c)}}};a.file_input.prototype.GetCurrentFile=function(){return this.currentFileId};a.file_input.prototype.SetCurrentFile=function(b){this.currentFileId=b};a.file_input.prototype.CheckNewFileState=function(){if(!this.multiple||(this.maxCount>0&&this.fileCount>=this.maxCount)){return false}return true};a.file_input.prototype.HideNewFileState=function(){this.oNewFile.pFileCont.style.display="none";this.ClearNames(this.oNewFile)};a.file_input.prototype.ClearNames=function(b){b.pUploadInput.name="";b.pTextInput.name="";b.pDescInput.name="";b.pUploadInput.removeAttribute("name");b.pTextInput.removeAttribute("name");b.pDescInput.removeAttribute("name");return b};a.file_input.prototype.GetInputName=function(d,c){var b="";if(this.multiple){if(d=="del"||d=="desc"){if(d=="del"){b=(c&&c.DEL_NAME)?c.DEL_NAME:this.arConfig.delName}else{if(d=="desc"){b=(c&&c.DESC_NAME)?c.DESC_NAME:this.arConfig.descName}}}else{b=this.arConfig.inputNameTemplate}if(this.curFileIndex===false){b=b.replace("#IND#",this.newFileCount)}else{if(this.curFileIndex===undefined){b=b.replace("#IND#","new")}else{b=b.replace("#IND#",this.curFileIndex)}}}else{if(d=="first_input"){if(this.arConfig.useUpload){d="upload"}if(this.arConfig.useMedialib){d="medialib"}else{if(this.arConfig.useFileDialog){d="file_dialog"}else{if(this.arConfig.useCloud){d="cloud"}}}}if(this.arConfig.inputs&&this.arConfig.inputs[d]){b=this.arConfig.inputs[d].NAME}}if(d=="del"&&!b){b=this.arConfig.delName}if(d=="desc"&&!b){b=this.arConfig.descName}return b};a.file_input.prototype.ClearNewFile=function(){var f=this.GetCurrentFile();if(this.multiple){this.CancelDelete();var e=parseInt(this.GetCurrentFile(),10),b=a(this.id+"_file_cont_"+e);if(b){var g=a.findChild(b,{className:"adm-input-file-new"});if(g){a.cleanNode(g,true)}var d=a(this.id+"_menu_"+e);d.style.display="inline-block"}}if(!f||f.substr(0,4)!="new_"){return}var c=parseInt(f.substr(4),10);if(isNaN(c)||!this.oFiles[c]){return}this.newFileCount--;this.fileCount=this.arConfig.files.length+this.newFileCount-1;this.oNewFile.pFileCont.style.display="";this.oFiles[c].pFileCont.parentNode.removeChild(this.oFiles[c].pFileCont)};a.file_input.prototype.PushToFiles=function(b){this.oFiles.push(b);this.newFileCount++;this.fileCount=this.arConfig.files.length+this.newFileCount-1;b.pMenu.setAttribute("data-bx-meta","new_"+(this.oFiles.length-1))};a.file_input.prototype.SetInputName=function(c,b){c.name=b;c.setAttribute("name",b)};a.file_input.prototype.ShowPath=function(){this.OnSelectFromFileDialog("")};a.file_input.prototype.FocusInput=function(b){if(b){a.defer(function(){if(b){a.focus(b)}})()}};a.file_input.prototype.SetHiddenInputName=function(d,c){if(!isNaN(d)){var b=a(this.id+"_file_hidden_value_"+(d||0));if(b){this.SetInputName(b,c||"")}}}})();