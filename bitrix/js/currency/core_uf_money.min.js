(function(){BX.namespace("BX.Main.UF");if(typeof BX.Main.UF.TypeMoney!=="undefined"){return}BX.Main.UF.TypeMoney=function(){};BX.extend(BX.Main.UF.TypeMoney,BX.Main.UF.BaseType);BX.Main.UF.TypeMoney.USER_TYPE_ID="money";BX.Main.UF.TypeMoney.prototype.addRow=function(d,a){var c=a.previousSibling;var b=this.getClone(c,d);c.parentNode.insertBefore(b,a)};BX.Main.UF.TypeMoney.prototype.getClone=function(c,k){var j=BX.Main.UF.TypeMoney.superclass.getClone.apply(this,arguments);var d=BX.findChildrenByClassName(j,"money-editor-currency-selector-wrap",true);var b=d[0];BX.cleanNode(b);var a=BX.findChildren(j,{tagName:/INPUT|SELECT/i},true);a[0].value="";a[1].value="";var f=BX.message("CURRENCY");var g=[];var i=null;for(var h in f){if(f.hasOwnProperty(h)){var m={NAME:f[h].NAME,VALUE:h};g.push(m);if(i===null){i=m}}}var e=new BX.Currency.MoneyInput({controlId:l,input:a[1],resultInput:a[0],currency:i.VALUE});var l=Math.random();b.appendChild(BX.decl({block:"main-ui-select",name:l,items:g,value:i,params:{fieldName:l,isMulti:false},valueDelete:false}));BX.addCustomEvent(window,"UI::Select::change",function(n,p){if(n.params.fieldName===l){var o=JSON.parse(n.node.getAttribute("data-value"));if(!!o){e.setCurrency(o.VALUE)}}});return j};BX.Main.UF.TypeMoney.prototype.focus=function(c){var b=this.getNode(c);if(!BX.isNodeInDom(b)){console.error("Node for field "+c+" is already removed from DOM")}var a=BX.findChild(b,{tagName:"INPUT",attribute:{type:"text"}},true);if(a){BX.focus(a)}};BX.Main.UF.Factory.setTypeHandler(BX.Main.UF.TypeMoney.USER_TYPE_ID,BX.Main.UF.TypeMoney)})();