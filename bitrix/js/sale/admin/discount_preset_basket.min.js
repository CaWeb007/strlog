BX.namespace("BX.Sale.Admin.PresetBasket");BX.Sale.Admin.PresetBasket=function(b){this.products=b.products;this.productsOffersSkuParams={};if(b.productsOffersSkuParams){for(var a in b.productsOffersSkuParams){if(b.productsOffersSkuParams.hasOwnProperty(a)){this.setProductsOffersSkuParams(a,b.productsOffersSkuParams[a])}}}BX.Sale.Admin.OrderBasket.call(this,b)};BX.Sale.Admin.PresetBasket.prototype=Object.create(BX.Sale.Admin.OrderBasketEdit.prototype);BX.Sale.Admin.PresetBasket.prototype.getFieldsUpdaters=function(){return{BASKET:{context:this,callback:this.setBasket}}};BX.Sale.Admin.OrderBasketEdit.prototype.setBasket=function(c){if(!c){return}var b,a;if(c.IBLOCKS_SKU_PARAMS){for(b in c.IBLOCKS_SKU_PARAMS){if(c.IBLOCKS_SKU_PARAMS.hasOwnProperty(b)){this.setIblocksSkuParams(b,c.IBLOCKS_SKU_PARAMS[b])}}}if(c.IBLOCKS_SKU_PARAMS_ORDER){for(b in c.IBLOCKS_SKU_PARAMS_ORDER){if(c.IBLOCKS_SKU_PARAMS_ORDER.hasOwnProperty(b)){this.setIblocksSkuParamsOrder(b,c.IBLOCKS_SKU_PARAMS_ORDER[b])}}}if(c.PRODUCTS_OFFERS_SKU){for(b in c.PRODUCTS_OFFERS_SKU){if(c.PRODUCTS_OFFERS_SKU.hasOwnProperty(b)){this.setProductsOffersSkuParams(b,c.PRODUCTS_OFFERS_SKU[b])}}}if(c.PRICES_UPDATED&&c.PRICES_UPDATED.length>0){for(b in c.PRICES_UPDATED){if(c.PRICES_UPDATED.hasOwnProperty(b)){this.updateProductPriceCell(c.ITEMS[b])}}for(b in c.ITEMS){if(c.ITEMS.hasOwnProperty(b)){this.updateProductDiscountsCell(c.ITEMS[b])}}if(c.NEW_ITEM_BASKET_CODE&&c.ITEMS[c.NEW_ITEM_BASKET_CODE]){this.productSet(c.ITEMS[c.NEW_ITEM_BASKET_CODE],true)}}else{if(c.LIGHT&&c.LIGHT=="Y"){for(b in this.products){if(!this.products.hasOwnProperty(b)){continue}if(typeof c.ITEMS[b]=="undefined"){this.productDelete(b)}}if(c.ADDED_PRODUCTS){for(b in c.ADDED_PRODUCTS){if(c.ADDED_PRODUCTS.hasOwnProperty(b)){this.productSet(c.ITEMS[c.ADDED_PRODUCTS[b]],true);delete (c.ITEMS[c.ADDED_PRODUCTS[b]])}}}if(c.ITEMS){for(b in c.ITEMS){if(c.ITEMS.hasOwnProperty(b)){this.productUpdateLight(c.ITEMS[b])}}}}else{if(c.ITEMS_ORDER&&c.ITEMS_ORDER.length){for(b in this.products){if(this.products.hasOwnProperty(b)){this.productDelete(b)}}for(b=0,a=c.ITEMS_ORDER.length-1;b<=a;b++){this.productSet(c.ITEMS[c.ITEMS_ORDER[b]],true)}}}}if(!c.ITEMS||!c.ITEMS_ORDER||!c.ITEMS_ORDER.length){this.showEmptyRow()}this.hideLoadingRow()};BX.Sale.Admin.PresetBasket.prototype.createFieldPrice=function(a,j,e){var c;if(typeof(this.customPrices[a])=="undefined"){c=j.PRICE}else{c=this.customPrices[a]}var f=BX.create("span",{props:{className:"formated_price",id:this.idPrefix+"sale-order-basket-product-"+a+"-formatted_price"},html:BX.Sale.Admin.OrderEditPage.currencyFormat(c),style:{whiteSpace:"nowrap"}}),b=BX.create("span",{props:{className:"default_price_product"},children:[f]}),i=BX.create("span",{text:""}),h=BX.create("div",{props:{className:"base_price",id:this.idPrefix+"sale-order-basket-product-"+a+"-base_price"},style:{display:((parseFloat(j.BASE_PRICE)>0&&parseFloat(j.PRICE)!=parseFloat(j.BASE_PRICE))?"":"none")},children:[BX.create("span",{html:BX.Sale.Admin.OrderEditPage.currencyFormat(j.BASE_PRICE)})]}),d=BX.create("div",{props:{className:"base_price_title"},style:{display:(((j.CUSTOM_PRICE&&j.CUSTOM_PRICE=="Y")||j.NOTES)?"":"none")},text:((j.CUSTOM_PRICE&&j.CUSTOM_PRICE=="Y")?BX.message("SALE_ORDER_BASKET_BASE_CATALOG_PRICE"):j.NOTES)}),g=BX.create("span",{props:{className:"edit_price"},children:[b,i,h,d]});return g};