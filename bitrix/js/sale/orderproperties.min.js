"use strict";BX.namespace("BX.Sale.PropertyCollection");BX.Sale.PropertyCollection=(function(){var e=function(h){var g=0;return function(){return h[g++]}};var d=function(h,g){this.getId=function(){return h.ID};this.getName=function(){return h.NAME};this.getPersonTypeId=function(){return h.PERSON_TYPE_ID};this.getIterator=function(){return e(g)}};var c=BX.Sale.Input.Manager.Editor;var b=function(j,i){var g=!!i?"ORDER_PROP_"+j.ID:"PROPERTIES["+j.ID+"]";var h=(j.TYPE=="LOCATION"&&!!i)?{}:new c(g,j);h.getId=function(){return j.ID};h.getName=function(){return j.NAME};h.getType=function(){return j.TYPE};h.isRequired=function(){return j.REQUIRED==="Y"};h.isMultiple=function(){return j.MULTIPLE==="Y"};h.getGroupId=function(){return j.PROPS_GROUP_ID};h.getDescription=function(){return j.DESCRIPTION};h.getPersonTypeId=function(){return j.PERSON_TYPE_ID};h.getAltLocation=function(){return j.INPUT_FIELD_LOCATION};h.getSettings=function(){return j};return h};var f=["IS_EMAIL","IS_PAYER","IS_LOCATION","IS_LOCATION4TAX","IS_PROFILE_NAME","IS_ZIP","IS_PHONE","IS_ADDRESS"],a=f.length;return function(n){var l=[],t=[],h={};var r,k,o,w,m,u,q={},j=[],p,v,s,g,x=!!n.publicMode;r=n.groups;for(o in r){if(!r.hasOwnProperty(o)){continue}w=r[o];m=w.ID;u=[];q[m]=u;l.push(new d(w,u))}r=n.properties;for(o in r){if(!r.hasOwnProperty(o)){continue}w=r[o];p=w.ID;m=w.PROPS_GROUP_ID;v=b(w,x);h[p]=v;t.push(v);if(q.hasOwnProperty(m)){q[m].push(v)}else{throw"undefined group"}if(w.TYPE=="LOCATION"&&w.INPUT_FIELD_LOCATION&&!x){j.push(v)}for(s=0;s<a;s++){g=f[s];if(w[g]=="Y"){h[g]=v}}}k=j.length;for(o=0;o<k;o++){j[o].addEvent("change",function(D,z){var B=false,y=z.getValuePath(),A=0,C=y.length;for(;A<C;A++){if(y[A].TYPE=="CITY"){B=true;break}}if(!!h[z.getAltLocation()]){h[z.getAltLocation()].setDisabled(B)}})}n=r=w=u=q=j=v=null;this.getIterator=function(){return e(t)};this.getGroupIterator=function(){return e(l)};this.getById=function(i){return h[i]};this.getUserEmail=function(){return h.IS_EMAIL};this.getPayerName=function(){return h.IS_PAYER};this.getDeliveryLocation=function(){return h.IS_LOCATION};this.getTaxLocation=function(){return h.IS_LOCATION4TAX};this.getProfileName=function(){return h.IS_PROFILE_NAME};this.getDeliveryLocationZip=function(){return h.IS_ZIP};this.getPhone=function(){return h.IS_PHONE};this.getAddress=function(){return h.IS_ADDRESS}}})();