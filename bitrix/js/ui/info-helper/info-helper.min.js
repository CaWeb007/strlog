BX.namespace("BX.UI");BX.UI.InfoHelper={frameUrlTemplate:"",frameNode:null,popupLoader:null,frameUrl:"",init:function(a){this.frameUrlTemplate=a.frameUrlTemplate||"";BX.bind(window,"message",BX.proxy(function(b){if(!!b.origin&&b.origin.indexOf("bitrix")===-1){return}if(!b.data||typeof(b.data)!=="object"){return}if(b.data.action==="ClosePage"){this.close()}if(b.data.action==="openPage"){window.location.href=this.frameUrl}if(b.data.action==="openPageInNewTab"){window.open(this.frameUrl,"_blank")}},this))},show:function(a){if(this.isOpen()){return}if(!a){return}this.frameUrl=this.frameUrlTemplate.replace(/code/,a);if(this.getFrame().src!==this.frameUrl){this.getFrame().src=this.frameUrl}BX.SidePanel.Instance.open(this.getSliderId(),{contentCallback:function(b){var c=new BX.Promise();c.fulfill(this.getContent());return c}.bind(this),width:700,loader:"default-loader",cacheable:false,data:{rightBoundary:0},events:{onCloseComplete:function(){BX.UI.InfoHelper.close()},onLoad:function(){BX.UI.InfoHelper.showFrame()},onClose:function(){BX.UI.InfoHelper.frameNode.contentWindow.postMessage({action:"onCloseWidget"},"*")}}})},close:function(){var a=this.getSlider();if(a){a.close()}},getContent:function(){if(this.content){return this.content}this.content=BX.create("div",{attrs:{className:"info-helper-container",id:"info-helper-container"},children:[this.getLoader(),this.getFrame()]});return this.content},getFrame:function(){if(this.frameNode){return this.frameNode}this.frameNode=BX.create("iframe",{attrs:{className:"info-helper-panel-iframe",src:"about:blank"}});return this.frameNode},showFrame:function(){setTimeout(function(){this.getFrame().classList.add("info-helper-panel-iframe-show")}.bind(this),600)},getLoader:function(){if(this.popupLoader){return this.popupLoader}var a=new BX.Loader({target:BX("info-helper-container"),size:100});a.show();this.popupLoader=a.data.container;return this.popupLoader},getSliderId:function(){return"ui:info_helper"},getSlider:function(){return BX.SidePanel.Instance.getSlider(this.getSliderId())},isOpen:function(){return this.getSlider()&&this.getSlider().isOpen()}};