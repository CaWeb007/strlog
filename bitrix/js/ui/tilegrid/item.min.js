(function(){BX.namespace("BX.TileGrid");BX.TileGrid.Item=function(a){this.id=a.id;this.isDraggable=a.isDraggable||false;this.isDroppable=a.isDroppable||false;this.name=a.name;this.type=a.type;this.layout={container:null,checkbox:null};this.gridTile=null;this.dblClickDelay=180};BX.TileGrid.Item.prototype={bindEvents:function(){BX.addCustomEvent(window,"BX.TileGrid.Grid:lastSelectedItem",function(){})},getId:function(){return this.id},render:function(){var b=null;var a=false;this.layout.container=BX.create("div",{attrs:{className:this.gridTile.itemHeight?"ui-grid-tile-item ui-grid-tile-item-fixed-height":"ui-grid-tile-item"},style:{height:this.gridTile.itemHeight?this.gridTile.itemHeight+"px":null,margin:this.gridTile.getTileMargin()?this.gridTile.getTileMargin()+"px":null},dataset:{id:this.id},children:[this.gridTile.checkBoxing?this.getCheckBox():null,this.layout.content=BX.create("div",{attrs:{className:"ui-grid-tile-item-content"},children:[this.getContent()]})],events:{dblclick:function(c){b&&clearTimeout(b);a=true;this.handleDblClick.call(this,c);this.gridTile.resetSetMultiSelectMode();this.gridTile.resetSelectAllItems();this.gridTile.resetFromToItems()}.bind(this),click:function(c){b=setTimeout(function(){if(!a){this.handleClick.call(this,c)}a=false}.bind(this),this.dblClickDelay)}.bind(this)}});if(this.isDraggable){this.gridTile.dragger.registerItem(this.layout.container)}if(this.isDroppable){this.gridTile.dragger.registerDrop(this.layout.container)}return this.layout.container},isVisibleItem:function(){var b=this.layout.container.getBoundingClientRect();var a=document.body.getBoundingClientRect();if(b.top<0||b.bottom<0){return false}return a.height>b.top&&a.height>=b.bottom},afterRender:function(){},handleClick:function(b){this.focusItem();this.resetFocusItem();var a=this.gridTile;if(a.isKeyControlKey()){a.setMultiSelectMode();a.checkItem(a.getFirstCurrentItem())}if(!a.isLastSelectedItem()){if(!a.isMultiSelectMode()){a.unSelectItem(a.getCurrentItem())}}if(!a.getFirstCurrentItem()){a.setFirstCurrentItem(this)}if(a.isKeyPressedShift()){a.selectFromToItems(a.getFirstCurrentItem(),this);return}if(a.isMultiSelectMode()||a.isKeyPressedSelectAll()){if(!this.checked){a.checkItem(this);a.selectItem(this);a.setCurrentItem(this);a.setFirstCurrentItem(this)}else{a.unCheckItem(this);a.unSelectItem(this);if(a.isLastSelectedItem()){a.resetSetMultiSelectMode()}}return}if(this.selected){a.unSelectItem(this)}else{a.selectItem(this);a.unCheckItem(this);a.setCurrentItem(this);a.setFirstCurrentItem(this);if(a.isLastSelectedItem()){a.resetSetMultiSelectMode()}}},handleDblClick:function(a){},handleEnter:function(){},getContainer:function(){return this.layout.container},getCheckBox:function(){return this.layout.checkbox=BX.create("div",{props:{className:"ui-grid-tile-item-checkbox"},events:{click:function(a){if(this.gridTile.isLastSelectedItem()){this.gridTile.resetSetMultiSelectMode()}if(this!==this.gridTile.getCurrentItem()&&this.gridTile.isMultiSelectMode()){this.gridTile.checkItem(this.gridTile.getCurrentItem());this.gridTile.selectItem(this.gridTile.getCurrentItem())}this.gridTile.checkItem(this);this.gridTile.selectItem(this);this.gridTile.setCurrentItem(this);this.gridTile.setFirstCurrentItem(this);if(!this.gridTile.isLastSelectedItem()){if(this.gridTile.isMultiSelectMode()){this.gridTile.checkItem(this.gridTile.getFirstCurrentItem())}}this.focusItem();this.resetFocusItem();a.stopPropagation()}.bind(this)}})},getContent:function(){return null},focusItem:function(){this.layout.container.setAttribute("tabindex","1");this.layout.container.focus()},resetFocusItem:function(){this.layout.container.removeAttribute("tabindex")},removeNode:function(b){b=b!==false;var a=this.layout.container;if(!a.parentNode){return}if(!b){a.parentNode.removeChild(a);return}a.classList.add("ui-grid-tile-item-to-fade");a.style.width=a.offsetWidth+"px";BX.bind(a,"transitionend",function(){a.classList.add("ui-grid-tile-item-to-remove")});setTimeout(function(){a.parentNode.removeChild(a)},500)},animateNode:function(){var a=this.layout.container;a.classList.add("ui-grid-tile-item-to-receive");setTimeout(function(){a.classList.remove("ui-grid-tile-item-to-receive")},500)}}})();