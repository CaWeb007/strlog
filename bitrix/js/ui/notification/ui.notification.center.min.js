(function(){BX.namespace("BX.UI.Notification");var a=null;Object.defineProperty(BX.UI.Notification,"Center",{enumerable:false,get:function(){if(a===null){a=new BX.UI.Notification.Manager({})}return a}});BX.UI.Notification.Manager=function(){this.stacks=Object.create(null);this.balloons=Object.create(null);this.balloonDefaults={};this.stackDefaults={};this.defaultPosition=BX.UI.Notification.Position.TOP_RIGHT;BX.addCustomEvent(BX.UI.Notification.Event.getFullName("onClose"),this.handleBalloonClose.bind(this))};BX.UI.Notification.Manager.prototype={notify:function(d){d=BX.type.isPlainObject(d)?d:{};var f=this.getBalloonById(d.id)||this.getBalloonByCategory(d.category);if(f){f.update(d);f.show();f.blink();return}var b=null;if(d.stack instanceof BX.UI.Notification.Stack){b=d.stack;this.addStack(b)}else{if(BX.type.isNotEmptyString(d.position)){b=this.getStackByPosition(d.position)}else{b=this.getDefaultStack()}d.stack=b}var g=BX.mergeEx({},this.getBalloonDefaults(),d);var c=b.getBalloonType(d.type);var e=new c(g);if(!(e instanceof BX.UI.Notification.Balloon)){throw new Error("Balloon type must be an instance of BX.UI.Notification.Balloon")}this.balloons[e.getId()]=e;e.show();return e},getBalloonById:function(b){return this.balloons[b]?this.balloons[b]:null},getBalloonByCategory:function(b){if(BX.type.isNotEmptyString(b)){for(var d in this.balloons){var c=this.balloons[d];if(c.getCategory()===b){return c}}}return null},removeBalloon:function(b){delete this.balloons[b.getId()]},handleBalloonClose:function(b){this.removeBalloon(b.getBalloon())},getStack:function(b){return this.stacks[b]?this.stacks[b]:null},getDefaultStack:function(){return this.getStackByPosition(this.getDefaultPosition())},getStackByPosition:function(c){var b=this.getStack(c);if(b===null){b=new BX.UI.Notification.Stack(BX.mergeEx({},this.getStackDefaults(),{id:c,position:c}));this.addStack(b)}return b},addStack:function(b){if(b instanceof BX.UI.Notification.Stack&&this.getStack(b.getId())===null){this.stacks[b.getId()]=b}},setBalloonDefaults:function(b){if(BX.type.isPlainObject(b)){BX.mergeEx(this.balloonDefaults,b)}},getBalloonDefaults:function(){return this.balloonDefaults},setStackDefaults:function(c,d){if(BX.UI.Notification.Stack.getPositionCode(c)){var b=this.getStackByPosition(c);b.setOptions(d)}else{if(BX.type.isPlainObject(c)){d=c;for(var e in BX.UI.Notification.Position){c=BX.UI.Notification.Position[e];this.setStackDefaults(c,d)}}}},setDefaultPosition:function(b){if(BX.UI.Notification.Stack.getPositionCode(b)){this.defaultPosition=b}},getDefaultPosition:function(){return this.defaultPosition},getStackDefaults:function(){return this.stackDefaults}}})();