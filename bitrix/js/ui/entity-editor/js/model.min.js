BX.namespace("BX.UI");if(typeof BX.UI.EntityModel==="undefined"){BX.UI.EntityModel=function(){this._id="";this._settings={};this._isIdentifiable=true;this._data=null;this._initData=null;this._lockedFields=null;this._changeNotifier=null;this._lockNotifier=null;this.eventsNamespace="UI.EntityModel"};BX.UI.EntityModel.prototype={initialize:function(b,a){this._id=BX.type.isNotEmptyString(b)?b:BX.util.getRandomString(4);this._settings=a?a:{};this._isIdentifiable=BX.prop.getBoolean(this._settings,"isIdentifiable",true);this._data=BX.prop.getObject(this._settings,"data",{});this._initData=BX.clone(this._data);this._lockedFields={};this.doInitialize()},doInitialize:function(){},getEventArguments:function(){return{entityTypeName:this.getEntityTypeName(),entityId:this.getEntityId()}},getEntityTypeName:function(){return""},isIdentifiable:function(){return this._isIdentifiable},getEntityId:function(){return BX.prop.getInteger(this._data,"ID",0)},getField:function(b,a){if(a===undefined){a=null}return BX.prop.get(this._data,b,a)},getStringField:function(b,a){if(a===undefined){a=null}return BX.prop.getString(this._data,b,a)},getIntegerField:function(b,a){if(a===undefined){a=null}return BX.prop.getInteger(this._data,b,a)},getNumberField:function(b,a){if(a===undefined){a=null}return BX.prop.getNumber(this._data,b,a)},getArrayField:function(b,a){if(a===undefined){a=null}return BX.prop.getArray(this._data,b,a)},registerNewField:function(a,b){this._data[a]=b;this._initData[a]=b},setField:function(c,d,b){if(this._data.hasOwnProperty(c)&&this._data[c]===d){return}this._data[c]=d;if(!BX.type.isPlainObject(b)){b={}}if(BX.prop.getBoolean(b,"enableNotification",true)){var a=this.getEventArguments();a.fieldName=c;BX.onCustomEvent(window,this.eventsNamespace+".Change",[this,a]);if(this._changeNotifier&&BX.type.isFunction(this._changeNotifier.notify)){this._changeNotifier.notify([{name:c,originator:BX.prop.get(b,"originator",null)}])}}},getData:function(){return this._data},setData:function(c,b){this._data=BX.type.isPlainObject(c)?c:{};this._initData=BX.clone(this._data);if(BX.prop.getBoolean(b,"enableNotification",true)){var a=this.getEventArguments();a.forAll=true;BX.onCustomEvent(window,this.eventsNamespace+".Change",[this,a]);if(this._changeNotifier&&BX.type.isFunction(this._changeNotifier.notify)){this._changeNotifier.notify([{forAll:true,originator:BX.prop.get(b,"originator",null)}])}}},updateData:function(c,b){if(!BX.type.isPlainObject(c)){return}this._data=BX.mergeEx(this._data,c);if(BX.prop.getBoolean(b,"enableNotification",true)){var a=this.getEventArguments();a.forAll=true;BX.onCustomEvent(window,this.eventsNamespace+".Change",[this,a]);if(this._changeNotifier&&BX.type.isFunction(this._changeNotifier.notify)){this._changeNotifier.notify([{forAll:true,originator:BX.prop.get(b,"originator",null)}])}}},updateDataObject:function(c,d,b){if(!this._data.hasOwnProperty(c)){this._data[c]=d}else{this._data[c]=BX.mergeEx(this._data[c],d)}if(BX.prop.getBoolean(b,"enableNotification",true)){var a=this.getEventArguments();a.forAll=true;BX.onCustomEvent(window,this.eventsNamespace+".Change",[this,a]);if(this._changeNotifier&&BX.type.isFunction(this._changeNotifier.notify)){this._changeNotifier.notify([{forAll:true,originator:BX.prop.get(b,"originator",null)}])}}},getInitFieldValue:function(b,a){if(a===undefined){a=null}return BX.prop.get(this._initData,b,a)},setInitFieldValue:function(a,b){if(this._initData.hasOwnProperty(a)&&this._initData[a]===b){return}this._initData[a]=b},getSchemeField:function(c,b,a){return this.getField(c.getDataStringParam(b,""),a)},setSchemeField:function(b,a,c){var d=b.getDataStringParam(a,"");if(d!==""){this.setField(d,c)}},getMappedField:function(c,b,a){var d=BX.prop.getString(c,b,"");return d!==""?this.getField(d,a):a},setMappedField:function(c,a,b){var d=BX.prop.getString(c,a,"");if(d!==""){this.setField(d,b)}},save:function(){},rollback:function(){this._data=BX.clone(this._initData)},lockField:function(a){if(this._lockedFields.hasOwnProperty(a)){return}this._lockedFields[a]=true;if(this._lockNotifier&&BX.type.isFunction(this._lockNotifier.notify)){this._lockNotifier.notify([{name:a,isLocked:true}])}},unlockField:function(a){if(!this._lockedFields.hasOwnProperty(a)){return}delete this._lockedFields[a];if(this._lockNotifier&&BX.type.isFunction(this._lockNotifier.notify)){this._lockNotifier.notify([{name:a,isLocked:false}])}},isFieldLocked:function(a){return this._lockedFields.hasOwnProperty(a)},isCaptionEditable:function(){return false},getCaption:function(){return""},setCaption:function(a){},prepareCaptionData:function(a){},addChangeListener:function(a){if(this._changeNotifier&&BX.type.isFunction(this._changeNotifier.addListener)){this._changeNotifier.addListener(a)}},removeChangeListener:function(a){if(this._changeNotifier&&BX.type.isFunction(this._changeNotifier.removeListener)){this._changeNotifier.removeListener(a)}},addLockListener:function(a){if(this._lockNotifier&&BX.type.isFunction(this._lockNotifier.addListener)){this._lockNotifier.addListener(a)}},removeLockListener:function(a){if(this._lockNotifier&&BX.type.isFunction(this._lockNotifier.removeListener)){this._lockNotifier.removeListener(a)}}};BX.UI.EntityModel.create=function(c,b){var a=new BX.UI.EntityModel();a.initialize(c,b);return a}};