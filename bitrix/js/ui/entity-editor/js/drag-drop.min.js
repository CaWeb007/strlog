BX.namespace("BX.UI");if(typeof BX.UI.EditorDragScope==="undefined"){BX.UI.EditorDragScope={intermediate:0,parent:1,form:2,getDefault:function(){return this.form}}}if(typeof BX.UI.EditorDragObjectType==="undefined"){BX.UI.EditorDragObjectType={intermediate:"",field:"F",section:"S"}}if(typeof(BX.UI.BaseDragController)==="undefined"){BX.UI.BaseDragController=function(){this._id="";this._settings={};this._node=null;this._ghostNode=null;this._ghostOffset={x:0,y:0};this._previousPos=null;this._currentPos=null;this._enableDrag=true;this._isInDragMode=false;this._preserveDocument=false;this._bodyOverflow=""};BX.UI.BaseDragController.prototype={initialize:function(b,a){if(typeof(jsDD)==="undefined"){throw"UI.CustomDragItem: Could not find jsDD API."}this._id=BX.type.isNotEmptyString(b)?b:BX.util.getRandomString(8);this._settings=a?a:{};this._node=this.getSetting("node");if(!this._node){throw"UI.CustomDragItem: The 'node' parameter is not defined in settings or empty."}this._enableDrag=this.getSetting("enableDrag",true);this._ghostOffset=this.getSetting("ghostOffset",{x:0,y:0});this.doInitialize();this.bindEvents()},doInitialize:function(){},release:function(){this.doRelease();this.unbindEvents()},doRelease:function(){},getId:function(){return this._id},getSetting:function(b,a){return this._settings.hasOwnProperty(b)?this._settings[b]:a},bindEvents:function(){this._node.onbxdragstart=BX.delegate(this._onDragStart,this);this._node.onbxdrag=BX.delegate(this._onDrag,this);this._node.onbxdragstop=BX.delegate(this._onDragStop,this);this._node.onbxdragrelease=BX.delegate(this._onDragRelease,this);jsDD.registerObject(this._node);this.doBindEvents()},doBindEvents:function(){},unbindEvents:function(){delete this._node.onbxdragstart;delete this._node.onbxdrag;delete this._node.onbxdragstop;delete this._node.onbxdragrelease;if(BX.type.isFunction(jsDD.unregisterObject)){jsDD.unregisterObject(this._node)}this.doUnbindEvents()},doUnbindEvents:function(){},createGhostNode:function(){throw"UI.CustomDragItem: The 'createGhostNode' function is not implemented."},getGhostNode:function(){return this._ghostNode},removeGhostNode:function(){throw"UI.CustomDragItem: The 'removeGhostNode' function is not implemented."},processDragStart:function(){},processDragPositionChange:function(a){},processDrag:function(a,b){},processDragStop:function(){},addDragListener:function(a){BX.Event.EventEmitter.subscribe("BX.UI.BaseDragController:drag",a)},removeDragListener:function(a){BX.Event.EventEmitter.unsubscribe("BX.UI.BaseDragController:drag",a)},getContextId:function(){return""},getContextData:function(){return{}},getScrollTop:function(){var b=document.documentElement;var a=document.body;var c=b.scrollTop||a&&a.scrollTop||0;c-=b.clientTop;return c},getScrollHeight:function(){var b=document.documentElement;var a=document.body;return b.scrollHeight||a&&a.scrollHeight||0},isDragDropBinEnabled:function(){return true},_onDragStart:function(){if(!this._enableDrag){return}this.createGhostNode();var a=BX.pos(this._node);this._ghostNode.style.top=a.top+"px";this._ghostNode.style.left=a.left+"px";this._currentPos=this._previousPos=null;this._isInDragMode=true;BX.UI.BaseDragController.currentDragged=this;this.processDragStart();window.setTimeout(BX.delegate(this._prepareDocument,this),0)},_onDrag:function(a,c){if(!this._isInDragMode){return}var b={x:a,y:c};this.processDragPositionChange(b);if(this._ghostNode){this._ghostNode.style.top=(b.y+this._ghostOffset.y)+"px";this._ghostNode.style.left=(b.x+this._ghostOffset.x)+"px"}this._currentPos=b;if(!this._previousPos){this._previousPos=b}this._scrollIfNeed();this.processDrag(b.x,b.y);BX.Event.EventEmitter.emit("BX.UI.BaseDragController:drag",{item:this,x:b.x,y:b.y});this._previousPos=this._currentPos},_onDragStop:function(a,b){if(!this._isInDragMode){return}this.removeGhostNode();this._isInDragMode=false;if(BX.UI.BaseDragController.currentDragged===this){BX.UI.BaseDragController.currentDragged=null}this._currentPos=this._previousPos=null;this.processDragStop();window.setTimeout(BX.delegate(this._resetDocument,this),0)},_onDragRelease:function(a,b){},_prepareDocument:function(){if(!this._preserveDocument){this._bodyOverflow=document.body.style.overflow;document.body.style.overflow="hidden"}},_resetDocument:function(){if(!this._preserveDocument){document.body.style.overflow=this._bodyOverflow}},_scrollIfNeed:function(){if(!this._ghostNode){return}var c=window.document.documentElement;var h=c.clientTop;var b=c.clientTop+c.clientHeight;var d=this.getScrollHeight();var g=this._currentPos.y-this._previousPos.y;if(g===0){return}var a=-1;for(;;){var f=this.getScrollTop();var e=this._ghostNode.getBoundingClientRect();if(g>0&&((e.bottom>b)||(b-e.bottom)<64)){if(f>=d||a===f){break}a=f;f+=1;window.scrollTo(0,f<d?f:d)}else{if(g<0&&((h>e.top)||(e.top-h)<64)){if(f<=0||a===f){break}a=f;f-=1;window.scrollTo(0,f>0?f:0)}else{break}}}}};BX.UI.BaseDragController.currentDragged=null;BX.UI.BaseDragController.emulateDrag=function(){jsDD.refreshDestArea();if(jsDD.current_node){jsDD.drag({clientX:(jsDD.x-jsDD.wndSize.scrollLeft),clientY:(jsDD.y-jsDD.wndSize.scrollTop)})}}}if(typeof(BX.UI.BaseDropController)==="undefined"){BX.UI.BaseDropController=function(){this._id="";this._settings={};this._node=null;this._itemDragHandler=BX.delegate(this._onItemDrag,this);this._draggedItem=null;this._enabled=true};BX.UI.BaseDropController.prototype={initialize:function(b,a){if(typeof(jsDD)==="undefined"){throw"BX.UI.BaseDropController: Could not find jsDD API."}this._id=BX.type.isNotEmptyString(b)?b:BX.util.getRandomString(8);this._settings=a?a:{};this._node=this.getSetting("node");if(!this._node){throw"BX.UI.BaseDropController: The 'node' parameter is not defined in settings or empty."}this.doInitialize();this.bindEvents()},doInitialize:function(){},release:function(){this.doRelease();this.unbindEvents()},doRelease:function(){},getId:function(){return this._id},getSetting:function(b,a){return this._settings.hasOwnProperty(b)?this._settings[b]:a},bindEvents:function(){this._node.onbxdestdraghover=BX.delegate(this._onDragOver,this);this._node.onbxdestdraghout=BX.delegate(this._onDragOut,this);this._node.onbxdestdragfinish=BX.delegate(this._onDragFinish,this);this._node.onbxdragstop=BX.delegate(this._onDragStop,this);this._node.onbxdragrelease=BX.delegate(this._onDragRelease,this);jsDD.registerDest(this._node,this.getPriority());this.doBindEvents()},doBindEvents:function(){},unbindEvents:function(){delete this._node.onbxdestdraghover;delete this._node.onbxdestdraghout;delete this._node.onbxdestdragfinish;delete this._node.onbxdragstop;delete this._node.onbxdragrelease;if(BX.type.isFunction(jsDD.unregisterDest)){jsDD.unregisterDest(this._node)}this.doUnbindEvents()},doUnbindEvents:function(){},createPlaceHolder:function(a){throw"BX.UI.BaseDropController: The 'createPlaceHolder' function is not implemented."},removePlaceHolder:function(){throw"BX.UI.BaseDropController: The 'removePlaceHolder' function is not implemented."},initializePlaceHolder:function(a){this.createPlaceHolder(a);this.refresh()},releasePlaceHolder:function(){this.removePlaceHolder();this.refresh()},getPriority:function(){return BX.UI.BaseDropController.defaultPriority},addDragFinishListener:function(a){this.removeDragFinishListener(a);BX.Event.EventEmitter.subscribe("BX.UI.BaseDropController:dragFinish",a)},removeDragFinishListener:function(a){BX.Event.EventEmitter.unsubscribe("BX.UI.BaseDropController:dragFinish",a)},getDraggedItem:function(){return this._draggedItem},setDraggedItem:function(a){if(this._draggedItem===a){return}if(this._draggedItem){this._draggedItem.removeDragListener(this._itemDragHandler)}this._draggedItem=a;if(this._draggedItem){this._draggedItem.addDragListener(this._itemDragHandler)}},isAllowedContext:function(a){return true},isEnabled:function(){return this._enabled},enable:function(a){a=!!a;if(this._enabled===a){return}this._enabled=a;if(a){jsDD.enableDest(this._node)}else{jsDD.disableDest(this._node)}},refresh:function(){jsDD.refreshDestArea(this._node.__bxddeid)},processDragOver:function(a){this.initializePlaceHolder(a)},processDragOut:function(){this.releasePlaceHolder()},processDragStop:function(){this.releasePlaceHolder()},processDragRelease:function(){this.releasePlaceHolder()},processItemDrop:function(){this.releasePlaceHolder()},_onDragOver:function(c,a,d){var b=BX.UI.BaseDragController.currentDragged;if(!b){return}if(!this.isAllowedContext(b.getContextId())){return}this.setDraggedItem(b);this.processDragOver({x:a,y:d})},_onDragOut:function(b,a,c){if(!this._draggedItem){return}this.processDragOut();this.setDraggedItem(null)},_onDragFinish:function(b,a,c){if(!this._draggedItem){return}BX.Event.EventEmitter.emit("BX.UI.BaseDropController:dragFinish",{dropContainer:this,draggedItem:this._draggedItem,x:a,y:c});this.processItemDrop();this.setDraggedItem(null);BX.UI.BaseDropController.refresh()},_onDragRelease:function(b,a,c){if(!this._draggedItem){return}this.processDragRelease();this.setDraggedItem(null)},_onDragStop:function(b,a,c){if(!this._draggedItem){return}this.processDragStop();this.setDraggedItem(null)},_onItemDrag:function(a){if(!this._draggedItem){return}this.initializePlaceHolder({x:a.data.x,y:a.data.y})}};BX.UI.BaseDropController.defaultPriority=100;BX.UI.BaseDropController.refresh=function(){jsDD.refreshDestArea()}}if(typeof(BX.UI.EditorDragItem)==="undefined"){BX.UI.EditorDragItem=function(){};BX.UI.EditorDragItem.prototype={getType:function(){return BX.UI.EditorDragObjectType.intermediate},getContextId:function(){return""},createGhostNode:function(){return null},processDragStart:function(){},processDragPositionChange:function(b,a){},processDragStop:function(){}}}if(typeof(BX.UI.EditorFieldDragItem)==="undefined"){BX.UI.EditorFieldDragItem=function(){BX.UI.EditorFieldDragItem.superclass.constructor.apply(this);this._scope=BX.UI.EditorDragScope.undefined;this._control=null;this._contextId=""};BX.extend(BX.UI.EditorFieldDragItem,BX.UI.EditorDragItem);BX.UI.EditorFieldDragItem.prototype.initialize=function(a){this._control=BX.prop.get(a,"control");if(!this._control){throw"UI.EditorFieldDragItem: The 'control' parameter is not defined in settings or empty."}this._scope=BX.prop.getInteger(a,"scope",BX.UI.EditorDragScope.getDefault());this._contextId=BX.prop.getString(a,"contextId","")};BX.UI.EditorFieldDragItem.prototype.getType=function(){return BX.UI.EditorDragObjectType.field};BX.UI.EditorFieldDragItem.prototype.getControl=function(){return this._control};BX.UI.EditorFieldDragItem.prototype.getContextId=function(){return this._contextId!==""?this._contextId:BX.UI.EditorFieldDragItem.contextId};BX.UI.EditorFieldDragItem.prototype.createGhostNode=function(){return this._control.createGhostNode()};BX.UI.EditorFieldDragItem.prototype.processDragStart=function(){window.setTimeout(function(){BX.UI.EditorDragContainerController.enable(BX.UI.EditorFieldDragItem.contextId,true);BX.UI.EditorDragContainerController.enable(BX.UI.EditorSectionDragItem.contextId,false);BX.UI.EditorDragContainerController.refreshAll()});this._control.getWrapper().style.display="none"};BX.UI.EditorFieldDragItem.prototype.processDragPositionChange=function(c,b){var a=this._scope===BX.UI.EditorDragScope.parent?this._control.getParentPosition():this._control.getRootContainerPosition();if(c.y<a.top){c.y=a.top}if((c.y+b.height)>a.bottom){c.y=a.bottom-b.height}if(c.x<a.left){c.x=a.left}if((c.x+b.width)>a.right){c.x=a.right-b.width}};BX.UI.EditorFieldDragItem.prototype.processDragStop=function(){window.setTimeout(function(){BX.UI.EditorDragContainerController.enable(BX.UI.EditorSectionDragItem.contextId,true);BX.UI.EditorDragContainerController.refreshAll()});this._control.getWrapper().style.display=""};BX.UI.EditorFieldDragItem.contextId="editor_field";BX.UI.EditorFieldDragItem.create=function(b){var a=new BX.UI.EditorFieldDragItem();a.initialize(b);return a}}if(typeof(BX.UI.EditorSectionDragItem)==="undefined"){BX.UI.EditorSectionDragItem=function(){BX.UI.EditorSectionDragItem.superclass.constructor.apply(this);this._control=null};BX.extend(BX.UI.EditorSectionDragItem,BX.UI.EditorDragItem);BX.UI.EditorSectionDragItem.prototype.initialize=function(a){this._control=BX.prop.get(a,"control");if(!this._control){throw"UI.EditorSectionDragItem: The 'control' parameter is not defined in settings or empty."}};BX.UI.EditorSectionDragItem.prototype.getType=function(){return BX.UI.EditorDragObjectType.section};BX.UI.EditorSectionDragItem.prototype.getControl=function(){return this._control};BX.UI.EditorSectionDragItem.prototype.getContextId=function(){return BX.UI.EditorSectionDragItem.contextId};BX.UI.EditorSectionDragItem.prototype.createGhostNode=function(){return this._control.createGhostNode()};BX.UI.EditorSectionDragItem.prototype.processDragStart=function(){BX.addClass(document.body,"ui-entity-cards-drag");var b=this._control;var a=b.getWrapper().querySelector(".ui-entity-editor-section-content");a.style.height=BX.pos(a).height+"px";BX.addClass(b.getWrapper(),"ui-entity-item-ghost");window.setTimeout(function(){a.style.height=0;a.style.padding=0},0);window.setTimeout(function(){BX.UI.EditorDragContainerController.enable(BX.UI.EditorSectionDragItem.contextId,true);BX.UI.EditorDragContainerController.enable(BX.UI.EditorFieldDragItem.contextId,false);BX.UI.EditorDragContainerController.refreshAll();window.setTimeout(function(){var c=b.getSiblingByIndex(0);if(c!==null&&c!==b){c.getWrapper().scrollIntoView()}},200)})};BX.UI.EditorSectionDragItem.prototype.processDragStop=function(){BX.removeClass(document.body,"ui-entity-cards-drag");window.setTimeout(function(){BX.UI.EditorDragContainerController.enable(BX.UI.EditorFieldDragItem.contextId,true);BX.UI.EditorDragContainerController.refreshAll()});var b=this._control;var a=b.getWrapper().querySelector(".ui-entity-editor-section-content");BX.removeClass(b.getWrapper(),"ui-entity-item-ghost");a.style=""};BX.UI.EditorSectionDragItem.contextId="editor_section";BX.UI.EditorSectionDragItem.create=function(b){var a=new BX.UI.EditorSectionDragItem();a.initialize(b);return a}}if(typeof(BX.UI.EditorDragItemController)==="undefined"){BX.UI.EditorDragItemController=function(){BX.UI.EditorDragItemController.superclass.constructor.apply(this);this._charge=null;this._preserveDocument=true};BX.extend(BX.UI.EditorDragItemController,BX.UI.BaseDragController);BX.UI.EditorDragItemController.prototype.doInitialize=function(){this._charge=this.getSetting("charge");if(!this._charge){throw"UI.EditorDragItemController: The 'charge' parameter is not defined in settings or empty."}this._ghostOffset={x:0,y:0}};BX.UI.EditorDragItemController.prototype.addStartListener=function(a){BX.Event.EventEmitter.subscribe("BX.UI.EditorDragItemController:dragStart",a)};BX.UI.EditorDragItemController.prototype.removeStartListener=function(a){BX.Event.EventEmitter.unsubscribe("BX.UI.EditorDragItemController:dragStart",a)};BX.UI.EditorDragItemController.prototype.addStopListener=function(a){BX.Event.EventEmitter.subscribe("BX.UI.EditorDragItemController:dragStop",a)};BX.UI.EditorDragItemController.prototype.removeStopListener=function(a){BX.Event.EventEmitter.unsubscribe("BX.UI.EditorDragItemController:dragStop",a)};BX.UI.EditorDragItemController.prototype.getCharge=function(){return this._charge};BX.UI.EditorDragItemController.prototype.createGhostNode=function(){if(this._ghostNode){return this._ghostNode}this._ghostNode=this._charge.createGhostNode();document.body.appendChild(this._ghostNode)};BX.UI.EditorDragItemController.prototype.getGhostNode=function(){return this._ghostNode};BX.UI.EditorDragItemController.prototype.removeGhostNode=function(){if(this._ghostNode){document.body.removeChild(this._ghostNode);this._ghostNode=null}};BX.UI.EditorDragItemController.prototype.getContextId=function(){return this._charge.getContextId()};BX.UI.EditorDragItemController.prototype.getContextData=function(){return({contextId:this._charge.getContextId(),charge:this._charge})};BX.UI.EditorDragItemController.prototype.processDragStart=function(){BX.UI.EditorDragItemController.current=this;this._charge.processDragStart();BX.UI.EditorDragContainerController.refresh(this._charge.getContextId());BX.Event.EventEmitter.emit("BX.UI.EditorDragItemController:dragStart",{})};BX.UI.EditorDragItemController.prototype.processDrag=function(a,b){};BX.UI.EditorDragItemController.prototype.processDragPositionChange=function(a){this._charge.processDragPositionChange(a,BX.pos(this.getGhostNode()))};BX.UI.EditorDragItemController.prototype.processDragStop=function(){BX.UI.EditorDragItemController.current=null;this._charge.processDragStop();BX.UI.EditorDragContainerController.refreshAfter(this._charge.getContextId(),300);BX.Event.EventEmitter.emit("BX.UI.EditorDragItemController:dragStop",{})};BX.UI.EditorDragItemController.current=null;BX.UI.EditorDragItemController.create=function(c,b){var a=new BX.UI.EditorDragItemController();a.initialize(c,b);return a}}if(typeof(BX.UI.EditorDragContainer)==="undefined"){BX.UI.EditorDragContainer=function(){};BX.UI.EditorDragContainer.prototype={getContextId:function(){return""},getPriority:function(){return 100},hasPlaceHolder:function(){return false},createPlaceHolder:function(a){return null},getPlaceHolder:function(){return null},removePlaceHolder:function(){},getChildNodes:function(){return[]},getChildNodeCount:function(){return 0}}}if(typeof(BX.UI.EditorFieldDragContainer)==="undefined"){BX.UI.EditorFieldDragContainer=function(){BX.UI.EditorFieldDragContainer.superclass.constructor.apply(this);this._section=null;this._context=""};BX.extend(BX.UI.EditorFieldDragContainer,BX.UI.EditorDragContainer);BX.UI.EditorFieldDragContainer.prototype.initialize=function(a){this._section=BX.prop.get(a,"section");if(!this._section){throw"UI.EditorSectionDragContainer: The 'section' parameter is not defined in settings or empty."}this._context=BX.prop.getString(a,"context","")};BX.UI.EditorFieldDragContainer.prototype.getSection=function(){return this._section};BX.UI.EditorFieldDragContainer.prototype.getContextId=function(){return this._context!==""?this._context:BX.UI.EditorFieldDragItem.contextId};BX.UI.EditorFieldDragContainer.prototype.getPriority=function(){return 10};BX.UI.EditorFieldDragContainer.prototype.hasPlaceHolder=function(){return this._section.hasPlaceHolder()};BX.UI.EditorFieldDragContainer.prototype.createPlaceHolder=function(a){return this._section.createPlaceHolder(a)};BX.UI.EditorFieldDragContainer.prototype.getPlaceHolder=function(){return this._section.getPlaceHolder()};BX.UI.EditorFieldDragContainer.prototype.removePlaceHolder=function(){this._section.removePlaceHolder()};BX.UI.EditorFieldDragContainer.prototype.getChildNodes=function(){var b=[];var a=this._section.getChildren();for(var c=0,d=a.length;c<d;c++){b.push(a[c].getWrapper())}return b};BX.UI.EditorFieldDragContainer.prototype.getChildNodeCount=function(){return this._section.getChildCount()};BX.UI.EditorFieldDragContainer.create=function(b){var a=new BX.UI.EditorFieldDragContainer();a.initialize(b);return a}}if(typeof(BX.UI.EditorSectionDragContainer)==="undefined"){BX.UI.EditorSectionDragContainer=function(){BX.UI.EditorSectionDragContainer.superclass.constructor.apply(this);this._column=null};BX.extend(BX.UI.EditorSectionDragContainer,BX.UI.EditorDragContainer);BX.UI.EditorSectionDragContainer.prototype.initialize=function(a){this._column=BX.prop.get(a,"column");if(!this._column){throw"UI.EditorSectionDragContainer: The 'column' parameter is not defined in settings or empty."}};BX.UI.EditorSectionDragContainer.prototype.getColumn=function(){return this._column};BX.UI.EditorSectionDragContainer.prototype.getEditor=function(){return this.getColumn().getParent()};BX.UI.EditorSectionDragContainer.prototype.getContextId=function(){return BX.UI.EditorSectionDragItem.contextId};BX.UI.EditorSectionDragContainer.prototype.getPriority=function(){return 20};BX.UI.EditorSectionDragContainer.prototype.hasPlaceHolder=function(){return this._column.hasPlaceHolder()};BX.UI.EditorSectionDragContainer.prototype.createPlaceHolder=function(a){return this._column.createPlaceHolder(a)};BX.UI.EditorSectionDragContainer.prototype.getPlaceHolder=function(){return this._column.getPlaceHolder()};BX.UI.EditorSectionDragContainer.prototype.removePlaceHolder=function(){this._column.removePlaceHolder()};BX.UI.EditorSectionDragContainer.prototype.getChildNodes=function(){var b=[];var a=this._column.getChildren();for(var c=0,d=a.length;c<d;c++){b.push(a[c].getWrapper())}return b};BX.UI.EditorSectionDragContainer.prototype.getChildNodeCount=function(){return this._column.getControlCount()};BX.UI.EditorSectionDragContainer.create=function(b){var a=new BX.UI.EditorSectionDragContainer();a.initialize(b);return a}}if(typeof(BX.UI.EditorDragContainerController)==="undefined"){BX.UI.EditorDragContainerController=function(){BX.UI.EditorDragContainerController.superclass.constructor.apply(this);this._charge=null};BX.extend(BX.UI.EditorDragContainerController,BX.UI.BaseDropController);BX.UI.EditorDragContainerController.prototype.doInitialize=function(){this._charge=this.getSetting("charge");if(!this._charge){throw"UI.EditorDragContainerController: The 'charge' parameter is not defined in settings or empty."}};BX.UI.EditorDragContainerController.prototype.getCharge=function(){return this._charge};BX.UI.EditorDragContainerController.prototype.createPlaceHolder=function(f){var d=BX.pos(BX.UI.EditorDragItemController.current.getGhostNode());var e=d.top,b=d.top+40;var h=Math.floor((e+b)/2);var g,k;var j=this._charge.getPlaceHolder();if(j){g=j.getPosition();k=Math.floor((g.top+g.bottom)/2);if((e<=g.bottom&&e>=g.top)||(b>=g.top&&b<=g.bottom)||Math.abs(h-k)<=8){if(!j.isActive()){j.setActive(true)}return}}var a=this._charge.getChildNodes();for(var c=0;c<a.length;c++){g=BX.pos(a[c]);k=Math.floor((g.top+g.bottom)/2);if((e<=g.bottom&&e>=g.top)||(b>=g.top&&b<=g.bottom)||Math.abs(h-k)<=8){this._charge.createPlaceHolder((h-k)<=0?c:(c+1)).setActive(true);return}}this._charge.createPlaceHolder(-1).setActive(true);this.refresh()};BX.UI.EditorDragContainerController.prototype.removePlaceHolder=function(){if(this._charge.hasPlaceHolder()){this._charge.removePlaceHolder();this.refresh()}};BX.UI.EditorDragContainerController.prototype.getContextId=function(){return this._charge.getContextId()};BX.UI.EditorDragContainerController.prototype.getPriority=function(){return this._charge.getPriority()};BX.UI.EditorDragContainerController.prototype.isAllowedContext=function(a){return a===this._charge.getContextId()};BX.UI.EditorDragContainerController.refresh=function(b){for(var a in this.items){if(!this.items.hasOwnProperty(a)){continue}var c=this.items[a];if(c.getContextId()===b){c.refresh()}}};BX.UI.EditorDragContainerController.refreshAfter=function(b,a){a=parseInt(a);if(a>0){window.setTimeout(function(){BX.UI.EditorDragContainerController.refresh(b)},a)}else{this.refresh(b)}};BX.UI.EditorDragContainerController.refreshAll=function(){for(var a in this.items){if(!this.items.hasOwnProperty(a)){continue}this.items[a].refresh()}};BX.UI.EditorDragContainerController.enable=function(b,c){for(var a in this.items){if(!this.items.hasOwnProperty(a)){continue}var d=this.items[a];if(d.getContextId()===b){d.enable(c)}}};BX.UI.EditorDragContainerController.items={};BX.UI.EditorDragContainerController.create=function(c,b){var a=new BX.UI.EditorDragContainerController();a.initialize(c,b);this.items[a.getId()]=a;return a}}if(typeof(BX.UI.EditorDragPlaceholder)==="undefined"){BX.UI.EditorDragPlaceholder=function(){this._settings=null;this._container=null;this._node=null;this._isDragOver=false;this._isActive=false;this._index=-1;this._timeoutId=null};BX.UI.EditorDragPlaceholder.prototype={initialize:function(a){this._settings=a?a:{};this._container=this.getSetting("container",null);this._isActive=this.getSetting("isActive",false);this._index=parseInt(this.getSetting("index",-1))},getSetting:function(b,a){return this._settings.hasOwnProperty(b)?this._settings[b]:a},getContainer:function(){return this._container},setContainer:function(a){this._container=a},isDragOver:function(){return this._isDragOver},isActive:function(){return this._isActive},setActive:function(c,b){if(this._timeoutId!==null){window.clearTimeout(this._timeoutId);this._timeoutId=null}b=parseInt(b);if(b>0){var a=this;window.setTimeout(function(){if(a._timeoutId===null){return}a._timeoutId=null;a.setActive(c,0)},b);return}c=!!c;if(this._isActive===c){return}this._isActive=c;if(this._node){}},getIndex:function(){return this._index},prepareNode:function(){return null},layout:function(){this._node=this.prepareNode();var a=this.getSetting("anchor",null);if(a){this._container.insertBefore(this._node,a)}else{this._container.appendChild(this._node)}BX.bind(this._node,"dragover",BX.delegate(this._onDragOver,this));BX.bind(this._node,"dragleave",BX.delegate(this._onDragLeave,this))},clearLayout:function(){if(this._node){this._node=BX.remove(this._node)}},getPosition:function(){return BX.pos(this._node)},_onDragOver:function(a){a=a||window.event;this._isDragOver=true;return BX.eventReturnFalse(a)},_onDragLeave:function(a){a=a||window.event;this._isDragOver=false;return BX.eventReturnFalse(a)}}}if(typeof(BX.UI.EditorDragFieldPlaceholder)==="undefined"){BX.UI.EditorDragFieldPlaceholder=function(){};BX.extend(BX.UI.EditorDragFieldPlaceholder,BX.UI.EditorDragPlaceholder);BX.UI.EditorDragFieldPlaceholder.prototype.prepareNode=function(){return BX.create("div",{attrs:{className:"ui-entity-editor-content-block-place"}})};BX.UI.EditorDragFieldPlaceholder.create=function(b){var a=new BX.UI.EditorDragFieldPlaceholder();a.initialize(b);return a}}if(typeof(BX.UI.EditorDragSectionPlaceholder)==="undefined"){BX.UI.EditorDragSectionPlaceholder=function(){};BX.extend(BX.UI.EditorDragSectionPlaceholder,BX.UI.EditorDragPlaceholder);BX.UI.EditorDragSectionPlaceholder.prototype.prepareNode=function(){return BX.create("div",{attrs:{className:"ui-entity-editor-section ui-entity-editor-section-place"}})};BX.UI.EditorDragSectionPlaceholder.create=function(b){var a=new BX.UI.EditorDragSectionPlaceholder();a.initialize(b);return a}};