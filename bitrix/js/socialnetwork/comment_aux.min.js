(function(){var a=window.BX;if(a.CommentAux){return}a.CommentAux={};a.CommentAux.init=function(b){a.RenderParts.init(b)};a.CommentAux.getLiveText=function(e,h){var b="";if(e=="share"){if(typeof h=="object"&&h.length>0){b=a.message(h.length==1?"SONET_COMMENTAUX_JS_SHARE_TEXT":"SONET_COMMENTAUX_JS_SHARE_TEXT_1");b=b.replace("#SHARE_LIST#",this.getShareList(h))}}else{if(e=="createtask"){if(typeof h=="object"&&typeof h.taskId!="undefined"&&parseInt(h.taskId)>0&&typeof h.taskName!="undefined"&&h.taskName.length>0&&typeof h.sourceEntityType!="undefined"&&h.sourceEntityType.length>0&&typeof h.sourceEntityId!="undefined"&&parseInt(h.sourceEntityId)>0){var c=this.renderEntity({ENTITY_TYPE:"task",NAME:h.taskName,LINK:"",VISIBILITY:{userId:(typeof h.taskResponsibleId!="undefined"&&parseInt(h.taskResponsibleId)>0?parseInt(h.taskResponsibleId):0)}});if(h.sourceEntityType=="BLOG_POST"){b=a.message("SONET_COMMENTAUX_JS_CREATETASK_BLOG_POST").replace("#TASK_NAME#",c)}else{if(h.sourceEntityType=="BLOG_COMMENT"){var g=this.renderEntity({ENTITY_TYPE:"createTaskSourceComment",LINK:(typeof h.sourceEntityLink!="undefined"?h.sourceEntityLink:"")});b=a.message("SONET_COMMENTAUX_JS_CREATETASK_BLOG_COMMENT").replace("#TASK_NAME#",c).replace("#COMMENT_LINK#",g)}}}}else{if(e=="fileversion"){var d=(typeof h=="object"&&typeof h.isEnabledKeepVersion!="undefined"&&h.isEnabledKeepVersion?"SONET_COMMENTAUX_JS_FILEVERSION_TEXT":"SONET_COMMENTAUX_JS_HEAD_FILEVERSION_TEXT");var f=(typeof h=="object"&&typeof h.userGender!="undefined"?h.userGender:"");b=a.message(d+(f.length>0?"_"+f:""))}}}return b};a.CommentAux.getShareList=function(e){var b="";var c=[];if(typeof e=="object"&&e.length>0){var d;for(d=0;d<e.length;d++){if(e.hasOwnProperty(d)){c.push(this.renderEntity(e[d]))}}b=c.join(", ")}return b};a.CommentAux.renderEntity=function(c){var b="";if(typeof c=="object"&&c.ENTITY_TYPE!="undefined"){switch(c.ENTITY_TYPE){case"U":b=a.RenderParts.getNodeU(c);break;case"UA":b=a.RenderParts.getNodeUA();break;case"SG":b=a.RenderParts.getNodeSG(c);break;case"DR":b=a.RenderParts.getNodeDR(c);break;case"task":b=a.RenderParts.getNodeTask(c);break;case"createTaskSourceComment":b=a.RenderParts.getNodeCreateTaskSourceComment(c);break;default:}var d=a.create("div",{children:[b]});b=d.innerHTML;a.cleanNode(d,true)}return b}})();