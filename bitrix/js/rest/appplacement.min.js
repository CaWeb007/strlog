(function(){BX.namespace("BX.rest");if(!!BX.rest.Placement){return}BX.rest.Placement=function(a){this.param={placement:"",layout:"",node:"",list:[],ajaxUrl:location.href};this.setParameters(a);this.loaded={}};BX.rest.Placement.prototype={setParameters:function(b){for(var a in b){if(b.hasOwnProperty(a)){this.param[a]=b[a]}}},getAppNode:function(a){return BX(this.param.node.replace("#ID#",a))},showApp:function(a){BX.show(this.getAppNode(a))},load:function(b,a){this.showApp(b);if(!this.loaded[b]){BX.ajax.post(this.param.ajaxUrl,{placement_action:"load",app:b,placement_options:a,sessid:BX.bitrix_sessid()},BX.delegate(function(c){this.getAppNode(b).innerHTML=c;this.appLoaded(b)},this))}this.param.current=b},appLoaded:function(a){this.loaded[a]=true},unload:function(b){var a=BX.rest.AppLayout.get(b);if(!!a){a.destroy()}this.loaded[b]=false},destroy:function(){for(var a in this.loaded){if(this.loaded.hasOwnProperty(a)){this.unload(a)}}}}})();