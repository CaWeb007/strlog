this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(r,e,f,s,c,k,j){f.Vue.component("bx-im-component-sidebar",{data:function q(){return{}},created:function h(){},computed:babelHelpers.objectSpread({},s.Vuex.mapState({recent:function o(t){return t.recent.collection.general},pinned:function a(t){return t.recent.collection.pinned}}),{recentData:function n(){return[].concat(babelHelpers.toConsumableArray(this.recent),babelHelpers.toConsumableArray(this.pinned))}}),methods:{getController:function m(){return this.$root.$bitrixController},getStore:function l(){return this.$root.$bitrixController.store},onScroll:function i(t){if(this.oneScreenRemaining(t)){this.getController().recent.loadMore()}},onClick:function d(t){this.getController().recent.openOldDialog(t)},onRightClick:function b(t){this.getController().recent.openOldContextMenu(t)},oneScreenRemaining:function g(t){return t.target.scrollTop+t.target.clientHeight>=t.target.scrollHeight-t.target.clientHeight}},template:'\n\t\t\t<div class="sidebar-wrap">\n\t\t\t\t<bx-im-view-list-sidebar\n\t\t\t\t\t:recentData="recentData"\n\t\t\t\t\t@scroll="onScroll"\n\t\t\t\t\t@click="onClick"\n\t\t\t\t\t@rightClick="onRightClick"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t'});var p=function(){function u(){var D=this;var C=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,u);this.inited=false;this.initPromise=new BX.Promise();this.params=C;this.template=null;this.rootNode=this.params.node||document.createElement("div");this.templateTemp=null;this.rootNodeTemp=this.params.nodeTemp||document.createElement("div");this.eventBus=new f.VueVendorV2();this.initCore().then(function(){return D.initParams()}).then(function(){return D.initComponent()}).then(function(){return D.initComplete()})}babelHelpers.createClass(u,[{key:"initCore",value:function y(){var C=this;return new Promise(function(E,D){e.Core.ready().then(function(F){C.controller=F;E()})})}},{key:"initParams",value:function x(){return new Promise(function(D,C){return D()})}},{key:"initComponent",value:function B(){var C=this;return this.controller.createVue(this,{el:this.rootNode,template:"<bx-im-component-sidebar/>"}).then(function(D){C.template=D;return new Promise(function(F,E){return F()})})}},{key:"initComplete",value:function w(){this.inited=true;this.initPromise.resolve(this);return this.requestData()}},{key:"requestData",value:function v(){this.controller.recent.drawPlaceholders();this.controller.recent.getRecentData();return new Promise(function(D,C){return D()})}},{key:"ready",value:function z(){if(this.inited){var C=new BX.Promise();C.resolve(this);return C}return this.initPromise}},{key:"emit",value:function A(C){var D=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.eventBus.$emit(C,D);return true}},{key:"listen",value:function t(C,D){if(typeof D!=="function"){return false}this.eventBus.$on(C,D);return true}}]);return u}();r.SidebarApplication=p}((this.BX.Messenger.Application=this.BX.Messenger.Application||{}),BX.Messenger.Application,BX,BX,BX.Messenger.Lib,BX.Messenger.Const,BX.Messenger.Lib));