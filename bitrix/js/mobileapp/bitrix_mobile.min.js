(function(){if(window.app){return}window.BXCordovaPlugin=function(c,e,b){this.pluginName=c;this.useSyncPlugin=(e==true);this.callbackIndex=0;this.callbacks={};this.callbackIndex=0;this.dataBrigePath=(typeof mobileSiteDir=="undefined"?"/":mobileSiteDir)+"mobile/";this.available=false;this.convertBoolean=(typeof b=="undefined"?true:b);this.platform=null;this.apiVersion=0;this.db=null;var d=this;document.addEventListener("deviceready",function(){d.available=true},false)};BXCordovaPlugin.prototype.RegisterCallBack=function(b){if((typeof b)==="function"){this.callbackIndex++;this.callbacks[this.callbackIndex]=b;return this.callbackIndex}return false};BXCordovaPlugin.prototype.CallBackExecute=function(c,b){if(this.callbacks[c]&&(typeof this.callbacks[c])==="function"){this.callbacks[c](b)}};BXCordovaPlugin.prototype.prepareParams=function(e,b){var d=true;if((typeof b)=="boolean"){d=b}if(typeof(e)=="object"){for(var c in e){if(typeof(e[c])=="object"){e[c]=this.prepareParams(e[c],b)}if(typeof(e[c])=="function"){e[c]=this.RegisterCallBack(e[c])}else{if(d){if(e[c]===true){e[c]="YES"}else{if(e[c]===false){e[c]="NO"}}}}}}else{if(typeof(e)=="function"){e=this.RegisterCallBack(e)}else{if(d){if(e===true){e="YES"}else{if(e===false){e="NO"}}}}}return e};BXCordovaPlugin.prototype.clone=function(d,f){var e,c,b;if(f!==false){f=true}if(d===null){return null}if(typeof d=="object"){if(Object.prototype.toString.call(d)=="[object Array]"){e=[];for(c=0,b=d.length;c<b;c++){if(typeof d[c]=="object"&&f){e[c]=this.clone(d[c],f)}else{e[c]=d[c]}}}else{e={};for(c in d){if(typeof d[c]=="object"&&f){e[c]=this.clone(d[c],f)}else{e[c]=d[c]}}}}else{e=d}return e};BXCordovaPlugin.prototype.exec=function(d,e,b){var c={};if(typeof b=="undefined"){b=this.convertBoolean}if(!this.available){document.addEventListener("deviceready",BX.proxy(function(){this.exec(d,e,b)},this),false);return false}if(typeof(e)!="undefined"){c=this.clone(e,true);c=this.prepareParams(c,b);if(typeof(c)=="object"){c=JSON.stringify(c)}}else{c="{}"}if(window.syncPlugin&&this.useSyncPlugin){window.syncPlugin.execute(d,c);return}if(device.platform.toUpperCase()=="ANDROID"||device.cordova>"2.0.0"){return Cordova.exec(null,null,this.pluginName,d,[c])}else{return Cordova.exec(this.pluginName+"."+d,c)}};var a=new BXCordovaPlugin("BitrixMobile",true);window.app=a;document.addEventListener("DOMContentLoaded",function(){a.db=new BX.dataBase.create({name:"Bitrix Base",displayName:"Bitrix Base",capacity:1024*1024*4,version:"1.2"})});a.notificationBar=function(b,c){this.exec("notificationBar",{action:b,params:c})};a.actionSheet=function(b,c){this.exec("actionSheet",{action:b,params:c})};a.titleAction=function(b,c){this.exec("titleAction",{action:b,params:c})};a.refresh=function(b,c){this.exec("refreshAction",{action:b,params:c})};a.textPanelAction=function(b,c){this.exec("textPanelAction",{action:b,params:c})};a.showSlidingPanel=function(b){return this.exec("showSlidingPanel",b)};a.changeAccount=function(){return this.exec("changeAccount",{})};a.showDocumentsCache=function(b){return this.exec("showDocumentsCache",b)};a.showButtonPanel=function(b){return this.exec("showButtonPanel",b)};a.hideSlidingPanel=a.hideButtonPanel=function(b){return this.exec("hideSlidingPanel",b)};a.showSelectPicker=function(b){return this.exec("showSelectPicker",b)};a.hideSelectPicker=function(b){return this.exec("hideSelectPicker",b)};a.updateButtonBadge=function(b){return this.exec("updateButtonBadge",b)};a.openBarCodeScanner=function(b){return this.exec("openBarCodeScanner",b)};a.openPhotos=function(b){return this.exec("openPhotos",b)};a.removeAllCache=function(b){return this.exec("removeAllCache",b)};a.loadPageBlank=function(b){return this.exec("openNewPage",b)};a.loadPageStart=function(b){return this.exec("loadPage",b)};a.confirm=function(d){if(!this.available){document.addEventListener("deviceready",BX.proxy(function(){this.confirm(d)},this),false);return}var c={callback:function(){},title:"",text:"",buttons:"OK"};if(d){if(d.title){c.title=d.title}if(d.buttons&&d.buttons.length>0){c.buttons="";for(var b=0;b<d.buttons.length;b++){if(c.buttons.length>0){c.buttons+=","+d.buttons[b]}else{c.buttons=d.buttons[b]}}}c.accept=d.accept;if(d.text){c.text=d.text}if(d.callback&&typeof(d.callback)=="function"){c.callback=d.callback}}navigator.notification.confirm(c.text,c.callback,c.title,c.buttons)};a.alert=function(c){if(!this.available){document.addEventListener("deviceready",BX.proxy(function(){this.alert(c)},this),false);return}var b={callback:function(){},title:"",button:"",text:""};if(typeof c=="object"){if(c.title){b.title=c.title}if(c.button){b.button=c.button}if(c.text){b.text=c.text}if(c.callback&&typeof(c.callback)=="function"){b.callback=c.callback}}else{b.text=c}navigator.notification.alert(b.text,b.callback,b.title,b.button)};a.openLeft=function(){return this.exec("openMenu")};a.setPageTitle=function(b){return this.exec("setPageTitle",b)};a.removeTableCache=function(b){return this.exec("removeTableCache",{table_id:b})};a.showDatePicker=function(b){return this.exec("showDatePicker",b)};a.hideDatePicker=function(){return this.exec("hideDatePicker")};a.showInput=function(b){return this.exec("showInput",b)};a.showInputLoading=function(b){if(b&&b!==true){b=false}return this.exec("showInputLoading",{status:b})};a.clearInput=function(){return this.exec("clearInput")};a.hideInput=function(){return this.exec("hideInput")};a.reload=function(b){var b=b||{url:document.location.href};if(window.platform=="android"){this.exec("reload",b)}else{document.location.href=b.url}};a.flipScreen=function(){return this.exec("flipScreen")};a.removeButtons=function(b){return this.exec("removeButtons",b)};a.openBXTable=function(c){if(typeof(c.table_settings)!="undefined"){c.TABLE_SETTINGS=c.table_settings;delete c.table_settings}if(c.TABLE_SETTINGS.markmode&&c.TABLE_SETTINGS.markmode==true){if(c.TABLE_SETTINGS.callback&&typeof(c.TABLE_SETTINGS.callback)=="function"){var b=c.TABLE_SETTINGS.callback;c.TABLE_SETTINGS.callback=function(d){b(BitrixMobile.Utils.htmlspecialchars(d))}}}if(typeof c.TABLE_SETTINGS.modal!=="undefined"){c.modal=c.TABLE_SETTINGS.modal}if(typeof c.TABLE_SETTINGS.name!=="undefined"){c.TABLE_SETTINGS.showtitle=true}return this.exec("openBXTable",c)};a.openDocument=function(b){return this.exec("openDocument",b)};a.showPopupLoader=function(b){return this.exec("showPopupLoader",b)};a.hidePopupLoader=function(b){return this.exec("hidePopupLoader",b)};a.changeCurPageParams=function(b){return this.exec("changeCurPageParams",b)};a.getPageParams=function(b){if(!this.enableInVersion(3)){return false}return this.exec("getPageParams",b)};a.menuCreate=function(b){return this.exec("menuCreate",b)};a.menuShow=function(){return this.exec("menuShow")};a.menuHide=function(){return this.exec("menuHide")};a.enableInVersion=function(b,c){if(this.apiVersion==0){try{if(typeof(BXMobileAppContext)!="undefined"&&typeof(BXMobileAppContext.getApiVersion)=="function"){this.apiVersion=BXMobileAppContext.getApiVersion()}else{if(typeof(appVersion)!="undefined"){this.apiVersion=appVersion}}}catch(d){}}return(typeof(c)!="undefined"&&c==true)?(parseInt(this.apiVersion)==parseInt(b)):(parseInt(this.apiVersion)>=parseInt(b))};a.checkOpenStatus=function(b){return this.exec("checkOpenStatus",b)};a.asyncRequest=function(b){return this.exec("asyncRequest",b)};a.openUrl=function(b){return this.exec("openUrl",b)};a.RegisterCallBack=function(b){if(typeof(b)=="function"){this.callbackIndex++;this.callbacks["callback"+this.callbackIndex]=b;return this.callbackIndex}};a.CallBackExecute=function(c,b){if(this.callbacks["callback"+c]&&(typeof this.callbacks["callback"+c])==="function"){this.callbacks["callback"+c](b)}};a.onCustomEvent=function(d,f,e,c){if(typeof c=="undefined"){c=true}if(!this.available){document.addEventListener("deviceready",BX.delegate(function(){this.onCustomEvent(d,f,e,c)},this),false);return}if(c){f=this.prepareParams(f)}if(typeof(f)=="object"){f=JSON.stringify(f)}if(device.platform.toUpperCase()=="ANDROID"||device.cordova>"2.0.0"){var b={eventName:d,params:f};return Cordova.exec(null,null,"BitrixMobile","onCustomEvent",[b])}else{return Cordova.exec("BitrixMobile.onCustomEvent",d,f,e)}};a.getVar=function(b){return this.exec("getVar",b)};a.passVar=function(b,c){try{evalVar=window[b];if(!evalVar){evalVar="empty"}}catch(d){evalVar=""}if(evalVar){if(typeof(evalVar)=="object"){evalVar=JSON.stringify(evalVar)}if(platform.toUpperCase()=="ANDROID"){c=c||false;if(c){Bitrix24Android.receiveStringValue(JSON.stringify({variable:evalVar,key:c}))}else{Bitrix24Android.receiveStringValue(evalVar)}}else{return evalVar}}};a.takePhoto=function(b){if(!this.available){document.addEventListener("deviceready",BX.proxy(function(){this.takePhoto(b)},this),false);return}if(!b.callback){b.callback=function(){}}if(!b.fail){b.fail=function(){}}var c={quality:(b.quality||(this.enableInVersion(2)?40:10)),correctOrientation:(b.correctOrientation||false),targetWidth:(b.targetWidth||false),targetHeight:(b.targetHeight||false),sourceType:((typeof b.source!="undefined")?b.source:0),mediaType:((typeof b.mediaType!="undefined")?b.mediaType:0),allowEdit:((typeof b.allowEdit!="undefined")?b.allowEdit:false),saveToPhotoAlbum:((typeof b.saveToPhotoAlbum!="undefined")?b.saveToPhotoAlbum:false)};if(b.destinationType!==undefined){c.destinationType=b.destinationType}navigator.camera.getPicture(b.callback,b.fail,c)};a.openMenu=function(){return this.exec("openMenu")};a.showModalDialog=function(b){if(typeof(b.cache)=="undefined"){b.cache=false}return this.exec("showModalDialog",b)};a.closeModalDialog=function(b){return this.exec("closeModalDialog",b)};a.closeController=function(b){return this.exec("closeController",b)};a.addButtons=function(b){return this.exec("addButtons",b)};a.openContent=function(){return this.exec("openContent")};a.closeMenu=function(){return this.exec("closeMenu")};a.loadPage=function(c,b){if(this.enableInVersion(2)&&b){params={url:c,page_id:b};return this.exec("loadPage",params)}return this.exec("loadPage",c)};a.setPageID=function(b){return this.exec("setPageID",b)};a.openNewPage=function(b,c,e){if(this.enableInVersion(3)){var d={url:b,data:c,title:e};return this.exec("openNewPage",d)}else{return this.exec("openNewPage",b)}};a.loadMenu=function(b){return this.exec("loadMenu",b)};a.openTable=function(c){if(c.markmode&&c.markmode==true){if(c.callback&&typeof(c.callback)=="function"){if(!(c.skipSpecialChars&&c.skipSpecialChars===true)){var b=c.callback;c.callback=function(d){b(BitrixMobile.Utils.htmlspecialchars(d))}}}}return this.exec("openTable",c)};a.openUserList=function(b){return this.exec("openUserList",b)};a.addUserListButton=function(b){return this.exec("addUserListButton",b)};a.pullDown=function(f){if(typeof f.backgroundColor=="undefined"){var c=(document.body.className.length>0?document.querySelector("."+document.body.className):null);if(c!=null){var d=getComputedStyle(c);var e=function(g){g=g.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return(g&&g.length===4)?"#"+("0"+parseInt(g[1],10).toString(16)).slice(-2)+("0"+parseInt(g[2],10).toString(16)).slice(-2)+("0"+parseInt(g[3],10).toString(16)).slice(-2):""};var b=e(d.backgroundColor);if(b!="#000000"){f.backgroundColor=b}else{f.backgroundColor="#ffffff"}}}else{f.backgroundColor="#ffffff"}return this.exec("pullDown",f)};a.pullDownLoadingStop=function(){return this.exec("pullDownLoadingStop")};a.enableScroll=function(b){var b=b||false;return this.exec("enableScroll",b)};a.enableCaptureKeyboard=function(b){var b=b||false;return this.exec("enableCaptureKeyboard",b)};a.enableLoadingScreen=function(b){var b=b||false;return this.exec("enableLoadingScreen",b)};a.showLoadingScreen=function(){return this.exec("showLoadingScreen")};a.hideLoadingScreen=function(){return this.exec("hideLoadingScreen")};a.visibleNavigationBar=function(b){var b=b||false;return this.exec("visibleNavigationBar",b)};a.visibleToolBar=function(b){var b=b||false;return this.exec("visibleToolBar",b)};a.enableSliderMenu=function(b){var b=b||false;return this.exec("enableSliderMenu",b)};a.enableRight=function(b){var b=b||false;return this.exec("enableRight",b)};a.setCounters=function(b){return this.exec("setCounters",b)};a.setBadge=function(b){return this.exec("setBadge",b)};a.refreshPanelPage=function(c){if(!c){c=""}var b={page:c};return this.exec("refreshPanelPage",b)};a.setPanelPages=function(b){return this.exec("setPanelPages",b)};a.getToken=function(){var b="APPLE";if(platform!="ios"){b="GOOGLE"}var c={callback:function(d){BX.proxy(BX.ajax.post(a.dataBrigePath,{mobile_action:"save_device_token",device_name:(typeof device.name=="undefined"?device.model:device.name),uuid:device.uuid,device_token:d,device_type:b,sessid:BX.bitrix_sessid()},function(e){}),this)}};return this.exec("getToken",c)};a.BasicAuth=function(d){d=d||{};var c=(d.success&&typeof(d.success)=="function")?d.success:function(){};var e=(d.failture&&typeof(d.failture)=="function")?d.failture:function(){};var b={check_url:d.check_url,success:function(f){if(typeof f!="object"){try{f=JSON.parse(f)}catch(g){f={status:"failed"}}}if(f.status=="success"&&f.sessid_md5){if(BX.message.bitrix_sessid!=f.sessid_md5){BX.message.bitrix_sessid=f.sessid_md5;a.onCustomEvent("onSessIdChanged",{sessid:f.sessid_md5})}}c(f)},failture:function(f){if(f.status=="failed"){a.exec("showAuthForm")}else{e(f)}}};return this.exec("BasicAuth",b)};a.logOut=function(){if(this.enableInVersion(2)){this.asyncRequest({url:this.dataBrigePath+"?mobile_action=logout&uuid="+device.uuid});return this.exec("showAuthForm")}var b=new XMLHttpRequest();b.open("GET",this.dataBrigePath+"?mobile_action=logout&uuid="+device.uuid,true);b.onreadystatechange=function(){if(b.readyState==4&&b.status=="200"){return a.exec("showAuthForm")}};b.send(null)};a.getCurrentLocation=function(b){if(!this.available){document.addEventListener("deviceready",BX.proxy(function(){this.getCurrentLocation(b)},this),false);return}var c;var d;if(b){c=b.onsuccess;d=b.onerror}navigator.geolocation.getCurrentPosition(c,d)};a.setVibrate=function(b){b=b||500;navigator.notification.vibrate(parseInt(b))};a.bindloadPageBlank=function(){document.addEventListener("DOMContentLoaded",function(){document.body.addEventListener("click",function(d){var c=null;var b="__bx_android_click_detect__";if(d.target.tagName.toUpperCase()=="A"){c=d.target}else{c=BX.findParent(d.target,{tagName:"A"},10)}if(c&&c.href&&c.href.length>0){if(c.href.indexOf(b)==-1&&c.href.indexOf("javascript")!=0){if(c.href.indexOf("#")==-1){c.href+="#"+b}else{c.href+="&"+b}}}},false)},false)};BitrixMobile={};BitrixMobile.Utils={autoResizeForm:function(j,d,k){if(!j||!d){return}var g=j.parentNode;k=k||126;var f=(j.ownerDocument||document).defaultView.getComputedStyle(j,null).getPropertyValue("height");var b=(g.ownerDocument||document).defaultView.getComputedStyle(g,null).getPropertyValue("height");f=parseInt(f);b=parseInt(b);j.setAttribute("data-orig-height",f);g.setAttribute("data-orig-height",b);var h=f;var e=document.createElement("textarea");e.className="send-message-input";e.style.height=h+"px";e.style.visibility="hidden";e.style.position="absolute";e.style.left="-300px";document.body.appendChild(e);j.addEventListener("change",c,false);j.addEventListener("cut",l,false);j.addEventListener("paste",l,false);j.addEventListener("drop",l,false);j.addEventListener("keyup",c,false);if(window.platform=="android"){j.addEventListener("keydown",l,false)}function c(){e.value=j.value;var m=e.scrollHeight;if(m>k){m=k}if(h!=m){h=m;j.style.height=m+"px";g.style.height=b+(m-f)+"px";d.style.bottom=b+(m-f)+"px";if(window.platform=="android"){window.scrollTo(0,document.documentElement.scrollHeight)}}}function l(){setTimeout(c,0)}},resetAutoResize:function(b,c){if(!b||!c){return}var f=b.parentNode;var d=b.getAttribute("data-orig-height");var e=f.getAttribute("data-orig-height");b.style.height=d+"px";f.style.height=e+"px";c.style.bottom=e+"px"},showHiddenImages:function(){var c=document.getElementsByTagName("img");for(var d=0;d<c.length;d++){var e=c[d];var b=e.getAttribute("data-src");if(!b){continue}if(BitrixMobile.Utils.isElementVisibleOnScreen(e)){e.src=b;e.setAttribute("data-src","")}}},isElementVisibleOnScreen:function(e){var f=BitrixMobile.Utils.getElementCoords(e);var g=window.pageYOffset||document.documentElement.scrollTop;var c=g+document.documentElement.clientHeight;f.bottom=f.top+e.offsetHeight;var d=f.top>g&&f.top<c;var b=f.bottom<c&&f.bottom>g;return d||b},isElementVisibleOn2Screens:function(e){var f=BitrixMobile.Utils.getElementCoords(e);var h=document.documentElement.clientHeight;var g=window.pageYOffset||document.documentElement.scrollTop;var c=g+h;f.bottom=f.top+e.offsetHeight;g-=h;c+=h;var d=f.top>g&&f.top<c;var b=f.bottom<c&&f.bottom>g;return d||b},getElementCoords:function(b){var c=b.getBoundingClientRect();return{originTop:c.top,originLeft:c.left,top:c.top+window.pageYOffset,left:c.left+window.pageXOffset}},htmlspecialchars:function(b){if(BX.type.isString(b)){return b.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}if(BX.type.isArray(b)){for(var d=0;d<b.length;d++){b[d]=BitrixMobile.Utils.htmlspecialchars(b[d])}}else{if(typeof(b)=="object"&&b!=null){var e={};for(var c in b){e[c]=BitrixMobile.Utils.htmlspecialchars(b[c])}b=e}}return b}};BitrixMobile.fastClick={bindDelegate:function(e,d,c){if(typeof window.BX!="undefined"){var b=BX.delegateEvent(d,c);new FastButton(e,b,true)}else{document.addEventListener("DOMContentLoaded",function(){BitrixMobile.fastClick.bindDelegate(e,d,c)})}},bind:function(c,b){new FastButton(c,b,true)}};BitrixMobile.LazyLoad={images:[],status:{hidden:-2,error:-1,"undefined":0,inited:1,loaded:2},types:{image:1,background:2},clearImages:function(){this.images=[]},showImages:function(f){f=f===false?false:true;for(var c=0,d=this.images.length;c<d;c++){var e=this.images[c];if(e.status==this.status.undefined){this._initImage(e)}if(e.status!==this.status.inited){continue}if(!e.node||!e.node.parentNode){e.node=null;e.status=BitrixMobile.LazyLoad.status.error;continue}var b=true;if(f&&e.func){b=e.func(e)}if(b===true&&BitrixMobile.Utils.isElementVisibleOn2Screens(e.node)){if(e.type==BitrixMobile.LazyLoad.types.image){e.node.src=e.src}else{e.node.style.backgroundImage="url('"+e.src+"')"}e.node.setAttribute("data-src","");e.status=this.status.loaded}}},registerImage:function(c,b){if(BX.type.isNotEmptyString(c)){this.images.push({id:c,node:null,src:null,type:null,func:BX.type.isFunction(b)?b:null,status:this.status.undefined})}},registerImages:function(d,b){if(BX.type.isArray(d)){for(var c=0,e=d.length;c<e;c++){this.registerImage(d[c],b)}}},_initImage:function(c){c.status=this.status.error;var b=BX(c.id);if(b){var d=b.getAttribute("data-src");if(BX.type.isNotEmptyString(d)){c.node=b;c.src=d;c.status=this.status.inited;c.type=c.node.tagName.toLowerCase()=="img"?BitrixMobile.LazyLoad.types.image:BitrixMobile.LazyLoad.types.background}}},getImageById:function(d){for(var b=0,c=this.images.length;b<c;b++){if(this.images[b].id==d){return this.images[b]}}return null},removeImage:function(d){for(var b=0,c=this.images.length;b<c;b++){if(this.images[b].id==d){this.images=BX.util.deleteFromArray(this.images,b);break}}},onScroll:function(){BitrixMobile.LazyLoad.showImages()}};window.BitrixAnimation={animate:function(b){if(!b||!b.start||!b.finish||typeof(b.start)!="object"||typeof(b.finish)!="object"){return null}for(var c in b.start){if(!b.finish[c]){delete b.start[c]}}b.progress=function(d){var f={};for(var e in this.start){f[e]=Math.round(this.start[e]+(this.finish[e]-this.start[e])*d)}if(this.step){this.step(f)}};return BitrixAnimation.animateProgress(b)},animateProgress:function(b){var f=new Date();var e=b.transition||BitrixAnimation.transitions.linear;var c=b.duration||1000;var d=setInterval(function(){var g=(new Date()-f)/c;if(g>1){g=1}b.progress(e(g));if(g==1){clearInterval(d);b.complete&&b.complete()}},b.delay||13);return d},makeEaseInOut:function(b){return function(c){if(c<0.5){return b(2*c)/2}else{return(2-b(2*(1-c)))/2}}},makeEaseOut:function(b){return function(c){return 1-b(1-c)}},transitions:{linear:function(b){return b},elastic:function(b){return Math.pow(2,10*(b-1))*Math.cos(20*Math.PI*1.5/3*b)},quad:function(b){return Math.pow(b,2)},cubic:function(b){return Math.pow(b,3)},quart:function(b){return Math.pow(b,4)},quint:function(b){return Math.pow(b,5)},circ:function(b){return 1-Math.sin(Math.acos(b))},back:function(b){return Math.pow(b,2)*((1.5+1)*b-1.5)},bounce:function(e){for(var d=0,c=1;1;d+=c,c/=2){if(e>=(7-4*d)/11){return -Math.pow((11-6*d-11*e)/4,2)+Math.pow(c,2)}}}}};document.addEventListener("DOMContentLoaded",function(){BX.addCustomEvent("onFrameDataReceived",function(b){if(b.lang){a.onCustomEvent("onServerLangReceived",b.lang)}});BX.addCustomEvent("onServerLangReceived",function(c){if(c){for(var b in c){BX.message[b]=c[b]}}})},false);document.addEventListener("deviceready",function(){if(typeof(BXMobileAppContext)!="undefined"){BX.addCustomEvent("onAppPaused",function(){BXMobileAppContext.active=false});BX.addCustomEvent("UIApplicationDidBecomeActiveNotification",function(){BXMobileAppContext.active=true});BXMobileAppContext.isAppActive=function(){if(typeof(this.active)=="undefined"||!a.enableInVersion(16)){this.active=!BXMobileAppContext.isBackground()}return this.active}}a.available=true;BX.addCustomEvent("onSessIdChanged",function(b){BX.message.bitrix_sessid=b.sessid});BXMobileApp.addCustomEvent("onPageParamsChangedLegacy",function(b){if(b.url!=location.pathname+location.search){return false}BXMobileApp.UI.Page.params.set({data:b.data});BX.onCustomEvent("onPageParamsChanged",[b.data]);return true})},false);MobileAjaxWrapper=function(){this.type=null;this.method=null;this.url=null;this.callback=null;this.failure_callback=null;this.progress_callback=null;this.offline=null;this.processData=null;this.xhr=null;this.data=null;this.headers=null};MobileAjaxWrapper.prototype.Init=function(b){if(b.type!="json"){b.type="html"}if(b.method!="POST"){b.method="GET"}if(b.processData=="undefined"){b.processData=true}this.type=b.type;this.method=b.method;this.url=b.url;this.data=b.data;this.headers=(typeof b.headers!="undefined"?b.headers:[]);this.processData=b.processData;this.start=b.start;this.preparePost=b.preparePost;this.callback=b.callback;if(b.callback_failure!="undefined"){this.failure_callback=b.callback_failure}if(b.callback_progress!="undefined"){this.progress_callback=b.callback_progress}if(b.callback_loadstart!="undefined"){this.loadstart_callback=b.callback_loadstart}if(b.callback_loadend!="undefined"){this.loadend_callback=b.callback_loadend}};MobileAjaxWrapper.prototype.Wrap=function(b){this.Init(b);this.xhr=BX.ajax({timeout:30,start:this.start,preparePost:this.preparePost,method:this.method,dataType:this.type,url:this.url,data:this.data,headers:this.headers,processData:this.processData,onsuccess:BX.defer(function(d){var c=false;if(this.xhr.status===0){c=true}else{if(this.type=="json"){c=(typeof d=="object"&&typeof d.status!="undefined"&&d.status=="failed")}else{if(this.type=="html"){c=(d=='{"status":"failed"}')}}}if(c){this.RepeatRequest()}else{this.callback(d)}},this),onfailure:BX.delegate(function(c,d){if(c!==undefined&&c=="status"&&d!==undefined&&d==401){this.RepeatRequest()}else{this.failure_callback()}},this)});if(this.progress_callback!=null){BX.bind(this.xhr,"progress",this.progress_callback)}if(this.load_callback!=null){BX.bind(this.xhr,"load",this.load_callback)}if(this.loadstart_callback!=null){BX.bind(this.xhr,"loadstart",this.loadstart_callback)}if(this.loadend_callback!=null){BX.bind(this.xhr,"loadend",this.loadend_callback)}if(this.error_callback!=null){BX.bind(this.xhr,"error",this.error_callback)}if(this.abort_callback!=null){BX.bind(this.xhr,"abort",this.abort_callback)}return this.xhr};MobileAjaxWrapper.prototype.RepeatRequest=function(){a.BasicAuth({success:BX.delegate(function(b){this.data.sessid=b.sessid_md5;this.xhr=BX.ajax({timeout:30,method:this.method,dataType:this.type,url:this.url,data:this.data,onsuccess:BX.delegate(function(d){if(this.xhr.status===0){var c=true}else{if(this.type=="json"){var c=(typeof d=="object"&&typeof d.status!="undefined"&&d.status=="failed")}else{if(this.type=="html"){var c=(d=='{"status":"failed"}')}}}if(c){this.failure_callback()}else{this.callback(d)}},this),onfailure:BX.delegate(function(){this.failure_callback()},this)})},this),failture:BX.delegate(function(){this.failure_callback()},this)})};MobileAjaxWrapper.prototype.OfflineAlert=function(b){navigator.notification.alert(BX.message("MobileAppOfflineMessage"),(b||BX.DoNothing),BX.message("MobileAppOfflineTitle"))};BMAjaxWrapper=new MobileAjaxWrapper;MobileNetworkStatus=function(){this.offline=null;var b=this;document.addEventListener("offline",function(){b.offline=true},false);document.addEventListener("online",function(){b.offline=false},false);document.addEventListener("DOMContentLoaded",function(){BX.addCustomEvent("UIApplicationDidBecomeActiveNotification",function(d){var c=navigator.network.connection.type;b.offline=(c==Connection.UNKNOWN||c==Connection.NONE)})},false)};BMNetworkStatus=new MobileNetworkStatus})();(function(){function b(f,e,g,c){if(f.addEventListener){f.addEventListener(e,g,c);return{destroy:function(){f.removeEventListener(e,g,c)}}}else{var d=function(h){g.handleEvent(window.event,g)};f.attachEvent("on"+e,d);return{destroy:function(){f.detachEvent("on"+e,d)}}}}var a=true;this.FastButton=function(d,e,c){this.events=[];this.touchEvents=[];this.element=d;this.handler=e;this.useCapture=c;if(a){this.events.push(b(d,"touchstart",this,this.useCapture))}this.events.push(b(d,"click",this,this.useCapture))};this.FastButton.prototype.destroy=function(){for(i=this.events.length-1;i>=0;i-=1){this.events[i].destroy()}this.events=this.touchEvents=this.element=this.handler=this.fastButton=null};this.FastButton.prototype.handleEvent=function(c){switch(c.type){case"touchstart":this.onTouchStart(c);break;case"touchmove":this.onTouchMove(c);break;case"touchend":this.onClick(c);break;case"click":this.onClick(c);break}};this.FastButton.prototype.onTouchStart=function(c){c.stopPropagation?c.stopPropagation():(c.cancelBubble=true);this.touchEvents.push(b(this.element,"touchend",this,this.useCapture));this.touchEvents.push(b(document.body,"touchmove",this,this.useCapture));this.startX=c.touches[0].clientX;this.startY=c.touches[0].clientY};this.FastButton.prototype.onTouchMove=function(c){if(Math.abs(c.touches[0].clientX-this.startX)>10||Math.abs(c.touches[0].clientY-this.startY)>10){this.reset()}};this.FastButton.prototype.onClick=function(d){this.reset();var c=this.handler.call(this.element,d);if(c!==null){d.preventDefault();d.stopPropagation?d.stopPropagation():(d.cancelBubble=true)}if(d.type=="touchend"){clickbuster.preventGhostClick(this.startX,this.startY)}return c};this.FastButton.prototype.reset=function(){for(i=this.touchEvents.length-1;i>=0;i-=1){this.touchEvents[i].destroy()}this.touchEvents=[]};this.clickbuster=function(){};this.clickbuster.preventGhostClick=function(c,d){clickbuster.coordinates.push(c,d);window.setTimeout(clickbuster.pop,2500)};this.clickbuster.pop=function(){clickbuster.coordinates.splice(0,2)};this.clickbuster.onClick=function(e){for(var d=0;d<clickbuster.coordinates.length;d+=2){var c=clickbuster.coordinates[d];var f=clickbuster.coordinates[d+1];if(Math.abs(e.clientX-c)<25&&Math.abs(e.clientY-f)<25){e.stopPropagation?e.stopPropagation():(e.cancelBubble=true);e.preventDefault?e.preventDefault():(e.returnValue=false)}}};if(a){document.addEventListener("click",clickbuster.onClick,true);clickbuster.coordinates=[]}})(this);function ReadyDevice(a){if(app.available==true&&typeof(a)=="function"){a()}else{document.addEventListener("deviceready",a,false)}};