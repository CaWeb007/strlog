BX.namespace("BX.Storeassist.Admin");BX.Storeassist.Admin={showDocumentation:function(a){if(!a){return}BX.PopupWindowManager.create("storeassistDoc",null,{autoHide:false,offsetLeft:0,offsetTop:0,overlay:false,draggable:{restrict:true},closeByEsc:true,contentColor:"white",contentNoPaddings:true,closeIcon:{right:"12px",top:"10px"},titleBar:{content:BX.create("span",{html:'<a href="'+a+'" target=_blank style="color:grey;">'+BX.message("STOREAS_OPEN_NEW_TAB")+'</a>&nbsp;&nbsp;<a href="javascript:void(0)" onclick="BX.PopupWindowManager.getCurrentPopup().close();" style="color:grey;">'+BX.message("STOREAS_CLOSE")+"</a>",style:{display:"block",padding:"14px 41px","text-align":"right","font-size":"14px"}})},content:"<div class='bx-storas-waiter'><iframe onload='BX.removeClass(this.parentNode, \"bx-storas-waiter\")' src='"+a+"?video=small' width='757px' height='700px' border='0' frameborder='0'></iframe></div>",events:{onPopupClose:function(){this.destroy()}}}).show()},toggleStep:function(c){if(!c){return}var b=document.querySelector('[data-role="step'+c+'"]');var a=document.querySelector('[data-role="container'+c+'"]');var e=document.querySelector('[data-role="toggle'+c+'"]');if(BX.hasClass(b,"close")){if(e){e.innerHTML=BX.message("STOREAS_HIDE")}BX.removeClass(b,"close");BX.addClass(b,"open");a.style.opacity=0;a.style.display="block";a.style.padding=0;a.style.margin=0;a.style.height="";var d=a.offsetHeight;a.style.height=0;a.style.opacity="";a.style.display="";a.style.padding="";a.style.margin="";new BX.easing({duration:600,start:{height:0},finish:{height:d},transition:BX.easing.transitions.linear,step:function(f){a.style.height=f.height+"px"},complete:function(){}}).animate();BX.userOptions.save("storeassist","step_toggle",c,"Y")}else{if(BX.hasClass(b,"open")){if(e){e.innerHTML=BX.message("STOREAS_SHOW")}new BX.easing({duration:600,start:{height:a.offsetHeight},finish:{height:0},transition:BX.easing.transitions.linear,step:function(f){a.style.height=f.height+"px"},complete:function(){BX.removeClass(b,"open");BX.addClass(b,"close")}}).animate();BX.userOptions.save("storeassist","step_toggle",c,"N")}}},setOption:function(b,a){if(!b){return}a=(a=="Y")?"Y":"N";BX.ajax({method:"POST",dataType:"json",url:"/bitrix/tools/storeassist.php",data:{pageId:b,status:a,action:"setOption",sessid:BX.bitrix_sessid()},onsuccess:function(c){if(c.success=="Y"){location.reload()}}})},percentMoveInit:function(c,b){if(!c||!b){return}this.percentRuleSlider=c;this.currentPercent=b;var a=this.percentRuleSlider.parentNode.parentNode.parentNode;this.percentStatuses=BX.findChildren(a,{className:"adm-s-thermometer-block-status"},true);this.currentStatus=BX.findChild(a,{className:"active"},true,false);BX.bind(this.percentRuleSlider,"mousedown",BX.proxy(function(d){this.movePercentSlider(d)},this))},getPageX:function(d){d=d||window.event;var c=null;if(d.pageX!=null){c=d.pageX}else{if(d.clientX!=null){var b=document.documentElement;var a=document.body;c=d.clientX+(b.scrollLeft||a&&a.scrollLeft||0);c-=b.clientLeft||0}}return c},getXCoord:function(d){var c=d.getBoundingClientRect();var b=document.body;var a=document.documentElement;var f=window.pageXOffset||a.scrollLeft||b.scrollLeft;var g=a.clientLeft||b.clientLeft||0;var e=c.left+f-g;return Math.round(e)},movePercentSlider:function(a){this.percentRuleSlider.ondragstart=function(){return false};document.onmousemove=BX.proxy(function(g){var e=this.getPageX(g);var c=this.getXCoord(this.percentRuleSlider.parentNode);var f=e-c;if(f<0){f=0}var b=this.percentRuleSlider.parentNode.offsetWidth;if(f>b){f=b}this.newLeft=((f*100)/b);this.percentRuleSlider.style.left=this.newLeft+"%";BX.firstChild(this.percentRuleSlider).innerHTML=Math.round(this.newLeft)+"%";var h="red";if(this.newLeft>18&&this.newLeft<=36){h="orange"}else{if(this.newLeft>36&&this.newLeft<=54){h="yellow"}else{if(this.newLeft>54&&this.newLeft<=72){h="green"}else{if(this.newLeft>72&&this.newLeft<=90){h="lightgreen"}else{if(this.newLeft>90){h="blue"}}}}}for(var d=0;d<this.percentStatuses.length;d++){if(BX.hasClass(this.percentStatuses[d],h)){BX.addClass(this.percentStatuses[d],"active")}else{BX.removeClass(this.percentStatuses[d],"active")}}},this);document.onmouseup=BX.proxy(function(){document.onmousemove=document.onmouseup=null;BX.addClass(this.percentRuleSlider,"animate");BX.firstChild(this.percentRuleSlider).innerHTML=this.currentPercent+"%";for(var b=0;b<this.percentStatuses.length;b++){BX.removeClass(this.percentStatuses[b],"active")}BX.addClass(this.currentStatus,"active");this.percentRuleSlider.style.left=this.currentPercent+"%";setTimeout(BX.proxy(function(){BX.removeClass(this.percentRuleSlider,"animate")},this),550)},this)}};