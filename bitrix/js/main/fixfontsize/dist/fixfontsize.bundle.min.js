(function(){BX.FixFontSize=function(d){var a,c,b;this.node=null;this.prevWindowSize=0;this.prevWrapperSize=0;this.mainWrapper=null;this.textWrapper=null;this.objList=d.objList;this.minFontSizeList=[];this.minFontSize=0;if(d.onresize){this.prevWindowSize=window.innerWidth||document.documentElement.clientWidth;BX.bind(window,"resize",BX.throttle(this.onResize,350,this))}if(d.onAdaptiveResize){a=this.objList[0].scaleBy||this.objList[0].node;c=getComputedStyle(a);this.prevWrapperSize=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight);BX.bind(window,"resize",BX.throttle(this.onAdaptiveResize,350,this))}this.createTestNodes();this.decrease()};BX.FixFontSize.prototype={createTestNodes:function(){this.textWrapper=BX.create("div",{style:{display:"inline-block",whiteSpace:"nowrap"}});this.mainWrapper=BX.create("div",{style:{height:0,overflow:"hidden"},children:[this.textWrapper]})},insertTestNodes:function(){document.body.appendChild(this.mainWrapper)},removeTestNodes:function(){document.body.removeChild(this.mainWrapper)},decrease:function(){var d,e,a,c;this.insertTestNodes();for(var b=this.objList.length-1;b>=0;b--){a=this.objList[b].scaleBy||this.objList[b].node;c=getComputedStyle(a);d=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight);e=parseInt(getComputedStyle(this.objList[b].node)["font-size"]);this.textWrapperSetStyle(this.objList[b].node);if(this.textWrapperInsertText(this.objList[b].node)){while(this.textWrapper.offsetWidth>d&&e>0){this.textWrapper.style.fontSize=--e+"px"}if(this.objList[b].smallestValue){this.minFontSize=this.minFontSize?Math.min(this.minFontSize,e):e;this.minFontSizeList.push(this.objList[b].node)}else{this.objList[b].node.style.fontSize=e+"px"}}}if(this.minFontSizeList.length>0){this.setMinFont()}this.removeTestNodes()},increase:function(){this.insertTestNodes();var d,e,a,c;this.insertTestNodes();for(var b=this.objList.length-1;b>=0;b--){a=this.objList[b].scaleBy||this.objList[b].node;c=getComputedStyle(a);d=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight);e=parseInt(getComputedStyle(this.objList[b].node)["font-size"]);this.textWrapperSetStyle(this.objList[b].node);if(this.textWrapperInsertText(this.objList[b].node)){while(this.textWrapper.offsetWidth<d&&e<this.objList[b].maxFontSize){this.textWrapper.style.fontSize=++e+"px"}e--;if(this.objList[b].smallestValue){this.minFontSize=this.minFontSize?Math.min(this.minFontSize,e):e;this.minFontSizeList.push(this.objList[b].node)}else{this.objList[b].node.style.fontSize=e+"px"}}}if(this.minFontSizeList.length>0){this.setMinFont()}this.removeTestNodes()},setMinFont:function(){for(var a=this.minFontSizeList.length-1;a>=0;a--){this.minFontSizeList[a].style.fontSize=this.minFontSize+"px"}this.minFontSize=0},onResize:function(){var a=window.innerWidth||document.documentElement.clientWidth;if(this.prevWindowSize>a){this.decrease()}else{if(this.prevWindowSize<a){this.increase()}}this.prevWindowSize=a},onAdaptiveResize:function(){var a=this.objList[0].scaleBy||this.objList[0].node,c=getComputedStyle(a),b=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight);if(this.prevWrapperSize>b){this.decrease()}else{if(this.prevWrapperSize<b){this.increase()}}this.prevWrapperSize=b},textWrapperInsertText:function(a){if(a.textContent){this.textWrapper.textContent=a.textContent;return true}else{if(a.innerText){this.textWrapper.innerText=a.innerText;return true}else{return false}}},textWrapperSetStyle:function(a){this.textWrapper.style.fontFamily=getComputedStyle(a)["font-family"];this.textWrapper.style.fontSize=getComputedStyle(a)["font-size"];this.textWrapper.style.fontStyle=getComputedStyle(a)["font-style"];this.textWrapper.style.fontWeight=getComputedStyle(a)["font-weight"];this.textWrapper.style.lineHeight=getComputedStyle(a)["line-height"]}};BX.FixFontSize.init=function(a){return new BX.FixFontSize(a)}})();