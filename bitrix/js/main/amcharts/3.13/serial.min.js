AmCharts.AmSerialChart=AmCharts.Class({inherits:AmCharts.AmRectangularChart,construct:function(d){this.type="serial";AmCharts.AmSerialChart.base.construct.call(this,d);this.cname="AmSerialChart";this.theme=d;this.createEvents("changed");this.columnSpacing=5;this.columnSpacing3D=0;this.columnWidth=0.8;this.updateScrollbar=!0;var c=new AmCharts.CategoryAxis(d);c.chart=this;this.categoryAxis=c;this.zoomOutOnDataUpdate=!0;this.mouseWheelZoomEnabled=this.mouseWheelScrollEnabled=this.rotate=this.skipZoom=!1;this.minSelectedTime=0;AmCharts.applyTheme(this,d,this.cname)},initChart:function(){AmCharts.AmSerialChart.base.initChart.call(this);this.updateCategoryAxis(this.categoryAxis,this.rotate,"categoryAxis");this.dataChanged&&(this.updateData(),this.dataChanged=!1,this.dispatchDataUpdated=!0);var e=this.chartCursor;e&&(e.updateData(),e.fullWidth&&(e.fullRectSet=this.cursorLineSet));var e=this.countColumns(),c=this.graphs,f;for(f=0;f<c.length;f++){c[f].columnCount=e}this.updateScrollbar=!0;this.drawChart();this.autoMargins&&!this.marginsUpdated&&(this.marginsUpdated=!0,this.measureMargins())},handleWheelReal:function(r,q){if(!this.wheelBusy){var o=this.categoryAxis,p=o.parseDates,m=o.minDuration(),k=o=1;this.mouseWheelZoomEnabled?q||(o=-1):q&&(o=-1);var j=this.chartData.length,i=this.lastTime,l=this.firstTime;0>r?p?(j=this.endTime-this.startTime,p=this.startTime+o*m,m=this.endTime+k*m,0<k&&0<o&&m>=i&&(m=i,p=i-j),this.zoomToDates(new Date(p),new Date(m))):(0<k&&0<o&&this.end>=j-1&&(o=k=0),p=this.start+o,m=this.end+k,this.zoomToIndexes(p,m)):p?(j=this.endTime-this.startTime,p=this.startTime-o*m,m=this.endTime-k*m,0<k&&0<o&&p<=l&&(p=l,m=l+j),this.zoomToDates(new Date(p),new Date(m))):(0<k&&0<o&&1>this.start&&(o=k=0),p=this.start-o,m=this.end-k,this.zoomToIndexes(p,m))}},validateData:function(b){this.marginsUpdated=!1;this.zoomOutOnDataUpdate&&!b&&(this.endTime=this.end=this.startTime=this.start=NaN);AmCharts.AmSerialChart.base.validateData.call(this)},drawChart:function(){AmCharts.AmSerialChart.base.drawChart.call(this);var e=this.chartData;if(AmCharts.ifArray(e)){var c=this.chartScrollbar;c&&c.draw();if(0<this.realWidth&&0<this.realHeight){var e=e.length-1,f,c=this.categoryAxis;if(c.parseDates&&!c.equalSpacing){if(c=this.startTime,f=this.endTime,isNaN(c)||isNaN(f)){c=this.firstTime,f=this.lastTime}}else{if(c=this.start,f=this.end,isNaN(c)||isNaN(f)){c=0,f=e}}this.endTime=this.startTime=this.end=this.start=void 0;this.zoom(c,f)}}else{this.cleanChart()}this.dispDUpd();this.chartCreated=!0},cleanChart:function(){AmCharts.callMethod("destroy",[this.valueAxes,this.graphs,this.categoryAxis,this.chartScrollbar,this.chartCursor])},updateCategoryAxis:function(e,c,f){e.chart=this;e.id=f;e.rotate=c;e.axisRenderer=AmCharts.RecAxis;e.guideFillRenderer=AmCharts.RecFill;e.axisItemRenderer=AmCharts.RecItem;e.setOrientation(!this.rotate);e.x=this.marginLeftReal;e.y=this.marginTopReal;e.dx=this.dx;e.dy=this.dy;e.width=this.plotAreaWidth-1;e.height=this.plotAreaHeight-1;e.viW=this.plotAreaWidth-1;e.viH=this.plotAreaHeight-1;e.viX=this.marginLeftReal;e.viY=this.marginTopReal;e.marginsChanged=!0},updateValueAxes:function(){AmCharts.AmSerialChart.base.updateValueAxes.call(this);var f=this.valueAxes,e;for(e=0;e<f.length;e++){var g=f[e],h=this.rotate;g.rotate=h;g.setOrientation(h);h=this.categoryAxis;if(!h.startOnAxis||h.parseDates){g.expandMinMax=!0}}},updateData:function(){this.parseData();var e=this.graphs,c,f=this.chartData;for(c=0;c<e.length;c++){e[c].data=f}0<f.length&&(this.firstTime=this.getStartTime(f[0].time),this.lastTime=this.getEndTime(f[f.length-1].time))},getStartTime:function(d){var c=this.categoryAxis;return AmCharts.resetDateToMin(new Date(d),c.minPeriod,1,c.firstDayOfWeek).getTime()},getEndTime:function(d){var c=AmCharts.extractPeriod(this.categoryAxis.minPeriod);return AmCharts.changeDate(new Date(d),c.period,c.count,!0).getTime()-1},updateMargins:function(){AmCharts.AmSerialChart.base.updateMargins.call(this);var b=this.chartScrollbar;b&&(this.getScrollbarPosition(b,this.rotate,this.categoryAxis.position),this.adjustMargins(b,this.rotate))},updateScrollbars:function(){AmCharts.AmSerialChart.base.updateScrollbars.call(this);this.updateChartScrollbar(this.chartScrollbar,this.rotate)},zoom:function(e,c){var f=this.categoryAxis;f.parseDates&&!f.equalSpacing?this.timeZoom(e,c):this.indexZoom(e,c);this.updateLegendValues()},timeZoom:function(i,f){var m=this.maxSelectedTime;isNaN(m)||(f!=this.endTime&&f-i>m&&(i=f-m,this.updateScrollbar=!0),i!=this.startTime&&f-i>m&&(f=i+m,this.updateScrollbar=!0));var p=this.minSelectedTime;if(0<p&&f-i<p){var l=Math.round(i+(f-i)/2),p=Math.round(p/2);i=l-p;f=l+p}var k=this.chartData,l=this.categoryAxis;if(AmCharts.ifArray(k)&&(i!=this.startTime||f!=this.endTime)){var j=l.minDuration(),p=this.firstTime,o=this.lastTime;i||(i=p,isNaN(m)||(i=o-m));f||(f=o);i>o&&(i=o);f<p&&(f=p);i<p&&(i=p);f>o&&(f=o);f<i&&(f=i+j);f-i<j/5&&(f<o?f=i+j/5:i=f-j/5);this.startTime=i;this.endTime=f;m=k.length-1;j=this.getClosestIndex(k,"time",i,!0,0,m);k=this.getClosestIndex(k,"time",f,!1,j,m);l.timeZoom(i,f);l.zoom(j,k);this.start=AmCharts.fitToBounds(j,0,m);this.end=AmCharts.fitToBounds(k,0,m);this.zoomAxesAndGraphs();this.zoomScrollbar();i!=p||f!=o?this.showZB(!0):this.showZB(!1);this.updateColumnsDepth();this.dispatchTimeZoomEvent()}},indexZoom:function(f,e){var g=this.maxSelectedSeries;isNaN(g)||(e!=this.end&&e-f>g&&(f=e-g,this.updateScrollbar=!0),f!=this.start&&e-f>g&&(e=f+g,this.updateScrollbar=!0));if(f!=this.start||e!=this.end){var h=this.chartData.length-1;isNaN(f)&&(f=0,isNaN(g)||(f=h-g));isNaN(e)&&(e=h);e<f&&(e=f);e>h&&(e=h);f>h&&(f=h-1);0>f&&(f=0);this.start=f;this.end=e;this.categoryAxis.zoom(f,e);this.zoomAxesAndGraphs();this.zoomScrollbar();0!==f||e!=this.chartData.length-1?this.showZB(!0):this.showZB(!1);this.updateColumnsDepth();this.dispatchIndexZoomEvent()}},updateGraphs:function(){AmCharts.AmSerialChart.base.updateGraphs.call(this);var e=this.graphs,c;for(c=0;c<e.length;c++){var f=e[c];f.columnWidthReal=this.columnWidth;f.categoryAxis=this.categoryAxis;AmCharts.isString(f.fillToGraph)&&(f.fillToGraph=this.getGraphById(f.fillToGraph))}},updateColumnsDepth:function(){var g,f=this.graphs,i;AmCharts.remove(this.columnsSet);this.columnsArray=[];for(g=0;g<f.length;g++){i=f[g];var j=i.columnsArray;if(j){var h;for(h=0;h<j.length;h++){this.columnsArray.push(j[h])}}}this.columnsArray.sort(this.compareDepth);if(0<this.columnsArray.length){f=this.container.set();this.columnSet.push(f);for(g=0;g<this.columnsArray.length;g++){f.push(this.columnsArray[g].column.set)}i&&f.translate(i.x,i.y);this.columnsSet=f}},compareDepth:function(d,c){return d.depth>c.depth?1:-1},zoomScrollbar:function(){var d=this.chartScrollbar,c=this.categoryAxis;d&&this.updateScrollbar&&d.enabled&&(d.dragger.stop(),c.parseDates&&!c.equalSpacing?d.timeZoom(this.startTime,this.endTime):d.zoom(this.start,this.end),this.updateScrollbar=!0)},updateTrendLines:function(){var e=this.trendLines,c;for(c=0;c<e.length;c++){var f=e[c],f=AmCharts.processObject(f,AmCharts.TrendLine,this.theme);e[c]=f;f.chart=this;f.id||(f.id="trendLineAuto"+c+"_"+(new Date).getTime());AmCharts.isString(f.valueAxis)&&(f.valueAxis=this.getValueAxisById(f.valueAxis));f.valueAxis||(f.valueAxis=this.valueAxes[0]);f.categoryAxis=this.categoryAxis}},zoomAxesAndGraphs:function(){if(!this.scrollbarOnly){var d=this.valueAxes,c;for(c=0;c<d.length;c++){d[c].zoom(this.start,this.end)}d=this.graphs;for(c=0;c<d.length;c++){d[c].zoom(this.start,this.end)}this.zoomTrendLines();(c=this.chartCursor)&&c.zoom(this.start,this.end,this.startTime,this.endTime)}},countColumns:function(){var r=0,q=this.valueAxes.length,o=this.graphs.length,p,m,k=!1,j,i;for(i=0;i<q;i++){m=this.valueAxes[i];var l=m.stackType;if("100%"==l||"regular"==l){for(k=!1,j=0;j<o;j++){p=this.graphs[j],p.tcc=1,p.valueAxis==m&&"column"==p.type&&(!k&&p.stackable&&(r++,k=!0),(!p.stackable&&p.clustered||p.newStack)&&r++,p.columnIndex=r-1,p.clustered||(p.columnIndex=0))}}if("none"==l||"3d"==l){k=!1;for(j=0;j<o;j++){p=this.graphs[j],p.valueAxis==m&&"column"==p.type&&(p.clustered?(p.tcc=1,p.newStack&&(r=0),p.hidden||(p.columnIndex=r,r++)):p.hidden||(k=!0,p.tcc=1,p.columnIndex=0))}k&&0==r&&(r=1)}if("3d"==l){m=1;for(i=0;i<o;i++){p=this.graphs[i],p.newStack&&m++,p.depthCount=m,p.tcc=r}r=m}}return r},parseData:function(){AmCharts.AmSerialChart.base.parseData.call(this);this.parseSerialData()},getCategoryIndexByValue:function(f){var e=this.chartData,g,h;for(h=0;h<e.length;h++){e[h].category==f&&(g=h)}return g},handleCursorChange:function(b){this.updateLegendValues(b.index)},handleCursorZoom:function(b){this.updateScrollbar=!0;this.zoom(b.start,b.end)},handleScrollbarZoom:function(b){this.updateScrollbar=!1;this.zoom(b.start,b.end)},dispatchTimeZoomEvent:function(){if(this.prevStartTime!=this.startTime||this.prevEndTime!=this.endTime){var e={type:"zoomed"};e.startDate=new Date(this.startTime);e.endDate=new Date(this.endTime);e.startIndex=this.start;e.endIndex=this.end;this.startIndex=this.start;this.endIndex=this.end;this.startDate=e.startDate;this.endDate=e.endDate;this.prevStartTime=this.startTime;this.prevEndTime=this.endTime;var c=this.categoryAxis,f=AmCharts.extractPeriod(c.minPeriod).period,c=c.dateFormatsObject[f];e.startValue=AmCharts.formatDate(e.startDate,c,this);e.endValue=AmCharts.formatDate(e.endDate,c,this);e.chart=this;e.target=this;this.fire(e.type,e)}},dispatchIndexZoomEvent:function(){if(this.prevStartIndex!=this.start||this.prevEndIndex!=this.end){this.startIndex=this.start;this.endIndex=this.end;var d=this.chartData;if(AmCharts.ifArray(d)&&!isNaN(this.start)&&!isNaN(this.end)){var c={chart:this,target:this,type:"zoomed"};c.startIndex=this.start;c.endIndex=this.end;c.startValue=d[this.start].category;c.endValue=d[this.end].category;this.categoryAxis.parseDates&&(this.startTime=d[this.start].time,this.endTime=d[this.end].time,c.startDate=new Date(this.startTime),c.endDate=new Date(this.endTime));this.prevStartIndex=this.start;this.prevEndIndex=this.end;this.fire(c.type,c)}}},updateLegendValues:function(f){var e=this.graphs,g;for(g=0;g<e.length;g++){var h=e[g];isNaN(f)?h.currentDataItem=void 0:h.currentDataItem=this.chartData[f].axes[h.valueAxis.id].graphs[h.id]}this.legend&&this.legend.updateValues()},getClosestIndex:function(i,f,m,p,l,k){0>l&&(l=0);k>i.length-1&&(k=i.length-1);var j=l+Math.round((k-l)/2),o=i[j][f];if(m==o){return j}if(1>=k-l){if(p){return l}p=i[k][f];return Math.abs(i[l][f]-m)<Math.abs(p-m)?l:k}return m==o?j:m<o?this.getClosestIndex(i,f,m,p,l,j):this.getClosestIndex(i,f,m,p,j,k)},zoomToIndexes:function(f,e){this.updateScrollbar=!0;var g=this.chartData;if(g){var h=g.length;0<h&&(0>f&&(f=0),e>h-1&&(e=h-1),h=this.categoryAxis,h.parseDates&&!h.equalSpacing?this.zoom(g[f].time,this.getEndTime(g[e].time)):this.zoom(f,e))}},zoomToDates:function(f,e){this.updateScrollbar=!0;var g=this.chartData;if(this.categoryAxis.equalSpacing){var h=this.getClosestIndex(g,"time",f.getTime(),!0,0,g.length);e=AmCharts.resetDateToMin(e,this.categoryAxis.minPeriod,1);g=this.getClosestIndex(g,"time",e.getTime(),!1,0,g.length);this.zoom(h,g)}else{this.zoom(f.getTime(),e.getTime())}},zoomToCategoryValues:function(d,c){this.updateScrollbar=!0;this.zoom(this.getCategoryIndexByValue(d),this.getCategoryIndexByValue(c))},formatPeriodString:function(ab,aa){if(aa){var Y=["value","open","low","high","close"],Z="value open low high close average sum count".split(" "),X=aa.valueAxis,V=this.chartData,U=aa.numberFormatter;U||(U=this.nf);for(var Q=0;Q<Y.length;Q++){for(var W=Y[Q],T=0,S=0,R,H,s,N,I,o=0,P=0,O,L,E,j,K,J=this.start;J<=this.end;J++){var i=V[J];if(i&&(i=i.axes[X.id].graphs[aa.id])){if(i.values){var M=i.values[W];if(this.rotate){if(0>i.x||i.x>i.graph.height){M=NaN}}else{if(0>i.x||i.x>i.graph.width){M=NaN}}if(!isNaN(M)){isNaN(R)&&(R=M);H=M;if(isNaN(s)||s>M){s=M}if(isNaN(N)||N<M){N=M}I=AmCharts.getDecimals(T);var G=AmCharts.getDecimals(M),T=T+M,T=AmCharts.roundTo(T,Math.max(I,G));S++;I=T/S}}if(i.percents&&(i=i.percents[W],!isNaN(i))){isNaN(O)&&(O=i);L=i;if(isNaN(E)||E>i){E=i}if(isNaN(j)||j<i){j=i}K=AmCharts.getDecimals(o);M=AmCharts.getDecimals(i);o+=i;o=AmCharts.roundTo(o,Math.max(K,M));P++;K=o/P}}}o={open:O,close:L,high:j,low:E,average:K,sum:o,count:P};ab=AmCharts.formatValue(ab,{open:R,close:H,high:N,low:s,average:I,sum:T,count:S},Z,U,W+"\\.",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);ab=AmCharts.formatValue(ab,o,Z,this.pf,"percents\\."+W+"\\.")}}return ab=AmCharts.cleanFromEmpty(ab)},formatString:function(i,f,m){var n=f.graph;if(-1!=i.indexOf("[[category]]")){var l=f.serialDataItem.category;if(this.categoryAxis.parseDates){var k=this.balloonDateFormat,j=this.chartCursor;j&&(k=j.categoryBalloonDateFormat);-1!=i.indexOf("[[category]]")&&(k=AmCharts.formatDate(l,k,this),-1!=k.indexOf("fff")&&(k=AmCharts.formatMilliseconds(k,l)),l=k)}i=i.replace(/\[\[category\]\]/g,String(l))}n=n.numberFormatter;n||(n=this.nf);l=f.graph.valueAxis;(k=l.duration)&&!isNaN(f.values.value)&&(l=AmCharts.formatDuration(f.values.value,k,"",l.durationUnits,l.maxInterval,n),i=i.replace(RegExp("\\[\\[value\\]\\]","g"),l));l="value open low high close total".split(" ");k=this.pf;i=AmCharts.formatValue(i,f.percents,l,k,"percents\\.");i=AmCharts.formatValue(i,f.values,l,n,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);i=AmCharts.formatValue(i,f.values,["percents"],k);-1!=i.indexOf("[[")&&(i=AmCharts.formatDataContextValue(i,f.dataContext));return i=AmCharts.AmSerialChart.base.formatString.call(this,i,f,m)},addChartScrollbar:function(b){AmCharts.callMethod("destroy",[this.chartScrollbar]);b&&(b.chart=this,this.listenTo(b,"zoomed",this.handleScrollbarZoom));this.rotate?void 0===b.width&&(b.width=b.scrollbarHeight):void 0===b.height&&(b.height=b.scrollbarHeight);this.chartScrollbar=b},removeChartScrollbar:function(){AmCharts.callMethod("destroy",[this.chartScrollbar]);this.chartScrollbar=null},handleReleaseOutside:function(b){AmCharts.AmSerialChart.base.handleReleaseOutside.call(this,b);AmCharts.callMethod("handleReleaseOutside",[this.chartScrollbar])}});AmCharts.Cuboid=AmCharts.Class({construct:function(E,C,A,B,z,v,s,j,y,r,p,o,G,F,i,H,D){this.set=E.set();this.container=E;this.h=Math.round(A);this.w=Math.round(C);this.dx=B;this.dy=z;this.colors=v;this.alpha=s;this.bwidth=j;this.bcolor=y;this.balpha=r;this.dashLength=F;this.topRadius=H;this.pattern=i;this.rotate=G;this.bcn=D;G?0>C&&0===p&&(p=180):0>A&&270==p&&(p=90);this.gradientRotation=p;0===B&&0===z&&(this.cornerRadius=o);this.draw()},draw:function(){var ay=this.set;ay.clear();var ax=this.container,av=ax.chart,aw=this.w,au=this.h,ar=this.dx,aq=this.dy,am=this.colors,at=this.alpha,ap=this.bwidth,ao=this.bcolor,an=this.balpha,ah=this.gradientRotation,af=this.cornerRadius,ak=this.dashLength,ai=this.pattern,ae=this.topRadius,al=this.bcn,ab=am,aj=am;"object"==typeof am&&(ab=am[0],aj=am[am.length-1]);var ag,ad,Z,Y,ac,aa,W,R,Q,i=at;ai&&(at=0);var X,V,U,T,S=this.rotate;if(0<Math.abs(ar)||0<Math.abs(aq)){if(isNaN(ae)){W=aj,aj=AmCharts.adjustLuminosity(ab,-0.2),aj=AmCharts.adjustLuminosity(ab,-0.2),ag=AmCharts.polygon(ax,[0,ar,aw+ar,aw,0],[0,aq,aq,0,0],aj,at,1,ao,0,ah),0<an&&(Q=AmCharts.line(ax,[0,ar,aw+ar],[0,aq,aq],ao,an,ap,ak)),ad=AmCharts.polygon(ax,[0,0,aw,aw,0],[0,au,au,0,0],aj,at,1,ao,0,ah),ad.translate(ar,aq),0<an&&(Z=AmCharts.line(ax,[ar,ar],[aq,aq+au],ao,an,ap,ak)),Y=AmCharts.polygon(ax,[0,0,ar,ar,0],[0,au,au+aq,aq,0],aj,at,1,ao,0,ah),ac=AmCharts.polygon(ax,[aw,aw,aw+ar,aw+ar,aw],[0,au,au+aq,aq,0],aj,at,1,ao,0,ah),0<an&&(aa=AmCharts.line(ax,[aw,aw+ar,aw+ar,aw],[0,aq,au+aq,au],ao,an,ap,ak)),aj=AmCharts.adjustLuminosity(W,0.2),W=AmCharts.polygon(ax,[0,ar,aw+ar,aw,0],[au,au+aq,au+aq,au,au],aj,at,1,ao,0,ah),0<an&&(R=AmCharts.line(ax,[0,ar,aw+ar],[au,au+aq,au+aq],ao,an,ap,ak))}else{var s,o,j;S?(s=au/2,aj=ar/2,j=au/2,o=aw+ar/2,V=Math.abs(au/2),X=Math.abs(ar/2)):(aj=aw/2,s=aq/2,o=aw/2,j=au+aq/2+1,X=Math.abs(aw/2),V=Math.abs(aq/2));U=X*ae;T=V*ae;0.1<X&&0.1<X&&(ag=AmCharts.circle(ax,X,ab,at,ap,ao,an,!1,V),ag.translate(aj,s));0.1<U&&0.1<U&&(W=AmCharts.circle(ax,U,AmCharts.adjustLuminosity(ab,0.5),at,ap,ao,an,!1,T),W.translate(o,j))}}at=i;1>Math.abs(au)&&(au=0);1>Math.abs(aw)&&(aw=0);!isNaN(ae)&&(0<Math.abs(ar)||0<Math.abs(aq))?(am=[ab],am={fill:am,stroke:ao,"stroke-width":ap,"stroke-opacity":an,"fill-opacity":at},S?(at="M0,0 L"+aw+","+(au/2-au/2*ae),ap=" B",0<aw&&(ap=" A"),AmCharts.VML?(at+=ap+Math.round(aw-U)+","+Math.round(au/2-T)+","+Math.round(aw+U)+","+Math.round(au/2+T)+","+aw+",0,"+aw+","+au,at=at+(" L0,"+au)+(ap+Math.round(-X)+","+Math.round(au/2-V)+","+Math.round(X)+","+Math.round(au/2+V)+",0,"+au+",0,0")):(at+="A"+U+","+T+",0,0,0,"+aw+","+(au-au/2*(1-ae))+"L0,"+au,at+="A"+X+","+V+",0,0,1,0,0"),X=90):(ap=aw/2-aw/2*ae,at="M0,0 L"+ap+","+au,AmCharts.VML?(at="M0,0 L"+ap+","+au,ap=" B",0>au&&(ap=" A"),at+=ap+Math.round(aw/2-U)+","+Math.round(au-T)+","+Math.round(aw/2+U)+","+Math.round(au+T)+",0,"+au+","+aw+","+au,at+=" L"+aw+",0",at+=ap+Math.round(aw/2+X)+","+Math.round(V)+","+Math.round(aw/2-X)+","+Math.round(-V)+","+aw+",0,0,0"):(at+="A"+U+","+T+",0,0,0,"+(aw-aw/2*(1-ae))+","+au+"L"+aw+",0",at+="A"+X+","+V+",0,0,1,0,0"),X=180),ax=ax.path(at).attr(am),ax.gradient("linearGradient",[ab,AmCharts.adjustLuminosity(ab,-0.3),AmCharts.adjustLuminosity(ab,-0.3),ab],X),S?ax.translate(ar/2,0):ax.translate(0,aq/2)):ax=0===au?AmCharts.line(ax,[0,aw],[0,0],ao,an,ap,ak):0===aw?AmCharts.line(ax,[0,0],[0,au],ao,an,ap,ak):0<af?AmCharts.rect(ax,aw,au,am,at,ap,ao,an,af,ah,ak):AmCharts.polygon(ax,[0,0,aw,aw,0],[0,au,au,0,0],am,at,ap,ao,an,ah,!1,ak);aw=isNaN(ae)?0>au?[ag,Q,ad,Z,Y,ac,aa,W,R,ax]:[W,R,ad,Z,Y,ac,ag,Q,aa,ax]:S?0<aw?[ag,ax,W]:[W,ax,ag]:0>au?[ag,ax,W]:[W,ax,ag];AmCharts.setCN(av,ax,al+"front");AmCharts.setCN(av,ad,al+"back");AmCharts.setCN(av,W,al+"top");AmCharts.setCN(av,ag,al+"bottom");AmCharts.setCN(av,Y,al+"left");AmCharts.setCN(av,ac,al+"right");for(ag=0;ag<aw.length;ag++){if(ad=aw[ag]){ay.push(ad),AmCharts.setCN(av,ad,al+"element")}}ai&&ax.pattern(ai)},width:function(b){isNaN(b)&&(b=0);this.w=Math.round(b);this.draw()},height:function(b){isNaN(b)&&(b=0);this.h=Math.round(b);this.draw()},animateHeight:function(e,c){var f=this;f.easing=c;f.totalFrames=Math.round(1000*e/AmCharts.updateRate);f.rh=f.h;f.frame=0;f.height(1);setTimeout(function(){f.updateHeight.call(f)},AmCharts.updateRate)},updateHeight:function(){var d=this;d.frame++;var c=d.totalFrames;d.frame<=c&&(c=d.easing(0,d.frame,1,d.rh-1,c),d.height(c),setTimeout(function(){d.updateHeight.call(d)},AmCharts.updateRate))},animateWidth:function(e,c){var f=this;f.easing=c;f.totalFrames=Math.round(1000*e/AmCharts.updateRate);f.rw=f.w;f.frame=0;f.width(1);setTimeout(function(){f.updateWidth.call(f)},AmCharts.updateRate)},updateWidth:function(){var d=this;d.frame++;var c=d.totalFrames;d.frame<=c&&(c=d.easing(0,d.frame,1,d.rw-1,c),d.width(c),setTimeout(function(){d.updateWidth.call(d)},AmCharts.updateRate))}});AmCharts.CategoryAxis=AmCharts.Class({inherits:AmCharts.AxisBase,construct:function(b){this.cname="CategoryAxis";AmCharts.CategoryAxis.base.construct.call(this,b);this.minPeriod="DD";this.equalSpacing=this.parseDates=!1;this.position="bottom";this.startOnAxis=!1;this.firstDayOfWeek=1;this.gridPosition="middle";this.markPeriodChange=this.boldPeriodBeginning=!0;this.safeDistance=30;this.centerLabelOnFullPeriod=!0;this.periods=[{period:"ss",count:1},{period:"ss",count:5},{period:"ss",count:10},{period:"ss",count:30},{period:"mm",count:1},{period:"mm",count:5},{period:"mm",count:10},{period:"mm",count:30},{period:"hh",count:1},{period:"hh",count:3},{period:"hh",count:6},{period:"hh",count:12},{period:"DD",count:1},{period:"DD",count:2},{period:"DD",count:3},{period:"DD",count:4},{period:"DD",count:5},{period:"WW",count:1},{period:"MM",count:1},{period:"MM",count:2},{period:"MM",count:3},{period:"MM",count:6},{period:"YYYY",count:1},{period:"YYYY",count:2},{period:"YYYY",count:5},{period:"YYYY",count:10},{period:"YYYY",count:50},{period:"YYYY",count:100}];this.dateFormats=[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"MMM DD"},{period:"WW",format:"MMM DD"},{period:"MM",format:"MMM"},{period:"YYYY",format:"YYYY"}];this.nextPeriod={};this.nextPeriod.fff="ss";this.nextPeriod.ss="mm";this.nextPeriod.mm="hh";this.nextPeriod.hh="DD";this.nextPeriod.DD="MM";this.nextPeriod.MM="YYYY";AmCharts.applyTheme(this,b,this.cname)},draw:function(){AmCharts.CategoryAxis.base.draw.call(this);this.generateDFObject();var Z=this.chart.chartData;this.data=Z;if(AmCharts.ifArray(Z)){var Y,W=this.chart;"scrollbar"!=this.id?(AmCharts.setCN(W,this.set,"category-axis"),AmCharts.setCN(W,this.labelsSet,"category-axis"),AmCharts.setCN(W,this.axisLine.axisSet,"category-axis")):this.bcn=this.id+"-";var X=this.start,V=this.labelFrequency,T=0;Y=this.end-X+1;var S=this.gridCountR,O=this.showFirstLabel,U=this.showLastLabel,R,Q="",P=AmCharts.extractPeriod(this.minPeriod);R=AmCharts.getPeriodDuration(P.period,P.count);var F,s,L,G,o,N;F=this.rotate;var M=this.firstDayOfWeek,J=this.boldPeriodBeginning,Z=AmCharts.resetDateToMin(new Date(Z[Z.length-1].time+1.05*R),this.minPeriod,1,M).getTime(),E;this.endTime>Z&&(this.endTime=Z);N=this.minorGridEnabled;var j,Z=this.gridAlpha,I;if(this.parseDates&&!this.equalSpacing){this.timeDifference=this.endTime-this.startTime;X=this.choosePeriod(0);V=X.period;F=X.count;s=AmCharts.getPeriodDuration(V,F);s<R&&(V=P.period,F=P.count,s=R);L=V;"WW"==L&&(L="DD");this.stepWidth=this.getStepWidth(this.timeDifference);var S=Math.ceil(this.timeDifference/s)+5,H=Q=AmCharts.resetDateToMin(new Date(this.startTime-s),V,F,M).getTime();L==V&&1==F&&this.centerLabelOnFullPeriod&&(o=s*this.stepWidth);this.cellWidth=R*this.stepWidth;Y=Math.round(Q/s);X=-1;Y/2==Math.round(Y/2)&&(X=-2,Q-=s);var i=W.firstTime,K=0;N&&1<F&&(j=this.chooseMinorFrequency(F),I=AmCharts.getPeriodDuration(V,j));if(0<this.gridCountR){for(Y=X;Y<=S;Y++){P=i+s*(Y+Math.floor((H-i)/s))-K;"DD"==V&&(P+=3600000);P=AmCharts.resetDateToMin(new Date(P),V,F,M).getTime();"MM"==V&&(N=(P-Q)/s,1.5<=(P-Q)/s&&(P=P-(N-1)*s+AmCharts.getPeriodDuration("DD",3),P=AmCharts.resetDateToMin(new Date(P),V,1).getTime(),K+=s));R=(P-this.startTime)*this.stepWidth;N=!1;this.nextPeriod[L]&&(N=this.checkPeriodChange(this.nextPeriod[L],1,P,Q,L));E=!1;N&&this.markPeriodChange?(N=this.dateFormatsObject[this.nextPeriod[L]],this.twoLineMode&&(N=this.dateFormatsObject[L]+"\n"+N,N=AmCharts.fixBrakes(N)),E=!0):N=this.dateFormatsObject[L];J||(E=!1);Q=AmCharts.formatDate(new Date(P),N,W);if(Y==X&&!O||Y==S&&!U){Q=" "}this.labelFunction&&(Q=this.labelFunction(Q,new Date(P),this,V,F,G).toString());this.boldLabels&&(E=!0);G=new this.axisItemRenderer(this,R,Q,!1,o,0,!1,E);this.pushAxisItem(G);G=Q=P;if(!isNaN(j)){for(R=1;R<F;R+=j){this.gridAlpha=this.minorGridAlpha,N=P+I*R,N=AmCharts.resetDateToMin(new Date(N),V,j,M).getTime(),N=new this.axisItemRenderer(this,(N-this.startTime)*this.stepWidth),this.pushAxisItem(N)}}this.gridAlpha=Z}}}else{if(!this.parseDates){if(this.cellWidth=this.getStepWidth(Y),Y<S&&(S=Y),T+=this.start,this.stepWidth=this.getStepWidth(Y),0<S){for(S=Math.floor(Y/S),j=this.chooseMinorFrequency(S),R=T,R/2==Math.round(R/2)&&R--,0>R&&(R=0),M=0,this.end-R+1>=this.autoRotateCount&&(this.labelRotation=this.autoRotateAngle),Y=R;Y<=this.end+2;Y++){J=!1;0<=Y&&Y<this.data.length?(L=this.data[Y],Q=L.category,J=L.forceShow):Q="";if(N&&!isNaN(j)){if(Y/j==Math.round(Y/j)||J){Y/S==Math.round(Y/S)||J||(this.gridAlpha=this.minorGridAlpha,Q=void 0)}else{continue}}else{if(Y/S!=Math.round(Y/S)&&!J){continue}}R=this.getCoordinate(Y-T);G=0;"start"==this.gridPosition&&(R-=this.cellWidth/2,G=this.cellWidth/2);J=!0;H=G;"start"==this.tickPosition&&(H=0,J=!1,G=0);if(Y==X&&!O||Y==this.end&&!U){Q=void 0}Math.round(M/V)!=M/V&&(Q=void 0);M++;o=this.cellWidth;F&&(o=NaN);this.labelFunction&&L&&(Q=this.labelFunction(Q,L,this));Q=AmCharts.fixBrakes(Q);E=!1;this.boldLabels&&(E=!0);Y>this.end&&"start"==this.tickPosition&&(Q=" ");G=new this.axisItemRenderer(this,R,Q,J,o,G,void 0,E,H,!1,L.labelColor,L.className);G.serialDataItem=L;this.pushAxisItem(G);this.gridAlpha=Z}}}else{if(this.parseDates&&this.equalSpacing){T=this.start;this.startTime=this.data[this.start].time;this.endTime=this.data[this.end].time;this.timeDifference=this.endTime-this.startTime;X=this.choosePeriod(0);V=X.period;F=X.count;s=AmCharts.getPeriodDuration(V,F);s<R&&(V=P.period,F=P.count,s=R);L=V;"WW"==L&&(L="DD");this.stepWidth=this.getStepWidth(Y);S=Math.ceil(this.timeDifference/s)+1;Q=AmCharts.resetDateToMin(new Date(this.startTime-s),V,F,M).getTime();this.cellWidth=this.getStepWidth(Y);Y=Math.round(Q/s);X=-1;Y/2==Math.round(Y/2)&&(X=-2,Q-=s);R=this.start;R/2==Math.round(R/2)&&R--;0>R&&(R=0);o=this.end+2;o>=this.data.length&&(o=this.data.length);I=!1;I=!O;this.previousPos=-1000;20<this.labelRotation&&(this.safeDistance=5);s=R;if(this.data[R].time!=AmCharts.resetDateToMin(new Date(this.data[R].time),V,F,M).getTime()){for(M=0,E=Q,Y=R;Y<o;Y++){P=this.data[Y].time,this.checkPeriodChange(V,F,P,E)&&(M++,2<=M&&(s=Y,Y=o),E=P)}}N&&1<F&&(j=this.chooseMinorFrequency(F),AmCharts.getPeriodDuration(V,j));if(0<this.gridCountR){for(Y=R;Y<o;Y++){if(P=this.data[Y].time,this.checkPeriodChange(V,F,P,Q)&&Y>=s){R=this.getCoordinate(Y-this.start);N=!1;this.nextPeriod[L]&&(N=this.checkPeriodChange(this.nextPeriod[L],1,P,Q,L));E=!1;N&&this.markPeriodChange?(N=this.dateFormatsObject[this.nextPeriod[L]],E=!0):N=this.dateFormatsObject[L];Q=AmCharts.formatDate(new Date(P),N,W);if(Y==X&&!O||Y==S&&!U){Q=" "}I?I=!1:(J||(E=!1),R-this.previousPos>this.safeDistance*Math.cos(this.labelRotation*Math.PI/180)&&(this.labelFunction&&(Q=this.labelFunction(Q,new Date(P),this,V,F,G)),this.boldLabels&&(E=!0),G=new this.axisItemRenderer(this,R,Q,void 0,void 0,void 0,void 0,E),N=G.graphics(),this.pushAxisItem(G),G=N.getBBox().width,AmCharts.isModern||(G-=R),this.previousPos=R+G));G=Q=P}else{isNaN(j)||(this.checkPeriodChange(V,j,P,H)&&(this.gridAlpha=this.minorGridAlpha,R=this.getCoordinate(Y-this.start),N=new this.axisItemRenderer(this,R),this.pushAxisItem(N),H=P),this.gridAlpha=Z)}}}}}}for(Y=0;Y<this.data.length;Y++){if(O=this.data[Y]){U=this.parseDates&&!this.equalSpacing?Math.round((O.time-this.startTime)*this.stepWidth+this.cellWidth/2):this.getCoordinate(Y-T),O.x[this.id]=U}}O=this.guides.length;for(Y=0;Y<O;Y++){U=this.guides[Y],J=S=S=Z=X=NaN,j=U.above,U.toCategory&&(S=W.getCategoryIndexByValue(U.toCategory),isNaN(S)||(X=this.getCoordinate(S-T),U.expand&&(X+=this.cellWidth/2),G=new this.axisItemRenderer(this,X,"",!0,NaN,NaN,U),this.pushAxisItem(G,j))),U.category&&(J=W.getCategoryIndexByValue(U.category),isNaN(J)||(Z=this.getCoordinate(J-T),U.expand&&(Z-=this.cellWidth/2),S=(X-Z)/2,G=new this.axisItemRenderer(this,Z,U.label,!0,NaN,S,U),this.pushAxisItem(G,j))),J=W.dataDateFormat,U.toDate&&(U.toDate instanceof Date||(isNaN(U.toDate)?J&&(U.toDate=AmCharts.stringToDate(U.toDate,J)):U.toDate=new Date(U.toDate)),this.equalSpacing?(S=W.getClosestIndex(this.data,"time",U.toDate.getTime(),!1,0,this.data.length-1),isNaN(S)||(X=this.getCoordinate(S-T))):X=(U.toDate.getTime()-this.startTime)*this.stepWidth,G=new this.axisItemRenderer(this,X,"",!0,NaN,NaN,U),this.pushAxisItem(G,j)),U.date&&(U.date instanceof Date||(isNaN(U.date)?J&&(U.date=AmCharts.stringToDate(U.date,J)):U.date=new Date(U.date)),this.equalSpacing?(J=W.getClosestIndex(this.data,"time",U.date.getTime(),!1,0,this.data.length-1),isNaN(J)||(Z=this.getCoordinate(J-T))):Z=(U.date.getTime()-this.startTime)*this.stepWidth,S=(X-Z)/2,J=!0,U.toDate&&(J=!1),G="H"==this.orientation?new this.axisItemRenderer(this,Z,U.label,J,2*S,NaN,U):new this.axisItemRenderer(this,Z,U.label,!1,NaN,S,U),this.pushAxisItem(G,j)),(0<X||0<Z)&&(X<this.width||Z<this.width)&&(X=new this.guideFillRenderer(this,Z,X,U),Z=X.graphics(),this.pushAxisItem(X,j),U.graphics=Z,Z.index=Y,U.balloonText&&this.addEventListeners(Z,U))}}this.axisCreated=!0;W=this.x;T=this.y;this.set.translate(W,T);this.labelsSet.translate(W,T);this.positionTitle();(W=this.axisLine.set)&&W.toFront();W=this.getBBox().height;2<W-this.previousHeight&&this.autoWrap&&!this.parseDates&&(this.axisCreated=this.chart.marginsUpdated=!1);this.previousHeight=W},chooseMinorFrequency:function(d){for(var c=10;0<c;c--){if(d/c==Math.round(d/c)){return d/c}}},choosePeriod:function(f){var e=AmCharts.getPeriodDuration(this.periods[f].period,this.periods[f].count),g=Math.ceil(this.timeDifference/e),h=this.periods;return this.timeDifference<e&&0<f?h[f-1]:g<=this.gridCountR?h[f]:f+1<h.length?this.choosePeriod(f+1):h[f]},getStepWidth:function(d){var c;this.startOnAxis?(c=this.axisWidth/(d-1),1==d&&(c=this.axisWidth)):c=this.axisWidth/d;return c},getCoordinate:function(b){b*=this.stepWidth;this.startOnAxis||(b+=this.stepWidth/2);return Math.round(b)},timeZoom:function(d,c){this.startTime=d;this.endTime=c},minDuration:function(){var b=AmCharts.extractPeriod(this.minPeriod);return AmCharts.getPeriodDuration(b.period,b.count)},checkPeriodChange:function(i,f,m,n,l){m=new Date(m);var k=new Date(n),j=this.firstDayOfWeek;n=f;"DD"==i&&(f=1);m=AmCharts.resetDateToMin(m,i,f,j).getTime();f=AmCharts.resetDateToMin(k,i,f,j).getTime();return"DD"==i&&"hh"!=l&&m-f<=AmCharts.getPeriodDuration(i,n)?!1:m!=f?!0:!1},generateDFObject:function(){this.dateFormatsObject={};var d;for(d=0;d<this.dateFormats.length;d++){var c=this.dateFormats[d];this.dateFormatsObject[c.period]=c.format}},xToIndex:function(h){var f=this.data,k=this.chart,l=k.rotate,j=this.stepWidth;this.parseDates&&!this.equalSpacing?(h=this.startTime+Math.round(h/j)-this.minDuration()/2,k=k.getClosestIndex(f,"time",h,!1,this.start,this.end+1)):(this.startOnAxis||(h-=j/2),k=this.start+Math.round(h/j));var k=AmCharts.fitToBounds(k,0,f.length-1),i;f[k]&&(i=f[k].x[this.id]);l?i>this.height+1&&k--:i>this.width+1&&k--;0>i&&k++;return k=AmCharts.fitToBounds(k,0,f.length-1)},dateToCoordinate:function(b){return this.parseDates&&!this.equalSpacing?(b.getTime()-this.startTime)*this.stepWidth:this.parseDates&&this.equalSpacing?(b=this.chart.getClosestIndex(this.data,"time",b.getTime(),!1,0,this.data.length-1),this.getCoordinate(b-this.start)):NaN},categoryToCoordinate:function(b){return this.chart?(b=this.chart.getCategoryIndexByValue(b),this.getCoordinate(b-this.start)):NaN},coordinateToDate:function(b){return this.equalSpacing?(b=this.xToIndex(b),new Date(this.data[b].time)):new Date(this.startTime+b/this.stepWidth)}});