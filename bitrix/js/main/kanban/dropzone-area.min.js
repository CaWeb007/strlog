(function(){BX.namespace("BX.Kanban");BX.Kanban.DropZoneArea=function(b,a){this.dropZoneType=this.getDropZoneType(a.dropZoneType);this.dropZoneTimeout=BX.type.isNumber(a.dropZoneTimeout)&&a.dropZoneTimeout>500?a.dropZoneTimeout:8000;this.grid=b;this.layout={container:null};this.dropZones=Object.create(null);this.dropZonesOrder=[]};BX.Kanban.DropZoneArea.prototype={getGrid:function(){return this.grid},addDropZone:function(c){c=c||{};if(this.getDropZone(c.id)!==null){return null}var a=this.getDropZoneType(c.type);var e=new a(c);if(!(e instanceof BX.Kanban.DropZone)){throw new Error("DropZone type must be an instance of BX.Kanban.DropZone")}e.setDropZoneArea(this);this.dropZones[e.getId()]=e;var d=this.getDropZone(c.targetId);var b=BX.util.array_search(d,this.dropZonesOrder);if(b>=0){this.dropZonesOrder.splice(b,0,e)}else{this.dropZonesOrder.push(e)}if(this.getGrid().isRendered()){this.render()}return e},updateDropZone:function(b,a){b=this.getDropZone(b);if(!b){return false}b.setOptions(a);b.render();return true},removeDropZone:function(a){var b=this.getDropZone(a);if(b){this.dropZonesOrder=this.dropZonesOrder.filter(function(c){return b!==c});delete this.dropZones[b.getId()];if(this.getGrid().isRendered()){this.render()}}return b},render:function(){var c=document.createDocumentFragment();var a=this.getDropZones();for(var b=0;b<a.length;b++){c.appendChild(a[b].render())}BX.cleanNode(this.getContainer());this.getContainer().appendChild(c)},getDropZone:function(b){var a=b instanceof BX.Kanban.DropZone?b.getId():b;return this.dropZones[a]?this.dropZones[a]:null},getDropZones:function(){return this.dropZonesOrder},getDropZonesCount:function(){return this.dropZonesOrder.length},getDropZoneType:function(b){var a=BX.Kanban.Utils.getClass(b);if(BX.type.isFunction(a)){return a}return this.dropZoneType||BX.Kanban.DropZone},getDropZoneTimeout:function(){return this.dropZoneTimeout},getContainer:function(){if(this.layout.container){return this.layout.container}this.layout.container=BX.create("div",{attrs:{className:"main-kanban-dropzone-area"}});return this.layout.container},emptyAll:function(){this.getDropZones().forEach(function(a){a.empty()})},show:function(){if(this.getDropZonesCount()){this.getContainer().classList.add("main-kanban-dropzone-show")}},hide:function(){this.getContainer().classList.remove("main-kanban-dropzone-show")},setActive:function(){this.getContainer().classList.add("main-kanban-dropzone-area-active")},unsetActive:function(){this.getContainer().classList.remove("main-kanban-dropzone-area-active")}}})();