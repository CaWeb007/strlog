(function(c){if(c.BX.timer){return}var e=[],d=200,b=null,f=0;BX.timer=function(g,i){i=i||{};if(BX.type.isString(g)||BX.type.isElementNode(g)){i.container=g}else{if(typeof(g)=="object"){i=g}}if(!i.container){return false}var h=new BX.CTimer(i);BX.timer.start(h);if(null==b){b=setInterval(a,d);BX.garbage(BX.timer.clear)}return h};BX.timer.stop=function(g){e[g.TIMER_INDEX]=null};BX.timer.start=function(g){g.TIMER_INDEX=f;e[f++]=g};BX.timer.clock=function(g,h){return BX.timer({container:g,dt:h})};BX.timer.clear=function(){clearInterval(b);e=null};BX.timer.registerFormat=function(h,g){BX.CTimer.prototype.formatValueHandlers[h]=g};BX.timer.getHandler=function(g){return BX.CTimer.prototype.formatValueHandlers[g]};BX.CTimer=function(h,g){this.container=h.container;this.from=h.from?parseInt(h.from.valueOf()):null;this.to=h.to?parseInt(h.to.valueOf()):null;this.index=g;this.dt=parseInt(h.dt);if(isNaN(this.dt)){this.dt=0}this.display=h.display||(BX.isAmPmMode()?"clock_am_pm":"clock");this.accuracy=h.accuracy||60;this.callback=this.from?this._callback_from:(this.to?this._callback_to:this._callback);this.callback_finish=h.callback_finish;this.formatValue=this.formatValueHandlers.clock;this.bInited=false;BX.ready(BX.delegate(this.Init,this))};BX.CTimer.prototype.Init=function(){if(this.bInited){return}this.container=BX(this.container);this.container_value_fld=this.container.tagName.toUpperCase()=="INPUT"?"value":"innerHTML";if(this.container_value_fld=="value"&&(this.display=="clock"||this.display=="clock_am_pm")){if(this.display=="clock"){this.display="simple"}else{if(this.display=="clock_am_pm"){this.display="simple_am_pm"}}}this.formatValue=this.formatValueHandlers[this.display]?this.formatValueHandlers[this.display]:this.formatValueHandlers.clock;this.bInited=true};BX.CTimer.prototype.setFrom=function(g){if(!this.from){return}this.from=g};BX.CTimer.prototype.setTo=function(g){if(!this.to){return}this.to=g};BX.CTimer.prototype._callback=function(g){if(this.dt!==0){var g=new Date(g.valueOf()+this.dt)}this.setValue(this.formatValue(g.getHours(),g.getMinutes(),g.getSeconds()))};BX.CTimer.prototype._callback_from=function(g){var h=(g.valueOf()-this.from.valueOf()+this.dt)/1000;this.setValue(this.formatValue(parseInt(h/3600),parseInt((h%3600)/60),parseInt(h%60)))};BX.CTimer.prototype._callback_to=function(g){var h=(this.to.valueOf()-g.valueOf())/1000;if(h>0){this.setValue(this.formatValue(parseInt(h/3600),parseInt((h%3600)/60),parseInt(h%60)))}else{this.Finish()}};BX.CTimer.prototype.formatValueHandlers={clock:function(j,g,i){var k='<span class="bx-timer-semicolon">:</span>';return BX.util.str_pad(j,2,"0","left")+k+(this.accuracy>=3600?"00":BX.util.str_pad(g,2,"0","left"))+(this.accuracy>=60?"":(k+BX.util.str_pad(i,2,"0","left")))},clock_am_pm:function(k,g,j){var i="am";var l='<span class="bx-timer-semicolon">:</span>';if(k>12){k=k-12;i="pm"}else{if(k==0){k=12;i="am"}else{if(k==12){i="pm"}}}return k+l+(this.accuracy>=3600?"00":BX.util.str_pad(g,2,"0","left"))+(this.accuracy>=60?"":(l+BX.util.str_pad(j,2,"0","left")))+" "+i},simple:function(j,g,i){return BX.util.str_pad(j,2,"0","left")+":"+(this.accuracy>=3600?"00":BX.util.str_pad(g,2,"0","left"))+(this.accuracy>=60?"":(":"+BX.util.str_pad(i,2,"0","left")))},simple_am_pm:function(k,g,j){var i="am";if(k>12){k=k-12;i="pm"}else{if(k==0){k=12;i="am"}else{if(k==12){i="pm"}}}return k+":"+(this.accuracy>=3600?"00":BX.util.str_pad(g,2,"0","left"))+(this.accuracy>=60?"":(":"+BX.util.str_pad(j,2,"0","left")))+" "+i},worktime:function(j,g,i){return j+BX.message("JS_CORE_H")+" "+(this.accuracy>=3600?"":g+BX.message("JS_CORE_M")+(this.accuracy>=60?"":" "+i+BX.message("JS_CORE_S")))},worktime_short:function(j,g,i){return BX.util.rtrim((j>0?j+BX.message("JS_CORE_H")+" ":"")+(g>0&&this.accuracy<3600?g+BX.message("JS_CORE_M")+" ":"")+(this.accuracy>=60?"":(i>0?i+BX.message("JS_CORE_S"):"")))}};BX.CTimer.prototype.setValue=function(g){if(this.bInited){if(g!=this._last_value){this.container[this.container_value_fld]=g}this._last_value=g}};BX.CTimer.prototype.Finish=function(){BX.timer.stop(this);if(this.callback_finish){this.callback_finish.apply(this)}BX.cleanNode(this.container.parentNode)};function a(){var j=new Date();for(var h=0,g=f;h<g;h++){if(e[h]&&e[h].callback){e[h].callback.apply(e[h],[j])}}j=null}})(window);