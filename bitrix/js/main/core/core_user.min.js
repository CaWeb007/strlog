(function(){if(BX.user){return}BX.user={};BX.user.getOnlineStatus=function(d,b,c){d=BX.type.isDate(d)?d:(BX.type.isNumber(d)?new Date(d*1000):new Date(0));b=BX.type.isDate(b)?b:(BX.type.isNumber(b)?new Date(b*1000):new Date());c=!!c;var a={isOnline:false,status:"offline",statusText:BX.message("U_STATUS_OFFLINE"),lastSeen:d,lastSeenText:"",now:b,utc:c};if(d.getTime()===0){return a}a.isOnline=b.getTime()-d.getTime()<=parseInt(BX.message("LIMIT_ONLINE"))*1000;a.status=a.isOnline?"online":"offline";a.statusText=BX.message("U_STATUS_"+a.status.toUpperCase());if(d.getTime()>0&&b.getTime()-d.getTime()>300*1000){a.lastSeenText=BX.date.formatLastActivityDate(d,b,c)}return a};BX.user.getSecondsForLimitOnline=function(){return parseInt(BX.message.LIMIT_ONLINE)}})();