(function(e){if(BX.translit){return}var h=null,d=[],c={max_len:100,change_case:"L",replace_space_and_other:true,replace_space:"_",replace_other:"_",delete_repeat_replace:true,use_google:false,replace_dict:"TRANS",replace_way:"LE",skip_r_test:false},b={en:/[A-Z0-9]/i,space:/\s/};BX.translit=function(p,o){if(null==o){o={}}for(var l in c){if(typeof o[l]=="undefined"){o[l]=c[l]}}if(o.change_case){o.change_case=o.change_case.toUpperCase()}if(o.use_google&&o.callback&&!!BX.message("YANDEX_KEY")){return(new BX.CYandexTranslator(p,o)).run()}else{var k=p.length;var j="";var n="";for(var l=0;l<k;l++){var m=p.charAt(l);if(!o.skip_r_test&&b.en.test(m)){q=m}else{if(!o.skip_r_test&&b.space.test(m)){if(!o.delete_repeat_replace||(l>0&&n!=o.replace_space)){q=o.replace_space}else{q=""}}else{var q=g(m,o.change_case,o.replace_way,o.replace_dict,o.replace_separator);if(null===q){if(o.replace_space_and_other){if(!o.delete_repeat_replace||(l>0&&l!=k-1&&n!=o.replace_other)){q=o.replace_other}else{q=""}}else{q=m}}}}if(null!=q&&q.length>0){switch(o.change_case){case"L":q=q.toLowerCase();break;case"U":q=q.toUpperCase();break}j+=q;n=q}if(j.length>=o.max_len){break}}if(null!=o.callback&&BX.type.isFunction(o.callback)){o.callback(j);return j}else{return j}}};BX.correctText=function(r,k){if(typeof(k)=="undefined"){k={}}k.max_len=k.max_len?k.max_len:r.length;k.replace_way=k.replace_way?k.replace_way:"EL";k.mixed=k.mixed?true:false;if(!k.mixed||k.replace_way=="AUTO"){var q=0;var m=0;var p=r.length;var o=/[A-Z]/i;var j=/[0-9!@#$%\^\&\*:;"~_ \(\),.\+\=\-\\\{\}\?\<\>]/i;for(var n=0;n<p;n++){var l=r.charAt(n);if(o.test(l)){q++}else{if(j.test(l)){}else{m++}}}}if(k.replace_way=="AUTO"){if(m>q){k.replace_way="LE"}else{k.replace_way="EL"}}if(k.replace_way=="LE"){if(!k.mixed&&(q>0||m==0)){return r}}else{if(!k.mixed&&k.replace_way=="EL"){if(!k.mixed&&(q==0||m>0)){return r}}}return BX.translit(r,{replace_dict:"CORRECT",replace_way:k.replace_way,replace_separator:" ",skip_r_test:true,change_case:false,max_len:k.max_len,delete_repeat_replace:false,replace_space_and_other:false})};BX.IExternalTranslator=function(j,i){this.str=j;this.params=i};BX.IExternalTranslator.prototype.run=function(){var i=a(this.str);if(i){this.result({translation:i},true)}else{this.translate()}};BX.IExternalTranslator.prototype.translate=function(){};BX.IExternalTranslator.prototype.result=function(i,j){if(!j){d[d.length]={original:this.str,translation:i.translation}}this.params.use_google=false;BX.translit(i.translation,this.params)};BX.CGoogleTranslator=function(j,i){BX.CBingTranslator.superclass.constructor.apply(this,arguments)};BX.extend(BX.CGoogleTranslator,BX.IExternalTranslator);BX.CGoogleTranslator.prototype.translate=function(){if(!e.google||typeof(e.google.load)!="function"){if(BX.browser.IsIE()){var j=BX.proxy(this.translate,this);var i=function(){setTimeout(function(){j(arguments)},100)}}else{var i=BX.proxy(this.translate,this)}BX.loadScript("http://www.google.com/jsapi?rnd="+Math.random(),i)}else{if(!e.google.language){google.load("language",1,{callback:BX.proxy(this.translate,this)})}else{google.language.translate(this.str,BX.message("LANGUAGE_ID"),"en",BX.delegate(this.result,this))}}};BX.CBingTranslator=function(j,i){BX.CBingTranslator.superclass.constructor.apply(this,arguments)};BX.extend(BX.CBingTranslator,BX.IExternalTranslator);BX.CBingTranslator.prototype.translate=function(){var j="bing_translate_callback_"+parseInt(Math.random()*10000),i="http://api.bing.net/json.aspx?AppId="+BX.message("BING_KEY")+"&Query="+BX.util.urlencode(this.str.substr(0,5000))+"&Sources=Translation&Version="+(this.params.version||"2.2")+"&Translation.SourceLanguage="+BX.message("LANGUAGE_ID")+"&Translation.TargetLanguage=en&JsonType=callback&JsonCallback="+j;e[j]=BX.proxy(this.result,this);BX.loadScript(i,function(){e[j]=null})};BX.CBingTranslator.prototype.result=function(i,j){var k={translation:this.str};if(i){if(i.translation){k=i}else{if(i.SearchResponse&&i.SearchResponse.Translation&&i.SearchResponse.Translation.Results&&i.SearchResponse.Translation.Results[0]){k.translation=i.SearchResponse.Translation.Results[0].TranslatedTerm}}}return BX.CBingTranslator.superclass.result.apply(this,[k,j])};BX.CYandexTranslator=function(j,i){BX.CYandexTranslator.superclass.constructor.apply(this,arguments)};BX.extend(BX.CYandexTranslator,BX.IExternalTranslator);BX.CYandexTranslator.prototype.translate=function(){var l=this.str.substr(0,5000).split(/\n/),o="",m;for(m=0;m<l.length;m++){o+="&text="+BX.util.urlencode(l[m])}var j=(BX.message("LANGUAGE_ID")=="ua"?"uk":BX.message("LANGUAGE_ID"))+"-en";var n="yandex_translate_callback_"+parseInt(Math.random()*100000),k="https://translate.yandex.net/api/v1.5/tr.json/translate?key="+BX.message("YANDEX_KEY")+"&lang="+j+"&callback="+n+"&clientId=bitrix"+o;e[n]=BX.proxy(this.result,this);BX.loadScript(k,function(){e[n]=null})};BX.CYandexTranslator.prototype.result=function(i,j){var k={translation:this.str};if(!!i){if(i.translation){k=i}else{if(i.code==200&&i.text.length>0){k.translation=i.text.join("\n")}}}return BX.CYandexTranslator.superclass.result.apply(this,[k,j])};function a(l){for(var k=0,j=d.length;k<j;k++){if(d[k].original==l){return d[k].translation}}return null}function f(o,p,k){var m=(BX.message(o+(p=="LE"?"_FROM":"_TO"))||"").split(k),l=(BX.message(o+(p=="LE"?"_TO":"_FROM"))||"").split(k),n,j;if(h==null){h={}}if(typeof(h[o])=="undefined"){h[o]={}}h[o][p]=[];for(n=0,j=m.length;n<j;n++){h[o][p][n]=[m[n],l[n]]}}function g(m,n,p,o,k){if(typeof(k)=="undefined"){k=","}if(typeof(o)=="undefined"){o="TRANS"}if(h==null||typeof(h[o])=="undefined"||typeof(h[o][p])=="undefined"){f(o,p,k)}for(var l=0,j=h[o][p].length;l<j;l++){if(m===h[o][p][l][0]){return h[o][p][l][1]}}return null}})(window);