(function(a){BX.DD=function(b){return new BX.DD.dragdrop(b)};BX.DD.allowSelection=function(){document.onmousedown=null;var c=document.body;c.ondrag=null;c.onselectstart=null;c.style.MozUserSelect=""};BX.DD.denySelection=function(){document.onmousedown=BX.False;var c=document.body;c.ondrag=BX.False;c.onselectstart=BX.False;c.style.MozUserSelect="none"};BX.DD.dragdrop=function(b){};BX.DD.dropFiles=function(b){if(BX.type.isElementNode(b)&&this.supported()){b.setAttribute("dropzone","copy f:*/*");this.DIV=b;this._timer=null;this._initEvents();this._cancelLeave=function(){if(this._timer!=null){clearTimeout(this._timer);this._timer=null}};this._prepareLeave=function(){this._cancelLeave();this._timer=setTimeout(BX.delegate(function(){BX.onCustomEvent(this,"dragLeave")},this),100)};return this}return false};BX.DD.dropFiles.prototype._initEvents=function(){BX.bind(this.DIV,"dragover",BX.proxy(this._dragOver,this));BX.bind(this.DIV,"dragenter",BX.proxy(this._dragEnter,this));BX.bind(this.DIV,"dragleave",BX.proxy(this._dragLeave,this));BX.bind(this.DIV,"dragexit",BX.proxy(this._dragExit,this));BX.bind(this.DIV,"drop",BX.proxy(this._drop,this))};BX.DD.dropFiles.prototype._dragEnter=function(b){BX.PreventDefault(b);this._cancelLeave();BX.onCustomEvent(this,"dragEnter",[b]);return true};BX.DD.dropFiles.prototype._dragExit=function(b){BX.PreventDefault(b);this._prepareLeave();return false};BX.DD.dropFiles.prototype._dragLeave=function(b){BX.PreventDefault(b);this._prepareLeave();return false};BX.DD.dropFiles.prototype._dragOver=function(b){BX.PreventDefault(b);this._cancelLeave();return true};BX.DD.dropFiles.prototype._drop=function(d){BX.PreventDefault(d);var c=d.dataTransfer;var b=c.files;BX.onCustomEvent(this,"dropFiles",[b,d]);BX.onCustomEvent(this,"dragLeave");return false};BX.DD.dropFiles.prototype.isEventSupported=function(d){var e=BX.create("DIV");var c="on"+d;var b=(c in e);if(!b&&e.setAttribute&&e.removeAttribute){e.setAttribute(c,"");b=(typeof e[c]==="function")}e=null;return b};BX.DD.dropFiles.prototype.supported=function(){return((!!a.FileReader)&&this.isEventSupported("dragstart")&&this.isEventSupported("drop"))}})(window);