(function(a){if(BX.Scale.ActionProcessDialog){return}BX.Scale.ActionProcessDialog={dialogWindow:null,contentTable:null,processingAction:false,pageRefresh:false,getContentObj:function(){if(this.contentTable===null){var b=BX.create("table",{props:{className:"bx-adm-scale-action-result-table"}}),c=BX.create("tr");c.appendChild(BX.create("th",{html:BX.message("SCALE_PANEL_JS_ARD_NAME")}));c.appendChild(BX.create("th",{html:BX.message("SCALE_PANEL_JS_ARD_RESULT")}));c.appendChild(BX.create("th",{html:BX.message("SCALE_PANEL_JS_ARD_MESSAGE")}));b.appendChild(c);this.contentTable=b}return this.contentTable},addActionProcess:function(b){if(this.processingAction){return false}this.processingAction=true;var c=this.getContentObj(),d=BX.create("tr");d.appendChild(BX.create("td",{html:b}));var f=BX.create("td"),e=document.body.appendChild(document.createElement("DIV"));e.className="bx-adm-scale-wait";e.style.marginLeft="24px";f.appendChild(e);d.appendChild(f);d.appendChild(BX.create("td"));c.appendChild(d);if(this.dialogWindow){this.dialogWindow.adjustSizeEx()}return true},setActionResult:function(b,c){if(!this.processingAction){return false}if(c){this.addActionMessage(c,true)}this.processingAction=false;var d=this.contentTable.lastChild;if(b){d.children[1].innerHTML="<td style='text-align: center;'><span style='color: green;'>OK</span></td>"}else{d.children[1].innerHTML="<td style='text-align: center;'><span style='color: red;'>"+BX.message("SCALE_PANEL_JS_ERROR")+"</span></td>"}BX("close").disabled=false;return true},addActionMessage:function(b,d){if(!this.processingAction){return false}var c=this.contentTable.lastChild;if(d){c.children[2].innerHTML=b}else{if(c.children[2].innerHTML.length>0){c.children[2].innerHTML+="<br>"}c.children[2].innerHTML+=b}return true},show:function(){var b=this.getContentObj();BX.Scale.currentActionProcessDialogContext=this;var c=BX.CAdminDialog.btnClose;if(this.pageRefresh){c.action=function(){this.parentWindow.Close();BX.Scale.AdminFrame.waitForPageRefreshing();a.location.reload(true)}}this.dialogWindow=new BX.CDialog({title:BX.message("SCALE_PANEL_JS_APD_TITLE"),content:b,resizable:false,height:500,width:500,buttons:[c]});BX("close").disabled=true;this.dialogWindow.unclosable=true;this.dialogWindow.adjustSizeEx();this.dialogWindow.Show()}}})(window);